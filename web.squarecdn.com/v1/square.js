
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="2ec69e17-d703-56e2-a94d-3b5aabf0ea0e")}catch(e){}}();
(()=>{"use strict";var e={7111:(e,t,r)=>{var n=r(6733),i=r(9821),o=TypeError;e.exports=function(e){if(n(e))return e;throw new o(i(e)+" is not a function")}},7988:(e,t,r)=>{var n=r(2359),i=r(9821),o=TypeError;e.exports=function(e){if(n(e))return e;throw new o(i(e)+" is not a constructor")}},8505:(e,t,r)=>{var n=r(6733),i=String,o=TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw new o("Can't set "+i(e)+" as a prototype")}},9736:(e,t,r)=>{var n=r(95),i=r(2391),o=r(1787).f,s=n("unscopables"),a=Array.prototype;void 0===a[s]&&o(a,s,{configurable:!0,value:i(null)}),e.exports=function(e){a[s][e]=!0}},6637:(e,t,r)=>{var n=r(966).charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},7728:(e,t,r)=>{var n=r(1321),i=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw new i("Incorrect invocation")}},1176:(e,t,r)=>{var n=r(5052),i=String,o=TypeError;e.exports=function(e){if(n(e))return e;throw new o(i(e)+" is not an object")}},9772:e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},2460:(e,t,r)=>{var n=r(4229);e.exports=n((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},9918:(e,t,r)=>{var n,i,o,s=r(9772),a=r(7400),c=r(9859),u=r(6733),l=r(5052),d=r(8270),h=r(1589),p=r(9821),f=r(5762),g=r(4768),m=r(6616),v=r(1321),y=r(7567),E=r(6540),_=r(95),S=r(1441),A=r(6407),I=A.enforce,O=A.get,b=c.Int8Array,T=b&&b.prototype,C=c.Uint8ClampedArray,w=C&&C.prototype,R=b&&y(b),P=T&&y(T),N=Object.prototype,D=c.TypeError,L=_("toStringTag"),x=S("TYPED_ARRAY_TAG"),k="TypedArrayConstructor",M=s&&!!E&&"Opera"!==h(c.opera),U=!1,j={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},H={BigInt64Array:8,BigUint64Array:8},F=function(e){var t=y(e);if(l(t)){var r=O(t);return r&&d(r,k)?r[k]:F(t)}},B=function(e){if(!l(e))return!1;var t=h(e);return d(j,t)||d(H,t)};for(n in j)(o=(i=c[n])&&i.prototype)?I(o)[k]=i:M=!1;for(n in H)(o=(i=c[n])&&i.prototype)&&(I(o)[k]=i);if((!M||!u(R)||R===Function.prototype)&&(R=function(){throw new D("Incorrect invocation")},M))for(n in j)c[n]&&E(c[n],R);if((!M||!P||P===N)&&(P=R.prototype,M))for(n in j)c[n]&&E(c[n].prototype,P);if(M&&y(w)!==P&&E(w,P),a&&!d(P,L))for(n in U=!0,m(P,L,{configurable:!0,get:function(){return l(this)?this[x]:void 0}}),j)c[n]&&f(c[n],x,n);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:M,TYPED_ARRAY_TAG:U&&x,aTypedArray:function(e){if(B(e))return e;throw new D("Target is not a typed array")},aTypedArrayConstructor:function(e){if(u(e)&&(!E||v(R,e)))return e;throw new D(p(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r,n){if(a){if(r)for(var i in j){var o=c[i];if(o&&d(o.prototype,e))try{delete o.prototype[e]}catch(r){try{o.prototype[e]=t}catch(e){}}}P[e]&&!r||g(P,e,r?t:M&&T[e]||t,n)}},exportTypedArrayStaticMethod:function(e,t,r){var n,i;if(a){if(E){if(r)for(n in j)if((i=c[n])&&d(i,e))try{delete i[e]}catch(e){}if(R[e]&&!r)return;try{return g(R,e,r?t:M&&R[e]||t)}catch(e){}}for(n in j)!(i=c[n])||i[e]&&!r||g(i,e,t)}},getTypedArrayConstructor:F,isView:function(e){if(!l(e))return!1;var t=h(e);return"DataView"===t||d(j,t)||d(H,t)},isTypedArray:B,TypedArray:R,TypedArrayPrototype:P}},3816:(e,t,r)=>{var n=r(9859),i=r(5968),o=r(7400),s=r(9772),a=r(1805),c=r(5762),u=r(6616),l=r(8312),d=r(4229),h=r(7728),p=r(3329),f=r(4237),g=r(7331),m=r(781),v=r(6201),y=r(7567),E=r(6540),_=r(8151).f,S=r(7065),A=r(9794),I=r(4555),O=r(6407),b=a.PROPER,T=a.CONFIGURABLE,C="ArrayBuffer",w="DataView",R="prototype",P="Wrong index",N=O.getterFor(C),D=O.getterFor(w),L=O.set,x=n[C],k=x,M=k&&k[R],U=n[w],j=U&&U[R],H=Object.prototype,F=n.Array,B=n.RangeError,q=i(S),V=i([].reverse),G=v.pack,z=v.unpack,$=function(e){return[255&e]},Y=function(e){return[255&e,e>>8&255]},W=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},K=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},X=function(e){return G(m(e),23,4)},Q=function(e){return G(e,52,8)},J=function(e,t,r){u(e[R],t,{configurable:!0,get:function(){return r(this)[t]}})},Z=function(e,t,r,n){var i=D(e),o=g(r),s=!!n;if(o+t>i.byteLength)throw new B(P);var a=i.bytes,c=o+i.byteOffset,u=A(a,c,c+t);return s?u:V(u)},ee=function(e,t,r,n,i,o){var s=D(e),a=g(r),c=n(+i),u=!!o;if(a+t>s.byteLength)throw new B(P);for(var l=s.bytes,d=a+s.byteOffset,h=0;h<t;h++)l[d+h]=c[u?h:t-h-1]};if(s){var te=b&&x.name!==C;if(d((function(){x(1)}))&&d((function(){new x(-1)}))&&!d((function(){return new x,new x(1.5),new x(NaN),1!==x.length||te&&!T})))te&&T&&c(x,"name",C);else{(k=function(e){return h(this,M),new x(g(e))})[R]=M;for(var re,ne=_(x),ie=0;ne.length>ie;)(re=ne[ie++])in k||c(k,re,x[re]);M.constructor=k}E&&y(j)!==H&&E(j,H);var oe=new U(new k(2)),se=i(j.setInt8);oe.setInt8(0,2147483648),oe.setInt8(1,2147483649),!oe.getInt8(0)&&oe.getInt8(1)||l(j,{setInt8:function(e,t){se(this,e,t<<24>>24)},setUint8:function(e,t){se(this,e,t<<24>>24)}},{unsafe:!0})}else M=(k=function(e){h(this,M);var t=g(e);L(this,{type:C,bytes:q(F(t),0),byteLength:t}),o||(this.byteLength=t,this.detached=!1)})[R],j=(U=function(e,t,r){h(this,j),h(e,M);var n=N(e),i=n.byteLength,s=p(t);if(s<0||s>i)throw new B("Wrong offset");if(s+(r=void 0===r?i-s:f(r))>i)throw new B("Wrong length");L(this,{type:w,buffer:e,byteLength:r,byteOffset:s,bytes:n.bytes}),o||(this.buffer=e,this.byteLength=r,this.byteOffset=s)})[R],o&&(J(k,"byteLength",N),J(U,"buffer",D),J(U,"byteLength",D),J(U,"byteOffset",D)),l(j,{getInt8:function(e){return Z(this,1,e)[0]<<24>>24},getUint8:function(e){return Z(this,1,e)[0]},getInt16:function(e){var t=Z(this,2,e,arguments.length>1&&arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Z(this,2,e,arguments.length>1&&arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return K(Z(this,4,e,arguments.length>1&&arguments[1]))},getUint32:function(e){return K(Z(this,4,e,arguments.length>1&&arguments[1]))>>>0},getFloat32:function(e){return z(Z(this,4,e,arguments.length>1&&arguments[1]),23)},getFloat64:function(e){return z(Z(this,8,e,arguments.length>1&&arguments[1]),52)},setInt8:function(e,t){ee(this,1,e,$,t)},setUint8:function(e,t){ee(this,1,e,$,t)},setInt16:function(e,t){ee(this,2,e,Y,t,arguments.length>2&&arguments[2])},setUint16:function(e,t){ee(this,2,e,Y,t,arguments.length>2&&arguments[2])},setInt32:function(e,t){ee(this,4,e,W,t,arguments.length>2&&arguments[2])},setUint32:function(e,t){ee(this,4,e,W,t,arguments.length>2&&arguments[2])},setFloat32:function(e,t){ee(this,4,e,X,t,arguments.length>2&&arguments[2])},setFloat64:function(e,t){ee(this,8,e,Q,t,arguments.length>2&&arguments[2])}});I(k,C),I(U,w),e.exports={ArrayBuffer:k,DataView:U}},7065:(e,t,r)=>{var n=r(2991),i=r(3231),o=r(9646);e.exports=function(e){for(var t=n(this),r=o(t),s=arguments.length,a=i(s>1?arguments[1]:void 0,r),c=s>2?arguments[2]:void 0,u=void 0===c?r:i(c,r);u>a;)t[a++]=e;return t}},6570:(e,t,r)=>{var n=r(9996).forEach,i=r(6038)("forEach");e.exports=i?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},9540:(e,t,r)=>{var n=r(905),i=r(3231),o=r(9646),s=function(e){return function(t,r,s){var a,c=n(t),u=o(c),l=i(s,u);if(e&&r!=r){for(;u>l;)if((a=c[l++])!=a)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},9996:(e,t,r)=>{var n=r(7636),i=r(5968),o=r(9337),s=r(2991),a=r(9646),c=r(7501),u=i([].push),l=function(e){var t=1===e,r=2===e,i=3===e,l=4===e,d=6===e,h=7===e,p=5===e||d;return function(f,g,m,v){for(var y,E,_=s(f),S=o(_),A=n(g,m),I=a(S),O=0,b=v||c,T=t?b(f,I):r||h?b(f,0):void 0;I>O;O++)if((p||O in S)&&(E=A(y=S[O],O,_),e))if(t)T[O]=E;else if(E)switch(e){case 3:return!0;case 5:return y;case 6:return O;case 2:u(T,y)}else switch(e){case 4:return!1;case 7:u(T,y)}return d?-1:i||l?l:T}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},6038:(e,t,r)=>{var n=r(4229);e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){return 1},1)}))}},3143:(e,t,r)=>{var n=r(7111),i=r(2991),o=r(9337),s=r(9646),a=TypeError,c=function(e){return function(t,r,c,u){n(r);var l=i(t),d=o(l),h=s(l),p=e?h-1:0,f=e?-1:1;if(c<2)for(;;){if(p in d){u=d[p],p+=f;break}if(p+=f,e?p<0:h<=p)throw new a("Reduce of empty array with no initial value")}for(;e?p>=0:h>p;p+=f)p in d&&(u=r(u,d[p],p,l));return u}};e.exports={left:c(!1),right:c(!0)}},9794:(e,t,r)=>{var n=r(3231),i=r(9646),o=r(2324),s=Array,a=Math.max;e.exports=function(e,t,r){for(var c=i(e),u=n(t,c),l=n(void 0===r?c:r,c),d=s(a(l-u,0)),h=0;u<l;u++,h++)o(d,h,e[u]);return d.length=h,d}},1909:(e,t,r)=>{var n=r(5968);e.exports=n([].slice)},3867:(e,t,r)=>{var n=r(9794),i=Math.floor,o=function(e,t){var r=e.length,c=i(r/2);return r<8?s(e,t):a(e,o(n(e,0,c),t),o(n(e,c),t),t)},s=function(e,t){for(var r,n,i=e.length,o=1;o<i;){for(n=o,r=e[o];n&&t(e[n-1],r)>0;)e[n]=e[--n];n!==o++&&(e[n]=r)}return e},a=function(e,t,r,n){for(var i=t.length,o=r.length,s=0,a=0;s<i||a<o;)e[s+a]=s<i&&a<o?n(t[s],r[a])<=0?t[s++]:r[a++]:s<i?t[s++]:r[a++];return e};e.exports=o},8760:(e,t,r)=>{var n=r(3718),i=r(2359),o=r(5052),s=r(95)("species"),a=Array;e.exports=function(e){var t;return n(e)&&(t=e.constructor,(i(t)&&(t===a||n(t.prototype))||o(t)&&null===(t=t[s]))&&(t=void 0)),void 0===t?a:t}},7501:(e,t,r)=>{var n=r(8760);e.exports=function(e,t){return new(n(e))(0===t?0:t)}},4575:(e,t,r)=>{var n=r(95)("iterator"),i=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){i=!0}};s[n]=function(){return this},Array.from(s,(function(){throw 2}))}catch(e){}e.exports=function(e,t){try{if(!t&&!i)return!1}catch(e){return!1}var r=!1;try{var o={};o[n]=function(){return{next:function(){return{done:r=!0}}}},e(o)}catch(e){}return r}},7079:(e,t,r)=>{var n=r(5968),i=n({}.toString),o=n("".slice);e.exports=function(e){return o(i(e),8,-1)}},1589:(e,t,r)=>{var n=r(1601),i=r(6733),o=r(7079),s=r(95)("toStringTag"),a=Object,c="Arguments"===o(function(){return arguments}());e.exports=n?o:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=a(e),s))?r:c?o(t):"Object"===(n=o(t))&&i(t.callee)?"Arguments":n}},3370:(e,t,r)=>{var n=r(5968),i=r(8312),o=r(5926).getWeakData,s=r(7728),a=r(1176),c=r(9650),u=r(5052),l=r(9003),d=r(9996),h=r(8270),p=r(6407),f=p.set,g=p.getterFor,m=d.find,v=d.findIndex,y=n([].splice),E=0,_=function(e){return e.frozen||(e.frozen=new S)},S=function(){this.entries=[]},A=function(e,t){return m(e.entries,(function(e){return e[0]===t}))};S.prototype={get:function(e){var t=A(this,e);if(t)return t[1]},has:function(e){return!!A(this,e)},set:function(e,t){var r=A(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=v(this.entries,(function(t){return t[0]===e}));return~t&&y(this.entries,t,1),!!~t}},e.exports={getConstructor:function(e,t,r,n){var d=e((function(e,i){s(e,p),f(e,{type:t,id:E++,frozen:void 0}),c(i)||l(i,e[n],{that:e,AS_ENTRIES:r})})),p=d.prototype,m=g(t),v=function(e,t,r){var n=m(e),i=o(a(t),!0);return!0===i?_(n).set(t,r):i[n.id]=r,e};return i(p,{delete:function(e){var t=m(this);if(!u(e))return!1;var r=o(e);return!0===r?_(t).delete(e):r&&h(r,t.id)&&delete r[t.id]},has:function(e){var t=m(this);if(!u(e))return!1;var r=o(e);return!0===r?_(t).has(e):r&&h(r,t.id)}}),i(p,r?{get:function(e){var t=m(this);if(u(e)){var r=o(e);return!0===r?_(t).get(e):r?r[t.id]:void 0}},set:function(e,t){return v(this,e,t)}}:{add:function(e){return v(this,e,!0)}}),d}}},9789:(e,t,r)=>{var n=r(3103),i=r(9859),o=r(5968),s=r(6541),a=r(4768),c=r(5926),u=r(9003),l=r(7728),d=r(6733),h=r(9650),p=r(5052),f=r(4229),g=r(4575),m=r(4555),v=r(835);e.exports=function(e,t,r){var y=-1!==e.indexOf("Map"),E=-1!==e.indexOf("Weak"),_=y?"set":"add",S=i[e],A=S&&S.prototype,I=S,O={},b=function(e){var t=o(A[e]);a(A,e,"add"===e?function(e){return t(this,0===e?0:e),this}:"delete"===e?function(e){return!(E&&!p(e))&&t(this,0===e?0:e)}:"get"===e?function(e){return E&&!p(e)?void 0:t(this,0===e?0:e)}:"has"===e?function(e){return!(E&&!p(e))&&t(this,0===e?0:e)}:function(e,r){return t(this,0===e?0:e,r),this})};if(s(e,!d(S)||!(E||A.forEach&&!f((function(){(new S).entries().next()})))))I=r.getConstructor(t,e,y,_),c.enable();else if(s(e,!0)){var T=new I,C=T[_](E?{}:-0,1)!==T,w=f((function(){T.has(1)})),R=g((function(e){new S(e)})),P=!E&&f((function(){for(var e=new S,t=5;t--;)e[_](t,t);return!e.has(-0)}));R||((I=t((function(e,t){l(e,A);var r=v(new S,e,I);return h(t)||u(t,r[_],{that:r,AS_ENTRIES:y}),r}))).prototype=A,A.constructor=I),(w||P)&&(b("delete"),b("has"),y&&b("get")),(P||C)&&b(_),E&&A.clear&&delete A.clear}return O[e]=I,n({global:!0,constructor:!0,forced:I!==S},O),m(I,e),E||r.setStrong(I,e,y),I}},7081:(e,t,r)=>{var n=r(8270),i=r(4826),o=r(7933),s=r(1787);e.exports=function(e,t,r){for(var a=i(t),c=s.f,u=o.f,l=0;l<a.length;l++){var d=a[l];n(e,d)||r&&n(r,d)||c(e,d,u(t,d))}}},8127:(e,t,r)=>{var n=r(95)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,"/./"[e](t)}catch(e){}}return!1}},7528:(e,t,r)=>{var n=r(4229);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},3684:e=>{e.exports=function(e,t){return{value:e,done:t}}},5762:(e,t,r)=>{var n=r(7400),i=r(1787),o=r(5358);e.exports=n?function(e,t,r){return i.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},5358:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},2324:(e,t,r)=>{var n=r(9310),i=r(1787),o=r(5358);e.exports=function(e,t,r){var s=n(t);s in e?i.f(e,s,o(0,r)):e[s]=r}},6616:(e,t,r)=>{var n=r(6039),i=r(1787);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),i.f(e,t,r)}},4768:(e,t,r)=>{var n=r(6733),i=r(1787),o=r(6039),s=r(8400);e.exports=function(e,t,r,a){a||(a={});var c=a.enumerable,u=void 0!==a.name?a.name:t;if(n(r)&&o(r,u,a),a.global)c?e[t]=r:s(t,r);else{try{a.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=r:i.f(e,t,{value:r,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},8312:(e,t,r)=>{var n=r(4768);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},8400:(e,t,r)=>{var n=r(9859),i=Object.defineProperty;e.exports=function(e,t){try{i(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},7400:(e,t,r)=>{var n=r(4229);e.exports=!n((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},3777:e=>{var t="object"==typeof document&&document.all,r=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:r}},2635:(e,t,r)=>{var n=r(9859),i=r(5052),o=n.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},5694:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8865:(e,t,r)=>{var n=r(2635)("span").classList,i=n&&n.constructor&&n.constructor.prototype;e.exports=i===Object.prototype?void 0:i},2671:(e,t,r)=>{var n=r(598).match(/firefox\/(\d+)/i);e.exports=!!n&&+n[1]},8506:(e,t,r)=>{var n=r(598);e.exports=/MSIE|Trident/.test(n)},8801:(e,t,r)=>{var n=r(9859),i=r(7079);e.exports="process"===i(n.process)},598:e=>{e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},6358:(e,t,r)=>{var n,i,o=r(9859),s=r(598),a=o.process,c=o.Deno,u=a&&a.versions||c&&c.version,l=u&&u.v8;l&&(i=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(i=+n[1]),e.exports=i},9811:(e,t,r)=>{var n=r(598).match(/AppleWebKit\/(\d+)\./);e.exports=!!n&&+n[1]},3837:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3103:(e,t,r)=>{var n=r(9859),i=r(7933).f,o=r(5762),s=r(4768),a=r(8400),c=r(7081),u=r(6541);e.exports=function(e,t){var r,l,d,h,p,f=e.target,g=e.global,m=e.stat;if(r=g?n:m?n[f]||a(f,{}):(n[f]||{}).prototype)for(l in t){if(h=t[l],d=e.dontCallGetSet?(p=i(r,l))&&p.value:r[l],!u(g?l:f+(m?".":"#")+l,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;c(h,d)}(e.sham||d&&d.sham)&&o(h,"sham",!0),s(r,l,h,e)}}},4229:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},4954:(e,t,r)=>{r(7950);var n=r(4745),i=r(4768),o=r(3466),s=r(4229),a=r(95),c=r(5762),u=a("species"),l=RegExp.prototype;e.exports=function(e,t,r,d){var h=a(e),p=!s((function(){var t={};return t[h]=function(){return 7},7!==""[e](t)})),f=p&&!s((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[u]=function(){return r},r.flags="",r[h]=/./[h]),r.exec=function(){return t=!0,null},r[h](""),!t}));if(!p||!f||r){var g=n(/./[h]),m=t(h,""[e],(function(e,t,r,i,s){var a=n(e),c=t.exec;return c===o||c===l.exec?p&&!s?{done:!0,value:g(t,r,i)}:{done:!0,value:a(r,t,i)}:{done:!1}}));i(String.prototype,e,m[0]),i(l,h,m[1])}d&&c(l[h],"sham",!0)}},8476:(e,t,r)=>{var n=r(4229);e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},3171:(e,t,r)=>{var n=r(7188),i=Function.prototype,o=i.apply,s=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?s.bind(o):function(){return s.apply(o,arguments)})},7636:(e,t,r)=>{var n=r(4745),i=r(7111),o=r(7188),s=n(n.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?s(e,t):function(){return e.apply(t,arguments)}}},7188:(e,t,r)=>{var n=r(4229);e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},266:(e,t,r)=>{var n=r(7188),i=Function.prototype.call;e.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},1805:(e,t,r)=>{var n=r(7400),i=r(8270),o=Function.prototype,s=n&&Object.getOwnPropertyDescriptor,a=i(o,"name"),c=a&&"something"===function(){}.name,u=a&&(!n||n&&s(o,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:u}},3411:(e,t,r)=>{var n=r(5968),i=r(7111);e.exports=function(e,t,r){try{return n(i(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},4745:(e,t,r)=>{var n=r(7079),i=r(5968);e.exports=function(e){if("Function"===n(e))return i(e)}},5968:(e,t,r)=>{var n=r(7188),i=Function.prototype,o=i.call,s=n&&i.bind.bind(o,o);e.exports=n?s:function(e){return function(){return o.apply(e,arguments)}}},1333:(e,t,r)=>{var n=r(9859),i=r(6733);e.exports=function(e,t){return arguments.length<2?(r=n[e],i(r)?r:void 0):n[e]&&n[e][t];var r}},8830:(e,t,r)=>{var n=r(1589),i=r(5300),o=r(9650),s=r(5495),a=r(95)("iterator");e.exports=function(e){if(!o(e))return i(e,a)||i(e,"@@iterator")||s[n(e)]}},8403:(e,t,r)=>{var n=r(266),i=r(7111),o=r(1176),s=r(9821),a=r(8830),c=TypeError;e.exports=function(e,t){var r=arguments.length<2?a(e):t;if(i(r))return o(n(r,e));throw new c(s(e)+" is not iterable")}},5300:(e,t,r)=>{var n=r(7111),i=r(9650);e.exports=function(e,t){var r=e[t];return i(r)?void 0:n(r)}},17:(e,t,r)=>{var n=r(5968),i=r(2991),o=Math.floor,s=n("".charAt),a=n("".replace),c=n("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,n,d,h){var p=r+e.length,f=n.length,g=l;return void 0!==d&&(d=i(d),g=u),a(h,g,(function(i,a){var u;switch(s(a,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,r);case"'":return c(t,p);case"<":u=d[c(a,1,-1)];break;default:var l=+a;if(0===l)return i;if(l>f){var h=o(l/10);return 0===h?i:h<=f?void 0===n[h-1]?s(a,1):n[h-1]+s(a,1):i}u=n[l-1]}return void 0===u?"":u}))}},9859:function(e,t,r){var n=function(e){return e&&e.Math===Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||this||Function("return this")()},8270:(e,t,r)=>{var n=r(5968),i=r(2991),o=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},5977:e=>{e.exports={}},8385:(e,t,r)=>{var n=r(1333);e.exports=n("document","documentElement")},4394:(e,t,r)=>{var n=r(7400),i=r(4229),o=r(2635);e.exports=!n&&!i((function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},6201:e=>{var t=Array,r=Math.abs,n=Math.pow,i=Math.floor,o=Math.log,s=Math.LN2;e.exports={pack:function(e,a,c){var u,l,d,h=t(c),p=8*c-a-1,f=(1<<p)-1,g=f>>1,m=23===a?n(2,-24)-n(2,-77):0,v=e<0||0===e&&1/e<0?1:0,y=0;for((e=r(e))!=e||e===1/0?(l=e!=e?1:0,u=f):(u=i(o(e)/s),e*(d=n(2,-u))<1&&(u--,d*=2),(e+=u+g>=1?m/d:m*n(2,1-g))*d>=2&&(u++,d/=2),u+g>=f?(l=0,u=f):u+g>=1?(l=(e*d-1)*n(2,a),u+=g):(l=e*n(2,g-1)*n(2,a),u=0));a>=8;)h[y++]=255&l,l/=256,a-=8;for(u=u<<a|l,p+=a;p>0;)h[y++]=255&u,u/=256,p-=8;return h[--y]|=128*v,h},unpack:function(e,t){var r,i=e.length,o=8*i-t-1,s=(1<<o)-1,a=s>>1,c=o-7,u=i-1,l=e[u--],d=127&l;for(l>>=7;c>0;)d=256*d+e[u--],c-=8;for(r=d&(1<<-c)-1,d>>=-c,c+=t;c>0;)r=256*r+e[u--],c-=8;if(0===d)d=1-a;else{if(d===s)return r?NaN:l?-1/0:1/0;r+=n(2,t),d-=a}return(l?-1:1)*r*n(2,d-t)}}},9337:(e,t,r)=>{var n=r(5968),i=r(4229),o=r(7079),s=Object,a=n("".split);e.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"===o(e)?a(e,""):s(e)}:s},835:(e,t,r)=>{var n=r(6733),i=r(5052),o=r(6540);e.exports=function(e,t,r){var s,a;return o&&n(s=t.constructor)&&s!==r&&i(a=s.prototype)&&a!==r.prototype&&o(e,a),e}},8511:(e,t,r)=>{var n=r(5968),i=r(6733),o=r(5353),s=n(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return s(e)}),e.exports=o.inspectSource},5926:(e,t,r)=>{var n=r(3103),i=r(5968),o=r(5977),s=r(5052),a=r(8270),c=r(1787).f,u=r(8151),l=r(166),d=r(5343),h=r(1441),p=r(8476),f=!1,g=h("meta"),m=0,v=function(e){c(e,g,{value:{objectID:"O"+m++,weakData:{}}})},y=e.exports={enable:function(){y.enable=function(){},f=!0;var e=u.f,t=i([].splice),r={};r[g]=1,e(r).length&&(u.f=function(r){for(var n=e(r),i=0,o=n.length;i<o;i++)if(n[i]===g){t(n,i,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},fastKey:function(e,t){if(!s(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,g)){if(!d(e))return"F";if(!t)return"E";v(e)}return e[g].objectID},getWeakData:function(e,t){if(!a(e,g)){if(!d(e))return!0;if(!t)return!1;v(e)}return e[g].weakData},onFreeze:function(e){return p&&f&&d(e)&&!a(e,g)&&v(e),e}};o[g]=!0},6407:(e,t,r)=>{var n,i,o,s=r(1180),a=r(9859),c=r(5052),u=r(5762),l=r(8270),d=r(5353),h=r(4399),p=r(5977),f="Object already initialized",g=a.TypeError,m=a.WeakMap;if(s||d.state){var v=d.state||(d.state=new m);v.get=v.get,v.has=v.has,v.set=v.set,n=function(e,t){if(v.has(e))throw new g(f);return t.facade=e,v.set(e,t),t},i=function(e){return v.get(e)||{}},o=function(e){return v.has(e)}}else{var y=h("state");p[y]=!0,n=function(e,t){if(l(e,y))throw new g(f);return t.facade=e,u(e,y,t),t},i=function(e){return l(e,y)?e[y]:{}},o=function(e){return l(e,y)}}e.exports={set:n,get:i,has:o,enforce:function(e){return o(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=i(t)).type!==e)throw new g("Incompatible receiver, "+e+" required");return r}}}},1943:(e,t,r)=>{var n=r(95),i=r(5495),o=n("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[o]===e)}},3718:(e,t,r)=>{var n=r(7079);e.exports=Array.isArray||function(e){return"Array"===n(e)}},9098:(e,t,r)=>{var n=r(1589);e.exports=function(e){var t=n(e);return"BigInt64Array"===t||"BigUint64Array"===t}},6733:(e,t,r)=>{var n=r(3777),i=n.all;e.exports=n.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},2359:(e,t,r)=>{var n=r(5968),i=r(4229),o=r(6733),s=r(1589),a=r(1333),c=r(8511),u=function(){},l=[],d=a("Reflect","construct"),h=/^\s*(?:class|function)\b/,p=n(h.exec),f=!h.test(u),g=function(e){if(!o(e))return!1;try{return d(u,l,e),!0}catch(e){return!1}},m=function(e){if(!o(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(h,c(e))}catch(e){return!0}};m.sham=!0,e.exports=!d||i((function(){var e;return g(g.call)||!g(Object)||!g((function(){e=!0}))||e}))?m:g},6541:(e,t,r)=>{var n=r(4229),i=r(6733),o=/#|\.prototype\./,s=function(e,t){var r=c[a(e)];return r===l||r!==u&&(i(t)?n(t):!!t)},a=s.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=s.data={},u=s.NATIVE="N",l=s.POLYFILL="P";e.exports=s},2292:(e,t,r)=>{var n=r(5052),i=Math.floor;e.exports=Number.isInteger||function(e){return!n(e)&&isFinite(e)&&i(e)===e}},9650:e=>{e.exports=function(e){return null==e}},5052:(e,t,r)=>{var n=r(6733),i=r(3777),o=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:n(e)||e===o}:function(e){return"object"==typeof e?null!==e:n(e)}},4231:e=>{e.exports=!1},8311:(e,t,r)=>{var n=r(5052),i=r(7079),o=r(95)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"===i(e))}},9395:(e,t,r)=>{var n=r(1333),i=r(6733),o=r(1321),s=r(6969),a=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return i(t)&&o(t.prototype,a(e))}},9003:(e,t,r)=>{var n=r(7636),i=r(266),o=r(1176),s=r(9821),a=r(1943),c=r(9646),u=r(1321),l=r(8403),d=r(8830),h=r(7281),p=TypeError,f=function(e,t){this.stopped=e,this.result=t},g=f.prototype;e.exports=function(e,t,r){var m,v,y,E,_,S,A,I=r&&r.that,O=!(!r||!r.AS_ENTRIES),b=!(!r||!r.IS_RECORD),T=!(!r||!r.IS_ITERATOR),C=!(!r||!r.INTERRUPTED),w=n(t,I),R=function(e){return m&&h(m,"normal",e),new f(!0,e)},P=function(e){return O?(o(e),C?w(e[0],e[1],R):w(e[0],e[1])):C?w(e,R):w(e)};if(b)m=e.iterator;else if(T)m=e;else{if(!(v=d(e)))throw new p(s(e)+" is not iterable");if(a(v)){for(y=0,E=c(e);E>y;y++)if((_=P(e[y]))&&u(g,_))return _;return new f(!1)}m=l(e,v)}for(S=b?e.next:m.next;!(A=i(S,m)).done;){try{_=P(A.value)}catch(e){h(m,"throw",e)}if("object"==typeof _&&_&&u(g,_))return _}return new f(!1)}},7281:(e,t,r)=>{var n=r(266),i=r(1176),o=r(5300);e.exports=function(e,t,r){var s,a;i(e);try{if(!(s=o(e,"return"))){if("throw"===t)throw r;return r}s=n(s,e)}catch(e){a=!0,s=e}if("throw"===t)throw r;if(a)throw s;return i(s),r}},2247:(e,t,r)=>{var n=r(693).IteratorPrototype,i=r(2391),o=r(5358),s=r(4555),a=r(5495),c=function(){return this};e.exports=function(e,t,r,u){var l=t+" Iterator";return e.prototype=i(n,{next:o(+!u,r)}),s(e,l,!1,!0),a[l]=c,e}},2707:(e,t,r)=>{var n=r(3103),i=r(266),o=r(4231),s=r(1805),a=r(6733),c=r(2247),u=r(7567),l=r(6540),d=r(4555),h=r(5762),p=r(4768),f=r(95),g=r(5495),m=r(693),v=s.PROPER,y=s.CONFIGURABLE,E=m.IteratorPrototype,_=m.BUGGY_SAFARI_ITERATORS,S=f("iterator"),A="keys",I="values",O="entries",b=function(){return this};e.exports=function(e,t,r,s,f,m,T){c(r,t,s);var C,w,R,P=function(e){if(e===f&&k)return k;if(!_&&e&&e in L)return L[e];switch(e){case A:case I:case O:return function(){return new r(this,e)}}return function(){return new r(this)}},N=t+" Iterator",D=!1,L=e.prototype,x=L[S]||L["@@iterator"]||f&&L[f],k=!_&&x||P(f),M="Array"===t&&L.entries||x;if(M&&(C=u(M.call(new e)))!==Object.prototype&&C.next&&(o||u(C)===E||(l?l(C,E):a(C[S])||p(C,S,b)),d(C,N,!0,!0),o&&(g[N]=b)),v&&f===I&&x&&x.name!==I&&(!o&&y?h(L,"name",I):(D=!0,k=function(){return i(x,this)})),f)if(w={values:P(I),keys:m?k:P(A),entries:P(O)},T)for(R in w)(_||D||!(R in L))&&p(L,R,w[R]);else n({target:t,proto:!0,forced:_||D},w);return o&&!T||L[S]===k||p(L,S,k,{name:f}),g[t]=k,w}},693:(e,t,r)=>{var n,i,o,s=r(4229),a=r(6733),c=r(5052),u=r(2391),l=r(7567),d=r(4768),h=r(95),p=r(4231),f=h("iterator"),g=!1;[].keys&&("next"in(o=[].keys())?(i=l(l(o)))!==Object.prototype&&(n=i):g=!0),!c(n)||s((function(){var e={};return n[f].call(e)!==e}))?n={}:p&&(n=u(n)),a(n[f])||d(n,f,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:g}},5495:e=>{e.exports={}},9646:(e,t,r)=>{var n=r(4237);e.exports=function(e){return n(e.length)}},6039:(e,t,r)=>{var n=r(5968),i=r(4229),o=r(6733),s=r(8270),a=r(7400),c=r(1805).CONFIGURABLE,u=r(8511),l=r(6407),d=l.enforce,h=l.get,p=String,f=Object.defineProperty,g=n("".slice),m=n("".replace),v=n([].join),y=a&&!i((function(){return 8!==f((function(){}),"length",{value:8}).length})),E=String(String).split("String"),_=e.exports=function(e,t,r){"Symbol("===g(p(t),0,7)&&(t="["+m(p(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!s(e,"name")||c&&e.name!==t)&&(a?f(e,"name",{value:t,configurable:!0}):e.name=t),y&&r&&s(r,"arity")&&e.length!==r.arity&&f(e,"length",{value:r.arity});try{r&&s(r,"constructor")&&r.constructor?a&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=d(e);return s(n,"source")||(n.source=v(E,"string"==typeof t?t:"")),e};Function.prototype.toString=_((function(){return o(this)&&h(this).source||u(this)}),"toString")},5510:(e,t,r)=>{var n=r(7235),i=Math.abs,o=2220446049250313e-31,s=1/o;e.exports=function(e,t,r,a){var c=+e,u=i(c),l=n(c);if(u<a)return l*function(e){return e+s-s}(u/a/t)*a*t;var d=(1+t/o)*u,h=d-(d-u);return h>r||h!=h?l*(1/0):l*h}},781:(e,t,r)=>{var n=r(5510);e.exports=Math.fround||function(e){return n(e,1.1920928955078125e-7,34028234663852886e22,11754943508222875e-54)}},7235:e=>{e.exports=Math.sign||function(e){var t=+e;return 0===t||t!=t?t:t<0?-1:1}},917:e=>{var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},7272:(e,t,r)=>{var n=r(8311),i=TypeError;e.exports=function(e){if(n(e))throw new i("The method doesn't accept regular expressions");return e}},5496:(e,t,r)=>{var n=r(9859),i=r(4229),o=r(5968),s=r(3326),a=r(1017).trim,c=r(1647),u=o("".charAt),l=n.parseFloat,d=n.Symbol,h=d&&d.iterator,p=1/l(c+"-0")!=-1/0||h&&!i((function(){l(Object(h))}));e.exports=p?function(e){var t=a(s(e)),r=l(t);return 0===r&&"-"===u(t,0)?-0:r}:l},47:(e,t,r)=>{var n=r(7400),i=r(5968),o=r(266),s=r(4229),a=r(5632),c=r(894),u=r(9195),l=r(2991),d=r(9337),h=Object.assign,p=Object.defineProperty,f=i([].concat);e.exports=!h||s((function(){if(n&&1!==h({b:1},h(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol("assign detection"),i="abcdefghijklmnopqrst";return e[r]=7,i.split("").forEach((function(e){t[e]=e})),7!==h({},e)[r]||a(h({},t)).join("")!==i}))?function(e,t){for(var r=l(e),i=arguments.length,s=1,h=c.f,p=u.f;i>s;)for(var g,m=d(arguments[s++]),v=h?f(a(m),h(m)):a(m),y=v.length,E=0;y>E;)g=v[E++],n&&!o(p,m,g)||(r[g]=m[g]);return r}:h},2391:(e,t,r)=>{var n,i=r(1176),o=r(219),s=r(3837),a=r(5977),c=r(8385),u=r(2635),l=r(4399),d="prototype",h="script",p=l("IE_PROTO"),f=function(){},g=function(e){return"<"+h+">"+e+"</"+h+">"},m=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},v=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;v="undefined"!=typeof document?document.domain&&n?m(n):(t=u("iframe"),r="java"+h+":",t.style.display="none",c.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(g("document.F=Object")),e.close(),e.F):m(n);for(var i=s.length;i--;)delete v[d][s[i]];return v()};a[p]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(f[d]=i(e),r=new f,f[d]=null,r[p]=e):r=v(),void 0===t?r:o.f(r,t)}},219:(e,t,r)=>{var n=r(7400),i=r(7137),o=r(1787),s=r(1176),a=r(905),c=r(5632);t.f=n&&!i?Object.defineProperties:function(e,t){s(e);for(var r,n=a(t),i=c(t),u=i.length,l=0;u>l;)o.f(e,r=i[l++],n[r]);return e}},1787:(e,t,r)=>{var n=r(7400),i=r(4394),o=r(7137),s=r(1176),a=r(9310),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",p="writable";t.f=n?o?function(e,t,r){if(s(e),t=a(t),s(r),"function"==typeof e&&"prototype"===t&&"value"in r&&p in r&&!r[p]){var n=l(e,t);n&&n[p]&&(e[t]=r.value,r={configurable:h in r?r[h]:n[h],enumerable:d in r?r[d]:n[d],writable:!1})}return u(e,t,r)}:u:function(e,t,r){if(s(e),t=a(t),s(r),i)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw new c("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},7933:(e,t,r)=>{var n=r(7400),i=r(266),o=r(9195),s=r(5358),a=r(905),c=r(9310),u=r(8270),l=r(4394),d=Object.getOwnPropertyDescriptor;t.f=n?d:function(e,t){if(e=a(e),t=c(t),l)try{return d(e,t)}catch(e){}if(u(e,t))return s(!i(o.f,e,t),e[t])}},166:(e,t,r)=>{var n=r(7079),i=r(905),o=r(8151).f,s=r(9794),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"Window"===n(e)?function(e){try{return o(e)}catch(e){return s(a)}}(e):o(i(e))}},8151:(e,t,r)=>{var n=r(140),i=r(3837).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},894:(e,t)=>{t.f=Object.getOwnPropertySymbols},7567:(e,t,r)=>{var n=r(8270),i=r(6733),o=r(2991),s=r(4399),a=r(7528),c=s("IE_PROTO"),u=Object,l=u.prototype;e.exports=a?u.getPrototypeOf:function(e){var t=o(e);if(n(t,c))return t[c];var r=t.constructor;return i(r)&&t instanceof r?r.prototype:t instanceof u?l:null}},5343:(e,t,r)=>{var n=r(4229),i=r(5052),o=r(7079),s=r(2460),a=Object.isExtensible,c=n((function(){a(1)}));e.exports=c||s?function(e){return!!i(e)&&(!s||"ArrayBuffer"!==o(e))&&(!a||a(e))}:a},1321:(e,t,r)=>{var n=r(5968);e.exports=n({}.isPrototypeOf)},140:(e,t,r)=>{var n=r(5968),i=r(8270),o=r(905),s=r(9540).indexOf,a=r(5977),c=n([].push);e.exports=function(e,t){var r,n=o(e),u=0,l=[];for(r in n)!i(a,r)&&i(n,r)&&c(l,r);for(;t.length>u;)i(n,r=t[u++])&&(~s(l,r)||c(l,r));return l}},5632:(e,t,r)=>{var n=r(140),i=r(3837);e.exports=Object.keys||function(e){return n(e,i)}},9195:(e,t)=>{var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);t.f=i?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},6540:(e,t,r)=>{var n=r(3411),i=r(1176),o=r(8505);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=n(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return i(r),o(n),t?e(r,n):r.__proto__=n,r}}():void 0)},7664:(e,t,r)=>{var n=r(7400),i=r(4229),o=r(5968),s=r(7567),a=r(5632),c=r(905),u=o(r(9195).f),l=o([].push),d=n&&i((function(){var e=Object.create(null);return e[2]=2,!u(e,2)})),h=function(e){return function(t){for(var r,i=c(t),o=a(i),h=d&&null===s(i),p=o.length,f=0,g=[];p>f;)r=o[f++],n&&!(h?r in i:u(i,r))||l(g,e?[r,i[r]]:i[r]);return g}};e.exports={entries:h(!0),values:h(!1)}},2914:(e,t,r)=>{var n=r(266),i=r(6733),o=r(5052),s=TypeError;e.exports=function(e,t){var r,a;if("string"===t&&i(r=e.toString)&&!o(a=n(r,e)))return a;if(i(r=e.valueOf)&&!o(a=n(r,e)))return a;if("string"!==t&&i(r=e.toString)&&!o(a=n(r,e)))return a;throw new s("Can't convert object to primitive value")}},4826:(e,t,r)=>{var n=r(1333),i=r(5968),o=r(8151),s=r(894),a=r(1176),c=i([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(a(e)),r=s.f;return r?c(t,r(e)):t}},6060:(e,t,r)=>{var n=r(1787).f;e.exports=function(e,t,r){r in e||n(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})}},8115:(e,t,r)=>{var n=r(266),i=r(1176),o=r(6733),s=r(7079),a=r(3466),c=TypeError;e.exports=function(e,t){var r=e.exec;if(o(r)){var u=n(r,e,t);return null!==u&&i(u),u}if("RegExp"===s(e))return n(a,e,t);throw new c("RegExp#exec called on incompatible receiver")}},3466:(e,t,r)=>{var n,i,o=r(266),s=r(5968),a=r(3326),c=r(895),u=r(5650),l=r(3036),d=r(2391),h=r(6407).get,p=r(2926),f=r(461),g=l("native-string-replace",String.prototype.replace),m=RegExp.prototype.exec,v=m,y=s("".charAt),E=s("".indexOf),_=s("".replace),S=s("".slice),A=(i=/b*/g,o(m,n=/a/,"a"),o(m,i,"a"),0!==n.lastIndex||0!==i.lastIndex),I=u.BROKEN_CARET,O=void 0!==/()??/.exec("")[1];(A||O||I||p||f)&&(v=function(e){var t,r,n,i,s,u,l,p=this,f=h(p),b=a(e),T=f.raw;if(T)return T.lastIndex=p.lastIndex,t=o(v,T,b),p.lastIndex=T.lastIndex,t;var C=f.groups,w=I&&p.sticky,R=o(c,p),P=p.source,N=0,D=b;if(w&&(R=_(R,"y",""),-1===E(R,"g")&&(R+="g"),D=S(b,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==y(b,p.lastIndex-1))&&(P="(?: "+P+")",D=" "+D,N++),r=new RegExp("^(?:"+P+")",R)),O&&(r=new RegExp("^"+P+"$(?!\\s)",R)),A&&(n=p.lastIndex),i=o(m,w?r:p,D),w?i?(i.input=S(i.input,N),i[0]=S(i[0],N),i.index=p.lastIndex,p.lastIndex+=i[0].length):p.lastIndex=0:A&&i&&(p.lastIndex=p.global?i.index+i[0].length:n),O&&i&&i.length>1&&o(g,i[0],r,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i&&C)for(i.groups=u=d(null),s=0;s<C.length;s++)u[(l=C[s])[0]]=i[l[1]];return i}),e.exports=v},895:(e,t,r)=>{var n=r(1176);e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},3349:(e,t,r)=>{var n=r(266),i=r(8270),o=r(1321),s=r(895),a=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in a||i(e,"flags")||!o(a,e)?t:n(s,e)}},5650:(e,t,r)=>{var n=r(4229),i=r(9859).RegExp,o=n((function(){var e=i("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),s=o||n((function(){return!i("a","y").sticky})),a=o||n((function(){var e=i("^r","gy");return e.lastIndex=2,null!==e.exec("str")}));e.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:o}},2926:(e,t,r)=>{var n=r(4229),i=r(9859).RegExp;e.exports=n((function(){var e=i(".","s");return!(e.dotAll&&e.test("\n")&&"s"===e.flags)}))},461:(e,t,r)=>{var n=r(4229),i=r(9859).RegExp;e.exports=n((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},8885:(e,t,r)=>{var n=r(9650),i=TypeError;e.exports=function(e){if(n(e))throw new i("Can't call method on "+e);return e}},2101:e=>{e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},1832:(e,t,r)=>{var n=r(1333),i=r(6616),o=r(95),s=r(7400),a=o("species");e.exports=function(e){var t=n(e);s&&t&&!t[a]&&i(t,a,{configurable:!0,get:function(){return this}})}},4555:(e,t,r)=>{var n=r(1787).f,i=r(8270),o=r(95)("toStringTag");e.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!i(e,o)&&n(e,o,{configurable:!0,value:t})}},4399:(e,t,r)=>{var n=r(3036),i=r(1441),o=n("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},5353:(e,t,r)=>{var n=r(9859),i=r(8400),o="__core-js_shared__",s=n[o]||i(o,{});e.exports=s},3036:(e,t,r)=>{var n=r(4231),i=r(5353);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.33.0",mode:n?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},7942:(e,t,r)=>{var n=r(1176),i=r(7988),o=r(9650),s=r(95)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||o(r=n(a)[s])?t:i(r)}},966:(e,t,r)=>{var n=r(5968),i=r(3329),o=r(3326),s=r(8885),a=n("".charAt),c=n("".charCodeAt),u=n("".slice),l=function(e){return function(t,r){var n,l,d=o(s(t)),h=i(r),p=d.length;return h<0||h>=p?e?"":void 0:(n=c(d,h))<55296||n>56319||h+1===p||(l=c(d,h+1))<56320||l>57343?e?a(d,h):n:e?u(d,h,h+2):l-56320+(n-55296<<10)+65536}};e.exports={codeAt:l(!1),charAt:l(!0)}},7456:(e,t,r)=>{var n=r(598);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(n)},6650:(e,t,r)=>{var n=r(5968),i=r(4237),o=r(3326),s=r(3124),a=r(8885),c=n(s),u=n("".slice),l=Math.ceil,d=function(e){return function(t,r,n){var s,d,h=o(a(t)),p=i(r),f=h.length,g=void 0===n?" ":o(n);return p<=f||""===g?h:((d=c(g,l((s=p-f)/g.length))).length>s&&(d=u(d,0,s)),e?h+d:d+h)}};e.exports={start:d(!1),end:d(!0)}},3124:(e,t,r)=>{var n=r(3329),i=r(3326),o=r(8885),s=RangeError;e.exports=function(e){var t=i(o(this)),r="",a=n(e);if(a<0||a===1/0)throw new s("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(r+=t);return r}},9445:(e,t,r)=>{var n=r(1805).PROPER,i=r(4229),o=r(1647);e.exports=function(e){return i((function(){return!!o[e]()||"​᠎"!=="​᠎"[e]()||n&&o[e].name!==e}))}},1017:(e,t,r)=>{var n=r(5968),i=r(8885),o=r(3326),s=r(1647),a=n("".replace),c=RegExp("^["+s+"]+"),u=RegExp("(^|[^"+s+"])["+s+"]+$"),l=function(e){return function(t){var r=o(i(t));return 1&e&&(r=a(r,c,"")),2&e&&(r=a(r,u,"$1")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},4860:(e,t,r)=>{var n=r(6358),i=r(4229),o=r(9859).String;e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol("symbol detection");return!o(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},143:(e,t,r)=>{var n=r(5968);e.exports=n(1..valueOf)},3231:(e,t,r)=>{var n=r(3329),i=Math.max,o=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):o(r,t)}},9123:(e,t,r)=>{var n=r(2066),i=TypeError;e.exports=function(e){var t=n(e,"number");if("number"==typeof t)throw new i("Can't convert number to bigint");return BigInt(t)}},7331:(e,t,r)=>{var n=r(3329),i=r(4237),o=RangeError;e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=i(t);if(t!==r)throw new o("Wrong length or index");return r}},905:(e,t,r)=>{var n=r(9337),i=r(8885);e.exports=function(e){return n(i(e))}},3329:(e,t,r)=>{var n=r(917);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},4237:(e,t,r)=>{var n=r(3329),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},2991:(e,t,r)=>{var n=r(8885),i=Object;e.exports=function(e){return i(n(e))}},4262:(e,t,r)=>{var n=r(2002),i=RangeError;e.exports=function(e,t){var r=n(e);if(r%t)throw new i("Wrong offset");return r}},2002:(e,t,r)=>{var n=r(3329),i=RangeError;e.exports=function(e){var t=n(e);if(t<0)throw new i("The argument can't be less than 0");return t}},2066:(e,t,r)=>{var n=r(266),i=r(5052),o=r(9395),s=r(5300),a=r(2914),c=r(95),u=TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var r,c=s(e,l);if(c){if(void 0===t&&(t="default"),r=n(c,e,t),!i(r)||o(r))return r;throw new u("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},9310:(e,t,r)=>{var n=r(2066),i=r(9395);e.exports=function(e){var t=n(e,"string");return i(t)?t:t+""}},1601:(e,t,r)=>{var n={};n[r(95)("toStringTag")]="z",e.exports="[object z]"===String(n)},3326:(e,t,r)=>{var n=r(1589),i=String;e.exports=function(e){if("Symbol"===n(e))throw new TypeError("Cannot convert a Symbol value to a string");return i(e)}},6045:e=>{var t=Math.round;e.exports=function(e){var r=t(e);return r<0?0:r>255?255:255&r}},9821:e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},2574:(e,t,r)=>{var n=r(3103),i=r(9859),o=r(266),s=r(7400),a=r(8200),c=r(9918),u=r(3816),l=r(7728),d=r(5358),h=r(5762),p=r(2292),f=r(4237),g=r(7331),m=r(4262),v=r(6045),y=r(9310),E=r(8270),_=r(1589),S=r(5052),A=r(9395),I=r(2391),O=r(1321),b=r(6540),T=r(8151).f,C=r(5215),w=r(9996).forEach,R=r(1832),P=r(6616),N=r(1787),D=r(7933),L=r(6407),x=r(835),k=L.get,M=L.set,U=L.enforce,j=N.f,H=D.f,F=i.RangeError,B=u.ArrayBuffer,q=B.prototype,V=u.DataView,G=c.NATIVE_ARRAY_BUFFER_VIEWS,z=c.TYPED_ARRAY_TAG,$=c.TypedArray,Y=c.TypedArrayPrototype,W=c.aTypedArrayConstructor,K=c.isTypedArray,X="BYTES_PER_ELEMENT",Q="Wrong length",J=function(e,t){W(e);for(var r=0,n=t.length,i=new e(n);n>r;)i[r]=t[r++];return i},Z=function(e,t){P(e,t,{configurable:!0,get:function(){return k(this)[t]}})},ee=function(e){var t;return O(q,e)||"ArrayBuffer"===(t=_(e))||"SharedArrayBuffer"===t},te=function(e,t){return K(e)&&!A(t)&&t in e&&p(+t)&&t>=0},re=function(e,t){return t=y(t),te(e,t)?d(2,e[t]):H(e,t)},ne=function(e,t,r){return t=y(t),!(te(e,t)&&S(r)&&E(r,"value"))||E(r,"get")||E(r,"set")||r.configurable||E(r,"writable")&&!r.writable||E(r,"enumerable")&&!r.enumerable?j(e,t,r):(e[t]=r.value,e)};s?(G||(D.f=re,N.f=ne,Z(Y,"buffer"),Z(Y,"byteOffset"),Z(Y,"byteLength"),Z(Y,"length")),n({target:"Object",stat:!0,forced:!G},{getOwnPropertyDescriptor:re,defineProperty:ne}),e.exports=function(e,t,r){var s=e.match(/\d+/)[0]/8,c=e+(r?"Clamped":"")+"Array",u="get"+e,d="set"+e,p=i[c],y=p,E=y&&y.prototype,_={},A=function(e,t){j(e,t,{get:function(){return function(e,t){var r=k(e);return r.view[u](t*s+r.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,n){var i=k(e);i.view[d](t*s+i.byteOffset,r?v(n):n,!0)}(this,t,e)},enumerable:!0})};G?a&&(y=t((function(e,t,r,n){return l(e,E),x(S(t)?ee(t)?void 0!==n?new p(t,m(r,s),n):void 0!==r?new p(t,m(r,s)):new p(t):K(t)?J(y,t):o(C,y,t):new p(g(t)),e,y)})),b&&b(y,$),w(T(p),(function(e){e in y||h(y,e,p[e])})),y.prototype=E):(y=t((function(e,t,r,n){l(e,E);var i,a,c,u=0,d=0;if(S(t)){if(!ee(t))return K(t)?J(y,t):o(C,y,t);i=t,d=m(r,s);var h=t.byteLength;if(void 0===n){if(h%s)throw new F(Q);if((a=h-d)<0)throw new F(Q)}else if((a=f(n)*s)+d>h)throw new F(Q);c=a/s}else c=g(t),i=new B(a=c*s);for(M(e,{buffer:i,byteOffset:d,byteLength:a,length:c,view:new V(i)});u<c;)A(e,u++)})),b&&b(y,$),E=y.prototype=I(Y)),E.constructor!==y&&h(E,"constructor",y),U(E).TypedArrayConstructor=y,z&&h(E,z,c);var O=y!==p;_[c]=y,n({global:!0,constructor:!0,forced:O,sham:!G},_),X in y||h(y,X,s),X in E||h(E,X,s),R(c)}):e.exports=function(){}},8200:(e,t,r)=>{var n=r(9859),i=r(4229),o=r(4575),s=r(9918).NATIVE_ARRAY_BUFFER_VIEWS,a=n.ArrayBuffer,c=n.Int8Array;e.exports=!s||!i((function(){c(1)}))||!i((function(){new c(-1)}))||!o((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||i((function(){return 1!==new c(new a(2),1,void 0).length}))},5215:(e,t,r)=>{var n=r(7636),i=r(266),o=r(7988),s=r(2991),a=r(9646),c=r(8403),u=r(8830),l=r(1943),d=r(9098),h=r(9918).aTypedArrayConstructor,p=r(9123);e.exports=function(e){var t,r,f,g,m,v,y,E,_=o(this),S=s(e),A=arguments.length,I=A>1?arguments[1]:void 0,O=void 0!==I,b=u(S);if(b&&!l(b))for(E=(y=c(S,b)).next,S=[];!(v=i(E,y)).done;)S.push(v.value);for(O&&A>2&&(I=n(I,arguments[2])),r=a(S),f=new(h(_))(r),g=d(f),t=0;r>t;t++)m=O?I(S[t],t):S[t],f[t]=g?p(m):+m;return f}},1441:(e,t,r)=>{var n=r(5968),i=0,o=Math.random(),s=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++i+o,36)}},6969:(e,t,r)=>{var n=r(4860);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},7137:(e,t,r)=>{var n=r(7400),i=r(4229);e.exports=n&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},1180:(e,t,r)=>{var n=r(9859),i=r(6733),o=n.WeakMap;e.exports=i(o)&&/native code/.test(String(o))},95:(e,t,r)=>{var n=r(9859),i=r(3036),o=r(8270),s=r(1441),a=r(4860),c=r(6969),u=n.Symbol,l=i("wks"),d=c?u.for||u:u&&u.withoutSetter||s;e.exports=function(e){return o(l,e)||(l[e]=a&&o(u,e)?u[e]:d("Symbol."+e)),l[e]}},1647:e=>{e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},2994:(e,t,r)=>{var n=r(3103),i=r(4745),o=r(4229),s=r(3816),a=r(1176),c=r(3231),u=r(4237),l=r(7942),d=s.ArrayBuffer,h=s.DataView,p=h.prototype,f=i(d.prototype.slice),g=i(p.getUint8),m=i(p.setUint8);n({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:o((function(){return!new d(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(f&&void 0===t)return f(a(this),e);for(var r=a(this).byteLength,n=c(e,r),i=c(void 0===t?r:t,r),o=new(l(this,d))(u(i-n)),s=new h(this),p=new h(o),v=0;n<i;)m(p,v++,g(s,n++));return o}})},9529:(e,t,r)=>{var n=r(3103),i=r(9540).includes,o=r(4229),s=r(9736);n({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},5735:(e,t,r)=>{var n=r(905),i=r(9736),o=r(5495),s=r(6407),a=r(1787).f,c=r(2707),u=r(3684),l=r(4231),d=r(7400),h="Array Iterator",p=s.set,f=s.getterFor(h);e.exports=c(Array,"Array",(function(e,t){p(this,{type:h,target:n(e),index:0,kind:t})}),(function(){var e=f(this),t=e.target,r=e.kind,n=e.index++;if(!t||n>=t.length)return e.target=void 0,u(void 0,!0);switch(r){case"keys":return u(n,!1);case"values":return u(t[n],!1)}return u([n,t[n]],!1)}),"values");var g=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!l&&d&&"values"!==g.name)try{a(g,"name",{value:"values"})}catch(e){}},3108:(e,t,r)=>{var n=r(3103),i=r(3143).left,o=r(6038),s=r(6358);n({target:"Array",proto:!0,forced:!r(8801)&&s>79&&s<83||!o("reduce")},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},8836:(e,t,r)=>{var n=r(3103),i=r(5496);n({target:"Number",stat:!0,forced:Number.parseFloat!==i},{parseFloat:i})},1657:(e,t,r)=>{var n=r(3103),i=r(5968),o=r(3329),s=r(143),a=r(3124),c=r(4229),u=RangeError,l=String,d=Math.floor,h=i(a),p=i("".slice),f=i(1..toFixed),g=function(e,t,r){return 0===t?r:t%2==1?g(e,t-1,r*e):g(e*e,t/2,r)},m=function(e,t,r){for(var n=-1,i=r;++n<6;)i+=t*e[n],e[n]=i%1e7,i=d(i/1e7)},v=function(e,t){for(var r=6,n=0;--r>=0;)n+=e[r],e[r]=d(n/t),n=n%t*1e7},y=function(e){for(var t=6,r="";--t>=0;)if(""!==r||0===t||0!==e[t]){var n=l(e[t]);r=""===r?n:r+h("0",7-n.length)+n}return r};n({target:"Number",proto:!0,forced:c((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!c((function(){f({})}))},{toFixed:function(e){var t,r,n,i,a=s(this),c=o(e),d=[0,0,0,0,0,0],f="",E="0";if(c<0||c>20)throw new u("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return l(a);if(a<0&&(f="-",a=-a),a>1e-21)if(r=(t=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t}(a*g(2,69,1))-69)<0?a*g(2,-t,1):a/g(2,t,1),r*=4503599627370496,(t=52-t)>0){for(m(d,0,r),n=c;n>=7;)m(d,1e7,0),n-=7;for(m(d,g(10,n,1),0),n=t-1;n>=23;)v(d,1<<23),n-=23;v(d,1<<n),m(d,1,1),v(d,2),E=y(d)}else m(d,0,r),m(d,1<<-t,0),E=y(d)+h("0",c);return c>0?f+((i=E.length)<=c?"0."+h("0",c-i)+E:p(E,0,i-c)+"."+p(E,i-c)):f+E}})},3105:(e,t,r)=>{var n=r(3103),i=r(47);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==i},{assign:i})},5883:(e,t,r)=>{var n=r(3103),i=r(7664).entries;n({target:"Object",stat:!0},{entries:function(e){return i(e)}})},1804:(e,t,r)=>{var n=r(3103),i=r(9003),o=r(2324);n({target:"Object",stat:!0},{fromEntries:function(e){var t={};return i(e,(function(e,r){o(t,e,r)}),{AS_ENTRIES:!0}),t}})},7890:(e,t,r)=>{var n=r(3103),i=r(7664).values;n({target:"Object",stat:!0},{values:function(e){return i(e)}})},7368:(e,t,r)=>{var n=r(7400),i=r(9859),o=r(5968),s=r(6541),a=r(835),c=r(5762),u=r(8151).f,l=r(1321),d=r(8311),h=r(3326),p=r(3349),f=r(5650),g=r(6060),m=r(4768),v=r(4229),y=r(8270),E=r(6407).enforce,_=r(1832),S=r(95),A=r(2926),I=r(461),O=S("match"),b=i.RegExp,T=b.prototype,C=i.SyntaxError,w=o(T.exec),R=o("".charAt),P=o("".replace),N=o("".indexOf),D=o("".slice),L=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,x=/a/g,k=/a/g,M=new b(x)!==x,U=f.MISSED_STICKY,j=f.UNSUPPORTED_Y;if(s("RegExp",n&&(!M||U||A||I||v((function(){return k[O]=!1,b(x)!==x||b(k)===k||"/a/i"!==String(b(x,"i"))}))))){for(var H=function(e,t){var r,n,i,o,s,u,f=l(T,this),g=d(e),m=void 0===t,v=[],_=e;if(!f&&g&&m&&e.constructor===H)return e;if((g||l(T,e))&&(e=e.source,m&&(t=p(_))),e=void 0===e?"":h(e),t=void 0===t?"":h(t),_=e,A&&"dotAll"in x&&(n=!!t&&N(t,"s")>-1)&&(t=P(t,/s/g,"")),r=t,U&&"sticky"in x&&(i=!!t&&N(t,"y")>-1)&&j&&(t=P(t,/y/g,"")),I&&(o=function(e){for(var t,r=e.length,n=0,i="",o=[],s={},a=!1,c=!1,u=0,l="";n<=r;n++){if("\\"===(t=R(e,n)))t+=R(e,++n);else if("]"===t)a=!1;else if(!a)switch(!0){case"["===t:a=!0;break;case"("===t:w(L,D(e,n+1))&&(n+=2,c=!0),i+=t,u++;continue;case">"===t&&c:if(""===l||y(s,l))throw new C("Invalid capture group name");s[l]=!0,o[o.length]=[l,u],c=!1,l="";continue}c?l+=t:i+=t}return[i,o]}(e),e=o[0],v=o[1]),s=a(b(e,t),f?this:T,H),(n||i||v.length)&&(u=E(s),n&&(u.dotAll=!0,u.raw=H(function(e){for(var t,r=e.length,n=0,i="",o=!1;n<=r;n++)"\\"!==(t=R(e,n))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+R(e,++n);return i}(e),r)),i&&(u.sticky=!0),v.length&&(u.groups=v)),e!==_)try{c(s,"source",""===_?"(?:)":_)}catch(e){}return s},F=u(b),B=0;F.length>B;)g(H,b,F[B++]);T.constructor=H,H.prototype=T,m(i,"RegExp",H,{constructor:!0})}_("RegExp")},7950:(e,t,r)=>{var n=r(3103),i=r(3466);n({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},8233:(e,t,r)=>{var n=r(1805).PROPER,i=r(4768),o=r(1176),s=r(3326),a=r(4229),c=r(3349),u="toString",l=RegExp.prototype[u],d=a((function(){return"/a/b"!==l.call({source:"a",flags:"b"})})),h=n&&l.name!==u;(d||h)&&i(RegExp.prototype,u,(function(){var e=o(this);return"/"+s(e.source)+"/"+s(c(e))}),{unsafe:!0})},6708:(e,t,r)=>{var n,i=r(3103),o=r(4745),s=r(7933).f,a=r(4237),c=r(3326),u=r(7272),l=r(8885),d=r(8127),h=r(4231),p=o("".endsWith),f=o("".slice),g=Math.min,m=d("endsWith");i({target:"String",proto:!0,forced:!(!h&&!m&&(n=s(String.prototype,"endsWith"),n&&!n.writable)||m)},{endsWith:function(e){var t=c(l(this));u(e);var r=arguments.length>1?arguments[1]:void 0,n=t.length,i=void 0===r?n:g(a(r),n),o=c(e);return p?p(t,o,i):f(t,i-o.length,i)===o}})},1235:(e,t,r)=>{var n=r(3103),i=r(5968),o=r(7272),s=r(8885),a=r(3326),c=r(8127),u=i("".indexOf);n({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~u(a(s(this)),a(o(e)),arguments.length>1?arguments[1]:void 0)}})},4069:(e,t,r)=>{var n=r(266),i=r(4954),o=r(1176),s=r(9650),a=r(4237),c=r(3326),u=r(8885),l=r(5300),d=r(6637),h=r(8115);i("match",(function(e,t,r){return[function(t){var r=u(this),i=s(t)?void 0:l(t,e);return i?n(i,t,r):new RegExp(t)[e](c(r))},function(e){var n=o(this),i=c(e),s=r(t,n,i);if(s.done)return s.value;if(!n.global)return h(n,i);var u=n.unicode;n.lastIndex=0;for(var l,p=[],f=0;null!==(l=h(n,i));){var g=c(l[0]);p[f]=g,""===g&&(n.lastIndex=d(i,a(n.lastIndex),u)),f++}return 0===f?null:p}]}))},5734:(e,t,r)=>{var n=r(3103),i=r(6650).start;n({target:"String",proto:!0,forced:r(7456)},{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},5940:(e,t,r)=>{var n=r(3171),i=r(266),o=r(5968),s=r(4954),a=r(4229),c=r(1176),u=r(6733),l=r(9650),d=r(3329),h=r(4237),p=r(3326),f=r(8885),g=r(6637),m=r(5300),v=r(17),y=r(8115),E=r(95)("replace"),_=Math.max,S=Math.min,A=o([].concat),I=o([].push),O=o("".indexOf),b=o("".slice),T="$0"==="a".replace(/./,"$0"),C=!!/./[E]&&""===/./[E]("a","$0");s("replace",(function(e,t,r){var o=C?"$":"$0";return[function(e,r){var n=f(this),o=l(e)?void 0:m(e,E);return o?i(o,e,n,r):i(t,p(n),e,r)},function(e,i){var s=c(this),a=p(e);if("string"==typeof i&&-1===O(i,o)&&-1===O(i,"$<")){var l=r(t,s,a,i);if(l.done)return l.value}var f=u(i);f||(i=p(i));var m,E=s.global;E&&(m=s.unicode,s.lastIndex=0);for(var T,C=[];null!==(T=y(s,a))&&(I(C,T),E);)""===p(T[0])&&(s.lastIndex=g(a,h(s.lastIndex),m));for(var w,R="",P=0,N=0;N<C.length;N++){for(var D,L=p((T=C[N])[0]),x=_(S(d(T.index),a.length),0),k=[],M=1;M<T.length;M++)I(k,void 0===(w=T[M])?w:String(w));var U=T.groups;if(f){var j=A([L],k,x,a);void 0!==U&&I(j,U),D=p(n(i,void 0,j))}else D=v(L,a,x,k,U,i);x>=P&&(R+=b(a,P,x)+D,P=x+L.length)}return R+b(a,P)}]}),!!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!T||C)},4908:(e,t,r)=>{var n=r(266),i=r(4954),o=r(1176),s=r(9650),a=r(8885),c=r(2101),u=r(3326),l=r(5300),d=r(8115);i("search",(function(e,t,r){return[function(t){var r=a(this),i=s(t)?void 0:l(t,e);return i?n(i,t,r):new RegExp(t)[e](u(r))},function(e){var n=o(this),i=u(e),s=r(t,n,i);if(s.done)return s.value;var a=n.lastIndex;c(a,0)||(n.lastIndex=0);var l=d(n,i);return c(n.lastIndex,a)||(n.lastIndex=a),null===l?-1:l.index}]}))},8319:(e,t,r)=>{var n=r(3171),i=r(266),o=r(5968),s=r(4954),a=r(1176),c=r(9650),u=r(8311),l=r(8885),d=r(7942),h=r(6637),p=r(4237),f=r(3326),g=r(5300),m=r(9794),v=r(8115),y=r(3466),E=r(5650),_=r(4229),S=E.UNSUPPORTED_Y,A=4294967295,I=Math.min,O=[].push,b=o(/./.exec),T=o(O),C=o("".slice);s("split",(function(e,t,r){var o;return o="c"==="abbc".split(/(b)*/)[1]||4!=="test".split(/(?:)/,-1).length||2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var o=f(l(this)),s=void 0===r?A:r>>>0;if(0===s)return[];if(void 0===e)return[o];if(!u(e))return i(t,o,e,s);for(var a,c,d,h=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,v=new RegExp(e.source,p+"g");(a=i(y,v,o))&&!((c=v.lastIndex)>g&&(T(h,C(o,g,a.index)),a.length>1&&a.index<o.length&&n(O,h,m(a,1)),d=a[0].length,g=c,h.length>=s));)v.lastIndex===a.index&&v.lastIndex++;return g===o.length?!d&&b(v,"")||T(h,""):T(h,C(o,g)),h.length>s?m(h,0,s):h}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:i(t,this,e,r)}:t,[function(t,r){var n=l(this),s=c(t)?void 0:g(t,e);return s?i(s,t,n,r):i(o,f(n),t,r)},function(e,n){var i=a(this),s=f(e),c=r(o,i,s,n,o!==t);if(c.done)return c.value;var u=d(i,RegExp),l=i.unicode,g=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(S?"g":"y"),m=new u(S?"^(?:"+i.source+")":i,g),y=void 0===n?A:n>>>0;if(0===y)return[];if(0===s.length)return null===v(m,s)?[s]:[];for(var E=0,_=0,O=[];_<s.length;){m.lastIndex=S?0:_;var b,w=v(m,S?C(s,_):s);if(null===w||(b=I(p(m.lastIndex+(S?_:0)),s.length))===E)_=h(s,_,l);else{if(T(O,C(s,E,_)),O.length===y)return O;for(var R=1;R<=w.length-1;R++)if(T(O,w[R]),O.length===y)return O;_=E=b}}return T(O,C(s,E)),O}]}),!!_((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),S)},4112:(e,t,r)=>{var n,i=r(3103),o=r(4745),s=r(7933).f,a=r(4237),c=r(3326),u=r(7272),l=r(8885),d=r(8127),h=r(4231),p=o("".startsWith),f=o("".slice),g=Math.min,m=d("startsWith");i({target:"String",proto:!0,forced:!(!h&&!m&&(n=s(String.prototype,"startsWith"),n&&!n.writable)||m)},{startsWith:function(e){var t=c(l(this));u(e);var r=a(g(arguments.length>1?arguments[1]:void 0,t.length)),n=c(e);return p?p(t,n,r):f(t,r,r+n.length)===n}})},5794:(e,t,r)=>{var n=r(3103),i=r(1017).trim;n({target:"String",proto:!0,forced:r(9445)("trim")},{trim:function(){return i(this)}})},8857:(e,t,r)=>{var n=r(9918),i=r(7065),o=r(9123),s=r(1589),a=r(266),c=r(5968),u=r(4229),l=n.aTypedArray,d=n.exportTypedArrayMethod,h=c("".slice);d("fill",(function(e){var t=arguments.length;l(this);var r="Big"===h(s(this),0,3)?o(e):+e;return a(i,this,r,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}),u((function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),1!==e})))},5688:(e,t,r)=>{var n=r(9859),i=r(266),o=r(9918),s=r(9646),a=r(4262),c=r(2991),u=r(4229),l=n.RangeError,d=n.Int8Array,h=d&&d.prototype,p=h&&h.set,f=o.aTypedArray,g=o.exportTypedArrayMethod,m=!u((function(){var e=new Uint8ClampedArray(2);return i(p,e,{length:1,0:3},1),3!==e[1]})),v=m&&o.NATIVE_ARRAY_BUFFER_VIEWS&&u((function(){var e=new d(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));g("set",(function(e){f(this);var t=a(arguments.length>1?arguments[1]:void 0,1),r=c(e);if(m)return i(p,this,r,t);var n=this.length,o=s(r),u=0;if(o+t>n)throw new l("Wrong length");for(;u<o;)this[t+u]=r[u++]}),!m||v)},315:(e,t,r)=>{var n=r(9859),i=r(4745),o=r(4229),s=r(7111),a=r(3867),c=r(9918),u=r(2671),l=r(8506),d=r(6358),h=r(9811),p=c.aTypedArray,f=c.exportTypedArrayMethod,g=n.Uint16Array,m=g&&i(g.prototype.sort),v=!(!m||o((function(){m(new g(2),null)}))&&o((function(){m(new g(2),{})}))),y=!!m&&!o((function(){if(d)return d<74;if(u)return u<67;if(l)return!0;if(h)return h<602;var e,t,r=new g(516),n=Array(516);for(e=0;e<516;e++)t=e%4,r[e]=515-e,n[e]=e-2*t+3;for(m(r,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(r[e]!==n[e])return!0}));f("sort",(function(e){return void 0!==e&&s(e),y?m(this,e):a(p(this),function(e){return function(t,r){return void 0!==e?+e(t,r)||0:r!=r?-1:t!=t?1:0===t&&0===r?1/t>0&&1/r<0?1:-1:t>r}}(e))}),!y||v)},556:(e,t,r)=>{var n=r(9859),i=r(3171),o=r(9918),s=r(4229),a=r(1909),c=n.Int8Array,u=o.aTypedArray,l=o.exportTypedArrayMethod,d=[].toLocaleString,h=!!c&&s((function(){d.call(new c(1))}));l("toLocaleString",(function(){return i(d,h?a(u(this)):u(this),a(arguments))}),s((function(){return[1,2].toLocaleString()!==new c([1,2]).toLocaleString()}))||!s((function(){c.prototype.toLocaleString.call([1,2])})))},3675:(e,t,r)=>{r(2574)("Uint8",(function(e){return function(t,r,n){return e(this,t,r,n)}}))},6418:(e,t,r)=>{var n,i=r(8476),o=r(9859),s=r(5968),a=r(8312),c=r(5926),u=r(9789),l=r(3370),d=r(5052),h=r(6407).enforce,p=r(4229),f=r(1180),g=Object,m=Array.isArray,v=g.isExtensible,y=g.isFrozen,E=g.isSealed,_=g.freeze,S=g.seal,A={},I={},O=!o.ActiveXObject&&"ActiveXObject"in o,b=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},T=u("WeakMap",b,l),C=T.prototype,w=s(C.set);if(f)if(O){n=l.getConstructor(b,"WeakMap",!0),c.enable();var R=s(C.delete),P=s(C.has),N=s(C.get);a(C,{delete:function(e){if(d(e)&&!v(e)){var t=h(this);return t.frozen||(t.frozen=new n),R(this,e)||t.frozen.delete(e)}return R(this,e)},has:function(e){if(d(e)&&!v(e)){var t=h(this);return t.frozen||(t.frozen=new n),P(this,e)||t.frozen.has(e)}return P(this,e)},get:function(e){if(d(e)&&!v(e)){var t=h(this);return t.frozen||(t.frozen=new n),P(this,e)?N(this,e):t.frozen.get(e)}return N(this,e)},set:function(e,t){if(d(e)&&!v(e)){var r=h(this);r.frozen||(r.frozen=new n),P(this,e)?w(this,e,t):r.frozen.set(e,t)}else w(this,e,t);return this}})}else i&&p((function(){var e=_([]);return w(new T,e,1),!y(e)}))&&a(C,{set:function(e,t){var r;return m(e)&&(y(e)?r=A:E(e)&&(r=I)),w(this,e,t),r===A&&_(e),r===I&&S(e),this}})},2356:(e,t,r)=>{r(6418)},1939:(e,t,r)=>{var n=r(9859),i=r(5694),o=r(8865),s=r(6570),a=r(5762),c=function(e){if(e&&e.forEach!==s)try{a(e,"forEach",s)}catch(t){e.forEach=s}};for(var u in i)i[u]&&c(n[u]&&n[u].prototype);c(o)},6886:(e,t,r)=>{var n=r(9859),i=r(5694),o=r(8865),s=r(5735),a=r(5762),c=r(95),u=c("iterator"),l=c("toStringTag"),d=s.values,h=function(e,t){if(e){if(e[u]!==d)try{a(e,u,d)}catch(t){e[u]=d}if(e[l]||a(e,l,t),i[t])for(var r in s)if(e[r]!==s[r])try{a(e,r,s[r])}catch(t){e[r]=s[r]}}};for(var p in i)h(n[p]&&n[p].prototype,p);h(o,"DOMTokenList")}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={};r.r(e),r.d(e,{FunctionToString:()=>it,InboundFilters:()=>Je,LinkedErrors:()=>Dr});var t={};r.r(t),r.d(t,{Breadcrumbs:()=>Ht,Dedupe:()=>qt,GlobalHandlers:()=>ar,HttpContext:()=>pr,LinkedErrors:()=>_r,TryCatch:()=>Or}),r(5735),r(1939),r(6886),r(7950);var n=/android/i;function i(){var e,t=null===(e=navigator)||void 0===e?void 0:e.userAgent;return!!t&&Boolean((/Safari/.test(t)&&(/iPhone/.test(t)||/iPad/.test(t))&&!/Trident/.test(t)||/AppleWebKit/.test(t)&&!(/Android/.test(t)||/Linux/.test(t)||/Trident/.test(t))&&(/Mobile/.test(t)||/iPhone/.test(t)||/iPad/.test(t))&&!/Macintosh/.test(t)&&!/Windows/.test(t))&&!(/Chrome/.test(t)||/CriOS/.test(t)||/Edg/.test(t)))}function o(){var e,t=null===(e=navigator)||void 0===e?void 0:e.userAgent;return!!t&&Boolean((/Safari/.test(t)||/AppleWebKit/.test(t))&&(/Macintosh/.test(t)||/Windows/.test(t))&&!/iPhone/.test(t)&&!/iPad/.test(t)&&!/Chrome/.test(t)&&!/Edg/.test(t)&&!/Firefox/.test(t))}var s={get documentBody(){return window.document.body},get documentReferrer(){return window.document.referrer},get documentVisibilityState(){return document.visibilityState},getQueryParams:function(e,t){var r=new URL(e),n={};return t.forEach((e=>{var t=r.searchParams.get(e);t&&(n[e]=t)})),n},isAndroid:function(){return n.test(window.navigator.userAgent)},isDesktopSafari:o,isMobileSafari:i,isSafari:function(){return i()||o()},get isSecureContext(){return window.isSecureContext},isSupported:function(){return void 0!==window.postMessage&&void 0!==window.fetch&&void 0!==document.createElement("a").classList},redirectTo:function(e){window.location.href=e},replaceWindowState:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.title;window.history.replaceState(null,t,e)},submitForm:function(e){e.submit()},get windowInnerHeight(){return window.innerHeight},get windowInnerWidth(){return window.innerWidth},get windowLocation(){return window.location},get windowNavigationBeacon(){return window.navigator.sendBeacon},get windowNavigationLanguage(){var e=window.navigator.language;return!e&&window.navigator.languages.length>0&&(e=window.navigator.languages[0]),e},get windowParentLocation(){return window.parent.location},get windowPerformance(){return window.performance}};r(8233);const a="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function c(e){return e&&e.Math==Math?e:void 0}const u="object"==typeof globalThis&&c(globalThis)||"object"==typeof window&&c(window)||"object"==typeof self&&c(self)||"object"==typeof r.g&&c(r.g)||function(){return this}()||{};function l(){return u}function d(e,t,r){const n=r||u,i=n.__SENTRY__=n.__SENTRY__||{};return i[e]||(i[e]=t())}const h=["debug","info","warn","error","log","assert","trace"],p={};function f(e){if(!("console"in u))return e();const t=u.console,r={},n=Object.keys(p);n.forEach((e=>{const n=p[e];r[e]=t[e],t[e]=n}));try{return e()}finally{n.forEach((e=>{t[e]=r[e]}))}}const g=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return a?h.forEach((r=>{t[r]=(...t)=>{e&&f((()=>{u.console[r](`Sentry Logger [${r}]:`,...t)}))}})):h.forEach((e=>{t[e]=()=>{}})),t}(),m=Object.prototype.toString;function v(e){switch(m.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return C(e,Error)}}function y(e,t){return m.call(e)===`[object ${t}]`}function E(e){return y(e,"ErrorEvent")}function _(e){return y(e,"DOMError")}function S(e){return y(e,"String")}function A(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function I(e){return null===e||A(e)||"object"!=typeof e&&"function"!=typeof e}function O(e){return y(e,"Object")}function b(e){return"undefined"!=typeof Event&&C(e,Event)}function T(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function C(e,t){try{return e instanceof t}catch(e){return!1}}function w(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}const R=l(),P=80;function N(e,t={}){if(!e)return"<unknown>";try{let r=e;const n=5,i=[];let o=0,s=0;const a=" > ",c=a.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||P;for(;r&&o++<n&&(u=D(r,l),!("html"===u||o>1&&s+i.length*c+u.length>=d));)i.push(u),s+=u.length,r=r.parentNode;return i.reverse().join(a)}catch(e){return"<unknown>"}}function D(e,t){const r=e,n=[];let i,o,s,a,c;if(!r||!r.tagName)return"";if(R.HTMLElement&&r instanceof HTMLElement&&r.dataset&&r.dataset.sentryComponent)return r.dataset.sentryComponent;n.push(r.tagName.toLowerCase());const u=t&&t.length?t.filter((e=>r.getAttribute(e))).map((e=>[e,r.getAttribute(e)])):null;if(u&&u.length)u.forEach((e=>{n.push(`[${e[0]}="${e[1]}"]`)}));else if(r.id&&n.push(`#${r.id}`),i=r.className,i&&S(i))for(o=i.split(/\s+/),c=0;c<o.length;c++)n.push(`.${o[c]}`);const l=["aria-label","type","name","title","alt"];for(c=0;c<l.length;c++)s=l[c],a=r.getAttribute(s),a&&n.push(`[${s}="${a}"]`);return n.join("")}function L(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function x(e,t){if(!Array.isArray(e))return"";const r=[];for(let t=0;t<e.length;t++){const n=e[t];try{w(n)?r.push("[VueViewModel]"):r.push(String(n))}catch(e){r.push("[value cannot be serialized]")}}return r.join(t)}function k(e,t=[],r=!1){return t.some((t=>function(e,t,r=!1){return!!S(e)&&(y(t,"RegExp")?t.test(e):!!S(t)&&(r?e===t:e.includes(t)))}(e,t,r)))}function M(e,t,r){if(!(t in e))return;const n=e[t],i=r(n);"function"==typeof i&&j(i,n),e[t]=i}function U(e,t,r){try{Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0})}catch(r){a&&g.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function j(e,t){try{const r=t.prototype||{};e.prototype=t.prototype=r,U(e,"__sentry_original__",t)}catch(e){}}function H(e){return e.__sentry_original__}function F(e){if(v(e))return{message:e.message,name:e.name,stack:e.stack,...q(e)};if(b(e)){const t={type:e.type,target:B(e.target),currentTarget:B(e.currentTarget),...q(e)};return"undefined"!=typeof CustomEvent&&C(e,CustomEvent)&&(t.detail=e.detail),t}return e}function B(e){try{return"undefined"!=typeof Element&&C(e,Element)?N(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function q(e){if("object"==typeof e&&null!==e){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}return{}}function V(e){return G(e,new Map)}function G(e,t){if(function(e){if(!O(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(e){return!0}}(e)){const r=t.get(e);if(void 0!==r)return r;const n={};t.set(e,n);for(const r of Object.keys(e))void 0!==e[r]&&(n[r]=G(e[r],t));return n}if(Array.isArray(e)){const r=t.get(e);if(void 0!==r)return r;const n=[];return t.set(e,n),e.forEach((e=>{n.push(G(e,t))})),n}return e}function z(){const e=u,t=e.crypto||e.msCrypto;let r=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(r=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&r())>>e/4).toString(16)))}function $(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function Y(e){const{message:t,event_id:r}=e;if(t)return t;const n=$(e);return n?n.type&&n.value?`${n.type}: ${n.value}`:n.type||n.value||r||"<unknown>":r||"<unknown>"}function W(e,t,r){const n=e.exception=e.exception||{},i=n.values=n.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type=r||"Error")}function K(e,t){const r=$(e);if(!r)return;const n=r.mechanism;if(r.mechanism={type:"generic",handled:!0,...n,...t},t&&"data"in t){const e={...n&&n.data,...t.data};r.mechanism.data=e}}function X(e){if(e&&e.__sentry_captured__)return!0;try{U(e,"__sentry_captured__",!0)}catch(e){}return!1}const Q="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;var J;function Z(e){return new te((t=>{t(e)}))}function ee(e){return new te(((t,r)=>{r(e)}))}!function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(J||(J={}));class te{constructor(e){te.prototype.__init.call(this),te.prototype.__init2.call(this),te.prototype.__init3.call(this),te.prototype.__init4.call(this),this._state=J.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new te(((r,n)=>{this._handlers.push([!1,t=>{if(e)try{r(e(t))}catch(e){n(e)}else r(t)},e=>{if(t)try{r(t(e))}catch(e){n(e)}else n(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new te(((t,r)=>{let n,i;return this.then((t=>{i=!1,n=t,e&&e()}),(t=>{i=!0,n=t,e&&e()})).then((()=>{i?r(n):t(n)}))}))}__init(){this._resolve=e=>{this._setResult(J.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(J.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===J.PENDING&&(T(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===J.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===J.RESOLVED&&e[1](this._value),this._state===J.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function re(){return d("globalEventProcessors",(()=>[]))}function ne(e){re().push(e)}function ie(e,t,r,n=0){return new te(((i,o)=>{const s=e[n];if(null===t||"function"!=typeof s)i(t);else{const a=s({...t},r);Q&&s.id&&null===a&&g.log(`Event processor "${s.id}" dropped event`),T(a)?a.then((t=>ie(e,t,r,n+1).then(i))).then(null,o):ie(e,a,r,n+1).then(i).then(null,o)}}))}const oe=1e3;function se(){return Date.now()/oe}const ae=function(){const{performance:e}=u;if(!e||!e.now)return se;const t=Date.now()-e.now(),r=null==e.timeOrigin?t:e.timeOrigin;return()=>(r+e.now())/oe}();let ce;(()=>{const{performance:e}=u;if(!e||!e.now)return void(ce="none");const t=36e5,r=e.now(),n=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+r-n):t,o=i<t,s=e.timing&&e.timing.navigationStart,a="number"==typeof s?Math.abs(s+r-n):t;o||a<t?i<=a?(ce="timeOrigin",e.timeOrigin):ce="navigationStart":ce="dateNow"})();const ue="production";function le(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||ae(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:z()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}const de=/\(error: (.*)\)/,he=/captureMessage|captureException/;const pe="<anonymous>";function fe(e){try{return e&&"function"==typeof e&&e.name||pe}catch(e){return pe}}function ge(e,t=100,r=1/0){try{return ve("",e,t,r)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function me(e,t=3,r=102400){const n=ge(e,t);return i=n,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(i))>r?me(e,t-1,r):n;var i}function ve(e,t,n=1/0,i=1/0,o=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(r){if(e)return!!t.has(r)||(t.add(r),!1);for(let e=0;e<t.length;e++)if(t[e]===r)return!0;return t.push(r),!1},function(r){if(e)t.delete(r);else for(let e=0;e<t.length;e++)if(t[e]===r){t.splice(e,1);break}}]}()){const[s,a]=o;if(null==t||["number","boolean","string"].includes(typeof t)&&("number"!=typeof(c=t)||c==c))return t;var c;const u=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if(void 0!==r.g&&t===r.g)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(w(t))return"[VueViewModel]";if(function(e){return O(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(t))return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${fe(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const n=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(e){return`**non-serializable** (${e})`}}(e,t);if(!u.startsWith("[object "))return u;if(t.__sentry_skip_normalization__)return t;const l="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===l)return u.replace("object ","");if(s(t))return"[Circular ~]";const d=t;if(d&&"function"==typeof d.toJSON)try{return ve("",d.toJSON(),l-1,i,o)}catch(e){}const h=Array.isArray(t)?[]:{};let p=0;const f=F(t);for(const e in f){if(!Object.prototype.hasOwnProperty.call(f,e))continue;if(p>=i){h[e]="[MaxProperties ~]";break}const t=f[e];h[e]=ve(e,t,l-1,i,o),p++}return a(t),h}const ye=1;function Ee(e){const{spanId:t,traceId:r}=e.spanContext(),{data:n,op:i,parent_span_id:o,status:s,tags:a,origin:c}=_e(e);return V({data:n,op:i,parent_span_id:o,span_id:t,status:s,tags:a,trace_id:r,origin:c})}function _e(e){return function(e){return"function"==typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}const Se=new WeakMap;const Ae=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function Ie(e,t){return Be().captureEvent(e,t)}function Oe(e,t){Be().addBreadcrumb(e,t)}function be(){return Be().getClient()}function Te(e){return e.transaction}function Ce(e,t,r){const n=t.getOptions(),{publicKey:i}=t.getDsn()||{},{segment:o}=r&&r.getUser()||{},s=V({environment:n.environment||ue,release:n.release,user_segment:o,public_key:i,trace_id:e});return t.emit&&t.emit("createDsc",s),s}function we(e){const t=be();if(!t)return{};const r=Ce(_e(e).trace_id||"",t,Be().getScope()),n=Te(e);if(!n)return r;const i=n&&n._frozenDynamicSamplingContext;if(i)return i;const{sampleRate:o,source:s}=n.metadata;null!=o&&(r.sample_rate=`${o}`);const a=_e(n);return s&&"url"!==s&&(r.transaction=a.description),r.sampled=String(function(e){const{traceFlags:t}=e.spanContext();return Boolean(t&ye)}(n)),t.emit&&t.emit("createDsc",r),r}function Re(e,t){const{fingerprint:r,span:n,breadcrumbs:i,sdkProcessingMetadata:o}=t;!function(e,t){const{extra:r,tags:n,user:i,contexts:o,level:s,transactionName:a}=t,c=V(r);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const u=V(n);u&&Object.keys(u).length&&(e.tags={...u,...e.tags});const l=V(i);l&&Object.keys(l).length&&(e.user={...l,...e.user});const d=V(o);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts}),s&&(e.level=s),a&&(e.transaction=a)}(e,t),n&&function(e,t){e.contexts={trace:Ee(t),...e.contexts};const r=Te(t);if(r){e.sdkProcessingMetadata={dynamicSamplingContext:we(t),...e.sdkProcessingMetadata};const n=_e(r).description;n&&(e.tags={transaction:n,...e.tags})}}(e,n),function(e,t){var r;e.fingerprint=e.fingerprint?(r=e.fingerprint,Array.isArray(r)?r:[r]):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,r),function(e,t){const r=[...e.breadcrumbs||[],...t];e.breadcrumbs=r.length?r:void 0}(e,i),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,o)}function Pe(e,t){const{extra:r,tags:n,user:i,contexts:o,level:s,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:l,attachments:d,propagationContext:h,transactionName:p,span:f}=t;Ne(e,"extra",r),Ne(e,"tags",n),Ne(e,"user",i),Ne(e,"contexts",o),Ne(e,"sdkProcessingMetadata",a),s&&(e.level=s),p&&(e.transactionName=p),f&&(e.span=f),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...h}}function Ne(e,t,r){if(r&&Object.keys(r).length){e[t]={...e[t]};for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[t][n]=r[n])}}let De;class Le{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=xe()}static clone(e){return e?e.clone():new Le}clone(){const e=new Le;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&le(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e;if(t instanceof Le){const e=t.getScopeData();this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else if(O(t)){const t=e;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=xe(),this}addBreadcrumb(e,t){const r="number"==typeof t?t:100;if(r<=0)return this;const n={timestamp:se(),...e},i=this._breadcrumbs;return i.push(n),this._breadcrumbs=i.length>r?i.slice(-r):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:r,_tags:n,_extra:i,_user:o,_level:s,_fingerprint:a,_eventProcessors:c,_propagationContext:u,_sdkProcessingMetadata:l,_transactionName:d,_span:h}=this;return{breadcrumbs:e,attachments:t,contexts:r,tags:n,extra:i,user:o,level:s,fingerprint:a||[],eventProcessors:c,propagationContext:u,sdkProcessingMetadata:l,transactionName:d,span:h}}applyToEvent(e,t={},r=[]){return Re(e,this.getScopeData()),ie([...r,...re(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const r=t&&t.event_id?t.event_id:z();if(!this._client)return g.warn("No client configured on scope - will not capture exception!"),r;const n=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:n,...t,event_id:r},this),r}captureMessage(e,t,r){const n=r&&r.event_id?r.event_id:z();if(!this._client)return g.warn("No client configured on scope - will not capture message!"),n;const i=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:i,...r,event_id:n},this),n}captureEvent(e,t){const r=t&&t.event_id?t.event_id:z();return this._client?(this._client.captureEvent(e,{...t,event_id:r},this),r):(g.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}}function xe(){return{traceId:z(),spanId:z().substring(16)}}const ke="7.111.0",Me=parseFloat(ke),Ue=100;class je{constructor(e,t,r,n=Me){let i,o;this._version=n,t?i=t:(i=new Le,i.setClient(e)),r?o=r:(o=new Le,o.setClient(e)),this._stack=[{scope:i}],e&&this.bindClient(e),this._isolationScope=o}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1||!this.getStack().pop())}withScope(e){const t=this.pushScope();let r;try{r=e(t)}catch(e){throw this.popScope(),e}return T(r)?r.then((e=>(this.popScope(),e)),(e=>{throw this.popScope(),e})):(this.popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const r=this._lastEventId=t&&t.event_id?t.event_id:z(),n=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:n,...t,event_id:r}),r}captureMessage(e,t,r){const n=this._lastEventId=r&&r.event_id?r.event_id:z(),i=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:i,...r,event_id:n}),n}captureEvent(e,t){const r=t&&t.event_id?t.event_id:z();return e.type||(this._lastEventId=r),this.getScope().captureEvent(e,{...t,event_id:r}),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:r,client:n}=this.getStackTop();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=Ue}=n.getOptions&&n.getOptions()||{};if(o<=0)return;const s={timestamp:se(),...e},a=i?f((()=>i(s,t))):s;null!==a&&(n.emit&&n.emit("beforeAddBreadcrumb",a,t),r.addBreadcrumb(a,o))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:r}=this.getStackTop();r&&e(t)}run(e){const t=Fe(this);try{e(this)}finally{Fe(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return Q&&g.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const r=this._callExtensionMethod("startTransaction",e,t);return Q&&!r&&(this.getClient()?g.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):g.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&function(e,t){let r={};"ok"===e.status&&(r={status:"exited"}),le(e,r)}(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:r}=this.getStackTop(),{release:n,environment:i=ue}=r&&r.getOptions()||{},{userAgent:o}=u.navigator||{},s=function(e){const t=ae(),r={sid:z(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return V({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(r)};return e&&le(r,e),r}({release:n,environment:i,user:t.getUser(),...o&&{userAgent:o},...e}),a=t.getSession&&t.getSession();return a&&"ok"===a.status&&le(a,{status:"exited"}),this.endSession(),t.setSession(s),s}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),r=e.getSession();r&&t&&t.captureSession&&t.captureSession(r)}_callExtensionMethod(e,...t){const r=He().__SENTRY__;if(r&&r.extensions&&"function"==typeof r.extensions[e])return r.extensions[e].apply(this,t);Q&&g.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function He(){return u.__SENTRY__=u.__SENTRY__||{extensions:{},hub:void 0},u}function Fe(e){const t=He(),r=qe(t);return Ve(t,e),r}function Be(){const e=He();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=He()){return t=e,!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)&&!qe(e).isOlderThan(Me)||Ve(e,new je),qe(e);var t}(e)}function qe(e){return d("hub",(()=>new je),e)}function Ve(e,t){return!!e&&((e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0)}const Ge=[];function ze(e,t){for(const r of t)r&&r.afterAllSetup&&r.afterAllSetup(e)}function $e(e,t,r){if(r[t.name])Q&&g.log(`Integration skipped because it was already installed: ${t.name}`);else{if(r[t.name]=t,-1===Ge.indexOf(t.name)&&(t.setupOnce(ne,Be),Ge.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,n)=>r(t,n,e)))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const r=t.processEvent.bind(t),n=Object.assign(((t,n)=>r(t,n,e)),{id:t.name});e.addEventProcessor(n)}Q&&g.log(`Integration installed: ${t.name}`)}}function Ye(e,t){return Object.assign((function(...e){return t(...e)}),{id:e})}const We=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],Ke=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],Xe="InboundFilters",Qe=(e={})=>({name:Xe,setupOnce(){},processEvent(t,r,n){const i=n.getOptions(),o=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:We],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:Ke],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,i);return function(e,t){return t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e)?(Q&&g.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${Y(e)}`),!0):function(e,t){return!(e.type||!t||!t.length)&&function(e){const t=[];let r;e.message&&t.push(e.message);try{r=e.exception.values[e.exception.values.length-1]}catch(e){}return r&&r.value&&(t.push(r.value),r.type&&t.push(`${r.type}: ${r.value}`)),Q&&0===t.length&&g.error(`Could not extract message for event ${Y(e)}`),t}(e).some((e=>k(e,t)))}(e,t.ignoreErrors)?(Q&&g.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${Y(e)}`),!0):function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const r=e.transaction;return!!r&&k(r,t)}(e,t.ignoreTransactions)?(Q&&g.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${Y(e)}`),!0):function(e,t){if(!t||!t.length)return!1;const r=Ze(e);return!!r&&k(r,t)}(e,t.denyUrls)?(Q&&g.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${Y(e)}.\nUrl: ${Ze(e)}`),!0):!function(e,t){if(!t||!t.length)return!0;const r=Ze(e);return!r||k(r,t)}(e,t.allowUrls)&&(Q&&g.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${Y(e)}.\nUrl: ${Ze(e)}`),!0)}(t,o)?null:t}}),Je=Ye(Xe,Qe);function Ze(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const r=e[t];if(r&&"<anonymous>"!==r.filename&&"[native code]"!==r.filename)return r.filename||null}return null}(t):null}catch(t){return Q&&g.error(`Cannot extract url for event ${Y(e)}`),null}}let et;const tt="FunctionToString",rt=new WeakMap,nt=()=>({name:tt,setupOnce(){et=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=H(this),r=rt.has(be())&&void 0!==t?t:this;return et.apply(r,e)}}catch(e){}},setup(e){rt.set(e,!0)}}),it=Ye(tt,nt),ot={},st={};function at(e,t){ot[e]=ot[e]||[],ot[e].push(t)}function ct(e,t){st[e]||(t(),st[e]=!0)}function ut(e,t){const r=e&&ot[e];if(r)for(const n of r)try{n(t)}catch(t){a&&g.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${fe(n)}\nError:`,t)}}function lt(){"console"in u&&h.forEach((function(e){e in u.console&&M(u.console,e,(function(t){return p[e]=t,function(...t){ut("console",{args:t,level:e});const r=p[e];r&&r.apply(u.console,t)}}))}))}const dt=u,ht=1e3;let pt,ft,gt;function mt(){if(!dt.document)return;const e=ut.bind(null,"dom"),t=vt(e,!0);dt.document.addEventListener("click",t,!1),dt.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const r=dt[t]&&dt[t].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(M(r,"addEventListener",(function(t){return function(r,n,i){if("click"===r||"keypress"==r)try{const n=this,o=n.__sentry_instrumentation_handlers__=n.__sentry_instrumentation_handlers__||{},s=o[r]=o[r]||{refCount:0};if(!s.handler){const n=vt(e);s.handler=n,t.call(this,r,n,i)}s.refCount++}catch(e){}return t.call(this,r,n,i)}})),M(r,"removeEventListener",(function(e){return function(t,r,n){if("click"===t||"keypress"==t)try{const r=this,i=r.__sentry_instrumentation_handlers__||{},o=i[t];o&&(o.refCount--,o.refCount<=0&&(e.call(this,t,o.handler,n),o.handler=void 0,delete i[t]),0===Object.keys(i).length&&delete r.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,r,n)}})))}))}function vt(e,t=!1){return r=>{if(!r||r._sentryCaptured)return;const n=function(e){try{return e.target}catch(e){return null}}(r);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(r.type,n))return;U(r,"_sentryCaptured",!0),n&&!n._sentryId&&U(n,"_sentryId",z());const i="keypress"===r.type?"input":r.type;(function(e){if(e.type!==ft)return!1;try{if(!e.target||e.target._sentryId!==gt)return!1}catch(e){}return!0})(r)||(e({event:r,name:i,global:t}),ft=r.type,gt=n?n._sentryId:void 0),clearTimeout(pt),pt=dt.setTimeout((()=>{gt=void 0,ft=void 0}),ht)}}const yt=u,Et="__sentry_xhr_v3__";function _t(){if(!yt.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;M(e,"open",(function(e){return function(...t){const r=Date.now(),n=S(t[0])?t[0].toUpperCase():void 0,i=function(e){if(S(e))return e;try{return e.toString()}catch(e){}}(t[1]);if(!n||!i)return e.apply(this,t);this[Et]={method:n,url:i,request_headers:{}},"POST"===n&&i.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const e=this[Et];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}ut("xhr",{args:[n,i],endTimestamp:Date.now(),startTimestamp:r,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?M(this,"onreadystatechange",(function(e){return function(...t){return o(),e.apply(this,t)}})):this.addEventListener("readystatechange",o),M(this,"setRequestHeader",(function(e){return function(...t){const[r,n]=t,i=this[Et];return i&&S(r)&&S(n)&&(i.request_headers[r.toLowerCase()]=n),e.apply(this,t)}})),e.apply(this,t)}})),M(e,"send",(function(e){return function(...t){const r=this[Et];return r?(void 0!==t[0]&&(r.body=t[0]),ut("xhr",{args:[r.method,r.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)):e.apply(this,t)}}))}const St=l();function At(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function It(){(function(){if("string"==typeof EdgeRuntime)return!0;if(!function(){if(!("fetch"in St))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}())return!1;if(At(St.fetch))return!0;let e=!1;const t=St.document;if(t&&"function"==typeof t.createElement)try{const r=t.createElement("iframe");r.hidden=!0,t.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(e=At(r.contentWindow.fetch)),t.head.removeChild(r)}catch(e){a&&g.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e})()&&M(u,"fetch",(function(e){return function(...t){const{method:r,url:n}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,r]=e;return{url:bt(t),method:Ot(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:bt(t),method:Ot(t,"method")?String(t.method).toUpperCase():"GET"}}(t),i={args:t,fetchData:{method:r,url:n},startTimestamp:Date.now()};return ut("fetch",{...i}),e.apply(u,t).then((e=>(ut("fetch",{...i,endTimestamp:Date.now(),response:e}),e)),(e=>{throw ut("fetch",{...i,endTimestamp:Date.now(),error:e}),e}))}}))}function Ot(e,t){return!!e&&"object"==typeof e&&!!e[t]}function bt(e){return"string"==typeof e?e:e?Ot(e,"url")?e.url:e.toString?e.toString():"":""}const Tt=l(),Ct=u;let wt;function Rt(){if(!function(){const e=Tt.chrome,t=e&&e.app&&e.app.runtime,r="history"in Tt&&!!Tt.history.pushState&&!!Tt.history.replaceState;return!t&&r}())return;const e=Ct.onpopstate;function t(e){return function(...t){const r=t.length>2?t[2]:void 0;if(r){const e=wt,t=String(r);wt=t,ut("history",{from:e,to:t})}return e.apply(this,t)}}Ct.onpopstate=function(...t){const r=Ct.location.href,n=wt;if(wt=r,ut("history",{from:n,to:r}),e)try{return e.apply(this,t)}catch(e){}},M(Ct.history,"pushState",t),M(Ct.history,"replaceState",t)}const Pt=["fatal","error","warning","log","info","debug"];function Nt(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const r=t[6]||"",n=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:r,hash:n,relative:t[5]+r+n}}const Dt="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Lt=u;let xt=0;function kt(){return xt>0}function Mt(e,t={},r){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return t;if(H(e))return e}catch(t){return e}const n=function(){const n=Array.prototype.slice.call(arguments);try{r&&"function"==typeof r&&r.apply(this,arguments);const i=n.map((e=>Mt(e,t)));return e.apply(this,i)}catch(e){throw xt++,setTimeout((()=>{xt--})),function(...e){const t=Be();if(2===e.length){const[r,n]=e;return r?t.withScope((()=>(t.getStackTop().scope=r,n(r)))):t.withScope(n)}t.withScope(e[0])}((r=>{var i;r.addEventProcessor((e=>(t.mechanism&&(W(e,void 0,void 0),K(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),i=e,Be().captureException(i,function(e){if(e)return function(e){return e instanceof Le||"function"==typeof e}(e)||function(e){return Object.keys(e).some((e=>Ae.includes(e)))}(e)?{captureContext:e}:e}(undefined))})),e}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}catch(e){}j(n,e),U(e,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>e.name})}catch(e){}return n}const Ut="Breadcrumbs",jt=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:Ut,setupOnce(){},setup(e){var r;t.console&&function(e){const t="console";at(t,e),ct(t,lt)}(function(e){return function(t){if(be()!==e)return;const r={category:"console",data:{arguments:t.args,logger:"console"},level:(n=t.level,"warn"===n?"warning":Pt.includes(n)?n:"log"),message:x(t.args," ")};var n;if("assert"===t.level){if(!1!==t.args[0])return;r.message=`Assertion failed: ${x(t.args.slice(1)," ")||"console.assert"}`,r.data.arguments=t.args.slice(1)}Oe(r,{input:t.args,level:t.level})}}(e)),t.dom&&(r=function(e,t){return function(r){if(be()!==e)return;let n,i,o="object"==typeof t?t.serializeAttribute:void 0,s="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;s&&s>1024&&(Dt&&g.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${s} was configured. Sentry will use 1024 instead.`),s=1024),"string"==typeof o&&(o=[o]);try{const e=r.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;n=N(t,{keyAttrs:o,maxStringLength:s}),i=function(e){if(!R.HTMLElement)return null;let t=e;for(let e=0;e<5;e++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}(t)}catch(e){n="<unknown>"}if(0===n.length)return;const a={category:`ui.${r.name}`,message:n};i&&(a.data={"ui.component_name":i}),Oe(a,{event:r.event,name:r.name,global:r.global})}}(e,t.dom),at("dom",r),ct("dom",mt)),t.xhr&&function(e){at("xhr",e),ct("xhr",_t)}(function(e){return function(t){if(be()!==e)return;const{startTimestamp:r,endTimestamp:n}=t,i=t.xhr[Et];if(!r||!n||!i)return;const{method:o,url:s,status_code:a,body:c}=i;Oe({category:"xhr",data:{method:o,url:s,status_code:a},type:"http"},{xhr:t.xhr,input:c,startTimestamp:r,endTimestamp:n})}}(e)),t.fetch&&function(e){const t="fetch";at(t,e),ct(t,It)}(function(e){return function(t){if(be()!==e)return;const{startTimestamp:r,endTimestamp:n}=t;if(n&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error)Oe({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:r,endTimestamp:n});else{const e=t.response;Oe({category:"fetch",data:{...t.fetchData,status_code:e&&e.status},type:"http"},{input:t.args,response:e,startTimestamp:r,endTimestamp:n})}}}(e)),t.history&&function(e){const t="history";at(t,e),ct(t,Rt)}(function(e){return function(t){if(be()!==e)return;let r=t.from,n=t.to;const i=Nt(Lt.location.href);let o=r?Nt(r):void 0;const s=Nt(n);o&&o.path||(o=i),i.protocol===s.protocol&&i.host===s.host&&(n=s.relative),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),Oe({category:"navigation",data:{from:r,to:n}})}}(e)),t.sentry&&e.on&&e.on("beforeSendEvent",function(e){return function(t){be()===e&&Oe({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:Y(t)},{event:t})}}(e))}}},Ht=Ye(Ut,jt),Ft="Dedupe",Bt=()=>{let e;return{name:Ft,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){return!!t&&(!!function(e,t){const r=e.message,n=t.message;return!(!r&&!n)&&(!(r&&!n||!r&&n)&&(r===n&&(!!Gt(e,t)&&!!Vt(e,t))))}(e,t)||!!function(e,t){const r=zt(t),n=zt(e);return!(!r||!n)&&(r.type===n.type&&r.value===n.value&&(!!Gt(e,t)&&!!Vt(e,t)))}(e,t))}(t,e))return Dt&&g.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){}return e=t}}},qt=Ye(Ft,Bt);function Vt(e,t){let r=$t(e),n=$t(t);if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;if(n.length!==r.length)return!1;for(let e=0;e<n.length;e++){const t=n[e],i=r[e];if(t.filename!==i.filename||t.lineno!==i.lineno||t.colno!==i.colno||t.function!==i.function)return!1}return!0}function Gt(e,t){let r=e.fingerprint,n=t.fingerprint;if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;try{return!(r.join("")!==n.join(""))}catch(e){return!1}}function zt(e){return e.exception&&e.exception.values&&e.exception.values[0]}function $t(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}let Yt=null;function Wt(){Yt=u.onerror,u.onerror=function(e,t,r,n,i){return ut("error",{column:n,error:i,line:r,msg:e,url:t}),!(!Yt||Yt.__SENTRY_LOADER__)&&Yt.apply(this,arguments)},u.onerror.__SENTRY_INSTRUMENTED__=!0}let Kt=null;function Xt(){Kt=u.onunhandledrejection,u.onunhandledrejection=function(e){return ut("unhandledrejection",e),!(Kt&&!Kt.__SENTRY_LOADER__)||Kt.apply(this,arguments)},u.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function Qt(e,t){const r=Zt(e,t),n={type:t&&t.name,value:tr(t)};return r.length&&(n.stacktrace={frames:r}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function Jt(e,t){return{exception:{values:[Qt(e,t)]}}}function Zt(e,t){const r=t.stacktrace||t.stack||"",n=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(er.test(e.message))return 1}return 0}(t);try{return e(r,n)}catch(e){}return[]}const er=/Minified React error #\d+;/i;function tr(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function rr(e,t,r,n,i){let o;if(E(t)&&t.error)return Jt(e,t.error);if(_(t)||y(t,"DOMException")){const i=t;if("stack"in t)o=Jt(e,t);else{const t=i.name||(_(i)?"DOMError":"DOMException"),s=i.message?`${t}: ${i.message}`:t;o=nr(e,s,r,n),W(o,s)}return"code"in i&&(o.tags={...o.tags,"DOMException.code":`${i.code}`}),o}return v(t)?Jt(e,t):O(t)||b(t)?(o=function(e,t,r,n){const i=be(),o=i&&i.getOptions().normalizeDepth,s={exception:{values:[{type:b(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:ir(t,{isUnhandledRejection:n})}]},extra:{__serialized__:me(t,o)}};if(r){const t=Zt(e,r);t.length&&(s.exception.values[0].stacktrace={frames:t})}return s}(e,t,r,i),K(o,{synthetic:!0}),o):(o=nr(e,t,r,n),W(o,`${t}`,void 0),K(o,{synthetic:!0}),o)}function nr(e,t,r,n){const i={};if(n&&r){const n=Zt(e,r);n.length&&(i.exception={values:[{value:t,stacktrace:{frames:n}}]})}if(A(t)){const{__sentry_template_string__:e,__sentry_template_values__:r}=t;return i.logentry={message:e,params:r},i}return i.message=t,i}function ir(e,{isUnhandledRejection:t}){const r=function(e,t=40){const r=Object.keys(F(e));if(r.sort(),!r.length)return"[object has no keys]";if(r[0].length>=t)return L(r[0],t);for(let e=r.length;e>0;e--){const n=r.slice(0,e).join(", ");if(!(n.length>t))return e===r.length?n:L(n,t)}return""}(e),n=t?"promise rejection":"exception";return E(e)?`Event \`ErrorEvent\` captured as ${n} with message \`${e.message}\``:b(e)?`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${n}`:`Object captured as ${n} with keys: ${r}`}const or="GlobalHandlers",sr=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:or,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(function(e){!function(t){const r="error";at(r,(t=>{const{stackParser:r,attachStacktrace:n}=lr();if(be()!==e||kt())return;const{msg:i,url:o,line:s,column:a,error:c}=t,u=void 0===c&&S(i)?function(e,t,r,n){const i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let o=E(e)?e.message:e,s="Error";const a=o.match(i);a&&(s=a[1],o=a[2]);return cr({exception:{values:[{type:s,value:o}]}},t,r,n)}(i,o,s,a):cr(rr(r,c||i,void 0,n,!1),o,s,a);u.level="error",Ie(u,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})),ct(r,Wt)}()}(e),ur("onerror")),t.onunhandledrejection&&(function(e){!function(t){const r="unhandledrejection";at(r,(t=>{const{stackParser:r,attachStacktrace:n}=lr();if(be()!==e||kt())return;const i=function(e){if(I(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(e){}return e}(t),o=I(i)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(i)}`}]}}:rr(r,i,void 0,n,!0);o.level="error",Ie(o,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})})),ct(r,Xt)}()}(e),ur("onunhandledrejection"))}}},ar=Ye(or,sr);function cr(e,t,r,n){const i=e.exception=e.exception||{},o=i.values=i.values||[],s=o[0]=o[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(n,10))?void 0:n,l=isNaN(parseInt(r,10))?void 0:r,d=S(t)&&t.length>0?t:function(){try{return R.document.location.href}catch(e){return""}}();return 0===c.length&&c.push({colno:u,filename:d,function:"?",in_app:!0,lineno:l}),e}function ur(e){Dt&&g.log(`Global Handler attached: ${e}`)}function lr(){const e=be();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const dr="HttpContext",hr=()=>({name:dr,setupOnce(){},preprocessEvent(e){if(!Lt.navigator&&!Lt.location&&!Lt.document)return;const t=e.request&&e.request.url||Lt.location&&Lt.location.href,{referrer:r}=Lt.document||{},{userAgent:n}=Lt.navigator||{},i={...e.request&&e.request.headers,...r&&{Referer:r},...n&&{"User-Agent":n}},o={...e.request,...t&&{url:t},headers:i};e.request=o}}),pr=Ye(dr,hr);function fr(e,t,r=250,n,i,o,s){if(!(o.exception&&o.exception.values&&s&&C(s.originalException,Error)))return;const a=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;var c,u;a&&(o.exception.values=(c=gr(e,t,i,s.originalException,n,o.exception.values,a,0),u=r,c.map((e=>(e.value&&(e.value=L(e.value,u)),e)))))}function gr(e,t,r,n,i,o,s,a){if(o.length>=r+1)return o;let c=[...o];if(C(n[i],Error)){mr(s,a);const o=e(t,n[i]),u=c.length;vr(o,i,u,a),c=gr(e,t,r,n[i],i,[o,...c],o,u)}return Array.isArray(n.errors)&&n.errors.forEach(((n,o)=>{if(C(n,Error)){mr(s,a);const u=e(t,n),l=c.length;vr(u,`errors[${o}]`,l,a),c=gr(e,t,r,n,i,[u,...c],u,l)}})),c}function mr(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function vr(e,t,r,n){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:r,parent_id:n}}const yr="LinkedErrors",Er=(e={})=>{const t=e.limit||5,r=e.key||"cause";return{name:yr,setupOnce(){},preprocessEvent(e,n,i){const o=i.getOptions();fr(Qt,o.stackParser,o.maxValueLength,r,t,e,n)}}},_r=Ye(yr,Er),Sr=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Ar="TryCatch",Ir=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:Ar,setupOnce(){t.setTimeout&&M(Lt,"setTimeout",br),t.setInterval&&M(Lt,"setInterval",br),t.requestAnimationFrame&&M(Lt,"requestAnimationFrame",Tr),t.XMLHttpRequest&&"XMLHttpRequest"in Lt&&M(XMLHttpRequest.prototype,"send",Cr);const e=t.eventTarget;e&&(Array.isArray(e)?e:Sr).forEach(wr)}}},Or=Ye(Ar,Ir);function br(e){return function(...t){const r=t[0];return t[0]=Mt(r,{mechanism:{data:{function:fe(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function Tr(e){return function(t){return e.apply(this,[Mt(t,{mechanism:{data:{function:"requestAnimationFrame",handler:fe(e)},handled:!1,type:"instrument"}})])}}function Cr(e){return function(...t){const r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in r&&"function"==typeof r[e]&&M(r,e,(function(t){const r={mechanism:{data:{function:e,handler:fe(t)},handled:!1,type:"instrument"}},n=H(t);return n&&(r.mechanism.data.handler=fe(n)),Mt(t,r)}))})),e.apply(this,t)}}function wr(e){const t=Lt,r=t[e]&&t[e].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(M(r,"addEventListener",(function(t){return function(r,n,i){try{"function"==typeof n.handleEvent&&(n.handleEvent=Mt(n.handleEvent,{mechanism:{data:{function:"handleEvent",handler:fe(n),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[r,Mt(n,{mechanism:{data:{function:"addEventListener",handler:fe(n),target:e},handled:!1,type:"instrument"}}),i])}})),M(r,"removeEventListener",(function(e){return function(t,r,n){const i=r;try{const r=i&&i.__sentry_wrapped__;r&&e.call(this,t,r,n)}catch(e){}return e.call(this,t,i,n)}})))}const Rr=[Qe(),nt(),Ir(),jt(),sr(),Er(),Bt(),hr()];function Pr(e,t){const r={type:t.name||t.constructor.name,value:t.message},n=function(e,t){return e(t.stack||"",1)}(e,t);return n.length&&(r.stacktrace={frames:n}),r}const Nr="LinkedErrors",Dr=Ye(Nr,((e={})=>{const t=e.limit||5,r=e.key||"cause";return{name:Nr,setupOnce(){},preprocessEvent(e,n,i){const o=i.getOptions();fr(Pr,o.stackParser,o.maxValueLength,r,t,e,n)}}})),Lr=e;let xr={};Lt.Sentry&&Lt.Sentry.Integrations&&(xr=Lt.Sentry.Integrations);const kr={...xr,...Lr,...t},Mr="?";function Ur(e,t,r,n){const i={filename:e,function:t,in_app:!0};return void 0!==r&&(i.lineno=r),void 0!==n&&(i.colno=n),i}const jr=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Hr=/\((\S*)(?::(\d+))(?::(\d+))\)/,Fr=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Br=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,qr=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Vr=function(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,r=0)=>{const n=[],i=e.split("\n");for(let e=r;e<i.length;e++){const r=i[e];if(r.length>1024)continue;const o=de.test(r)?r.replace(de,"$1"):r;if(!o.match(/\S*Error: /)){for(const e of t){const t=e(o);if(t){n.push(t);break}}if(n.length>=50)break}}return function(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),he.test(t[t.length-1].function||"")&&(t.pop(),he.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,50).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(n)}}([30,e=>{const t=jr.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=Hr.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,r]=Gr(t[1]||Mr,t[2]);return Ur(r,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],[50,e=>{const t=Fr.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=Br.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],r=t[1]||Mr;return[r,e]=Gr(r,e),Ur(e,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],[40,e=>{const t=qr.exec(e);return t?Ur(t[2],t[1]||Mr,+t[3],t[4]?+t[4]:void 0):void 0}]),Gr=(e,t)=>{const r=-1!==e.indexOf("safari-extension"),n=-1!==e.indexOf("safari-web-extension");return r||n?[-1!==e.indexOf("@")?e.split("@")[0]:Mr,r?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};class zr extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}const $r=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Yr(e,t=!1){const{host:r,path:n,pass:i,port:o,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&i?`:${i}`:""}@${r}${o?`:${o}`:""}/${n?`${n}/`:n}${s}`}function Wr(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Kr(e,t=[]){return[e,t]}function Xr(e,t){const[r,n]=e;return[r,[...n,t]]}function Qr(e,t){const r=e[1];for(const e of r)if(t(e,e[0].type))return!0;return!1}function Jr(e,t){return(t||new TextEncoder).encode(e)}function Zr(e,t){const[r,n]=e;let i=JSON.stringify(r);function o(e){"string"==typeof i?i="string"==typeof e?i+e:[Jr(i,t),e]:i.push("string"==typeof e?Jr(e,t):e)}for(const e of n){const[t,r]=e;if(o(`\n${JSON.stringify(t)}\n`),"string"==typeof r||r instanceof Uint8Array)o(r);else{let e;try{e=JSON.stringify(r)}catch(t){e=JSON.stringify(ge(r))}o(e)}}return"string"==typeof i?i:function(e){const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}(i)}function en(e,t){const r="string"==typeof e.data?Jr(e.data,t):e.data;return[V({type:"attachment",length:r.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),r]}const tn={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function rn(e){return tn[e]}function nn(e){if(!e||!e.sdk)return;const{name:t,version:r}=e.sdk;return{name:t,version:r}}const on=6e4;const sn=30;function an(e,t,r=function(e){const t=[];function r(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(n){if(!(void 0===e||t.length<e))return ee(new zr("Not adding Promise because buffer limit was reached."));const i=n();return-1===t.indexOf(i)&&t.push(i),i.then((()=>r(i))).then(null,(()=>r(i).then(null,(()=>{})))),i},drain:function(e){return new te(((r,n)=>{let i=t.length;if(!i)return r(!0);const o=setTimeout((()=>{e&&e>0&&r(!1)}),e);t.forEach((e=>{Z(e).then((()=>{--i||(clearTimeout(o),r(!0))}),n)}))}))}}}(e.bufferSize||sn)){let n={};function i(i){const o=[];if(Qr(i,((t,r)=>{const i=rn(r);if(function(e,t,r=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>r}(n,i)){const n=cn(t,r);e.recordDroppedEvent("ratelimit_backoff",i,n)}else o.push(t)})),0===o.length)return Z();const s=Kr(i[0],o),a=t=>{Qr(s,((r,n)=>{const i=cn(r,n);e.recordDroppedEvent(t,rn(n),i)}))};return r.add((()=>t({body:Zr(s,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&Q&&g.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),n=function(e,{statusCode:t,headers:r},n=Date.now()){const i={...e},o=r&&r["x-sentry-rate-limits"],s=r&&r["retry-after"];if(o)for(const e of o.trim().split(",")){const[t,r,,,o]=e.split(":",5),s=parseInt(t,10),a=1e3*(isNaN(s)?60:s);if(r)for(const e of r.split(";"))"metric_bucket"===e&&o&&!o.split(";").includes("custom")||(i[e]=n+a);else i.all=n+a}else s?i.all=n+function(e,t=Date.now()){const r=parseInt(`${e}`,10);if(!isNaN(r))return 1e3*r;const n=Date.parse(`${e}`);return isNaN(n)?on:n-t}(s,n):429===t&&(i.all=n+6e4);return i}(n,e),e)),(e=>{throw a("network_error"),e})))).then((e=>e),(e=>{if(e instanceof zr)return Q&&g.error("Skipped sending event because buffer is full."),a("queue_overflow"),Z();throw e}))}return i.__sentry__baseTransport__=!0,{send:i,flush:e=>r.drain(e)}}function cn(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}let un;function ln(e,t=function(){if(un)return un;if(At(Lt.fetch))return un=Lt.fetch.bind(Lt);const e=Lt.document;let t=Lt.fetch;if(e&&"function"==typeof e.createElement)try{const r=e.createElement("iframe");r.hidden=!0,e.head.appendChild(r);const n=r.contentWindow;n&&n.fetch&&(t=n.fetch),e.head.removeChild(r)}catch(e){Dt&&g.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return un=t.bind(Lt)}()){let r=0,n=0;return an(e,(function(i){const o=i.body.length;r+=o,n++;const s={body:i.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:r<=6e4&&n<15,...e.fetchOptions};try{return t(e.url,s).then((e=>(r-=o,n--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return un=void 0,r-=o,n--,ee(e)}}))}const dn="7";function hn(e,t={}){const r="string"==typeof t?t:t.tunnel,n="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return r||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:"",r=e.port?`:${e.port}`:"";return`${t}//${e.host}${r}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){return r={sentry_key:e.publicKey,sentry_version:dn,...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(r).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(r[e])}`)).join("&");var r}(e,n)}`}const pn="Not capturing exception because it's already been captured.";class fn{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=function(e){const t="string"==typeof e?function(e){const t=$r.exec(e);if(!t)return void f((()=>{console.error(`Invalid Sentry Dsn: ${e}`)}));const[r,n,i="",o,s="",a]=t.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const e=u.match(/^\d+/);e&&(u=e[0])}return Wr({host:o,pass:i,path:c,projectId:u,port:s,protocol:r,publicKey:n})}(e):Wr(e);if(t&&function(e){if(!a)return!0;const{port:t,projectId:r,protocol:n}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(g.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(r.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(n)?t&&isNaN(parseInt(t,10))&&(g.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(g.error(`Invalid Sentry Dsn: Invalid protocol ${n}`),1):(g.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),1)))}(t))return t}(e.dsn):Q&&g.warn("No DSN provided, client will not send events."),this._dsn){const t=hn(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,r){if(X(e))return void(Q&&g.log(pn));let n=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,r))).then((e=>{n=e}))),n}captureMessage(e,t,r,n){let i=r&&r.event_id;const o=A(e)?e:String(e),s=I(e)?this.eventFromMessage(o,t,r):this.eventFromException(e,r);return this._process(s.then((e=>this._captureEvent(e,r,n))).then((e=>{i=e}))),i}captureEvent(e,t,r){if(t&&t.originalException&&X(t.originalException))return void(Q&&g.log(pn));let n=t&&t.event_id;const i=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,t,i||r).then((e=>{n=e}))),n}captureSession(e){"string"!=typeof e.release?Q&&g.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),le(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then((r=>t.flush(e).then((e=>r&&e))))):Z(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return Q&&g.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){const t=this._integrations[e.name];$e(this,e,this._integrations),t||ze(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let r=function(e,t,r,n){const i=nn(r),o=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,r&&r.sdk);const s=function(e,t,r,n){const i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!r&&n&&{dsn:Yr(n)},...i&&{trace:V({...i})}}}(e,i,n,t);return delete e.sdkProcessingMetadata,Kr(s,[[{type:o},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])r=Xr(r,en(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const n=this._sendEnvelope(r);n&&n.then((t=>this.emit("afterSendEvent",e,t)),null)}sendSession(e){const t=function(e,t,r,n){const i=nn(r);return Kr({sent_at:(new Date).toISOString(),...i&&{sdk:i},...!!n&&t&&{dsn:Yr(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,r){if(this._options.sendClientReports){const r=`${e}:${t}`;Q&&g.log(`Adding outcome: "${r}"`),this._outcomes[r]=this._outcomes[r]+1||1}}captureAggregateMetrics(e){Q&&g.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const t=function(e,t,r,n){const i={sent_at:(new Date).toISOString()};r&&r.sdk&&(i.sdk={name:r.sdk.name,version:r.sdk.version}),n&&t&&(i.dsn=Yr(t));const o=function(e){const t=function(e){let t="";for(const r of e){const e=Object.entries(r.tags),n=e.length>0?`|#${e.map((([e,t])=>`${e}:${t}`)).join(",")}`:"";t+=`${r.name}@${r.unit}:${r.metric}|${r.metricType}${n}|T${r.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return Kr(i,[o])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const r={};return t.forEach((t=>{t&&$e(e,t,r)})),r}(this,e),ze(this,e),this._integrationsInitialized=!0}_updateSessionFromEvent(e,t){let r=!1,n=!1;const i=t.exception&&t.exception.values;if(i){n=!0;for(const e of i){const t=e.mechanism;if(t&&!1===t.handled){r=!0;break}}}const o="ok"===e.status;(o&&0===e.errors||o&&r)&&(le(e,{...r&&{status:"crashed"},errors:e.errors||Number(n||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new te((t=>{let r=0;const n=setInterval((()=>{0==this._numProcessing?(clearInterval(n),t(!0)):(r+=1,e&&r>=e&&(clearInterval(n),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,r,n=function(){return Be().getIsolationScope()}()){const i=this.getOptions(),o=Object.keys(this._integrations);return!t.integrations&&o.length>0&&(t.integrations=o),this.emit("preprocessEvent",e,t),function(e,t,r,n,i,o){const{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||r.event_id||z(),timestamp:t.timestamp||se()},l=r.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:r,release:n,dist:i,maxValueLength:o=250}=t;"environment"in e||(e.environment="environment"in t?r:ue),void 0===e.release&&void 0!==n&&(e.release=n),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=L(e.message,o));const s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=L(s.value,o));const a=e.request;a&&a.url&&(a.url=L(a.url,o))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,l),void 0===t.type&&function(e,t){const r=u._sentryDebugIds;if(!r)return;let n;const i=Se.get(t);i?n=i:(n=new Map,Se.set(t,n));const o=Object.keys(r).reduce(((e,i)=>{let o;const s=n.get(i);s?o=s:(o=t(i),n.set(i,o));for(let t=o.length-1;t>=0;t--){const n=o[t];if(n.filename){e[n.filename]=r[i];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=o[e.filename])}))}))}catch(e){}}(c,e.stackParser);const d=function(e,t){if(!t)return e;const r=e?e.clone():new Le;return r.update(t),r}(n,r.captureContext);r.mechanism&&K(c,r.mechanism);const h=i&&i.getEventProcessors?i.getEventProcessors():[],p=(De||(De=new Le),De).getScopeData();o&&Pe(p,o.getScopeData()),d&&Pe(p,d.getScopeData());const f=[...r.attachments||[],...p.attachments];return f.length&&(r.attachments=f),Re(c,p),ie([...h,...re(),...p.eventProcessors],c,r).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const r=e.debug_meta.images;Object.keys(t).forEach((e=>{r.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof s&&s>0?function(e,t,r){if(!e)return null;const n={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:ge(e.data,t,r)}})))},...e.user&&{user:ge(e.user,t,r)},...e.contexts&&{contexts:ge(e.contexts,t,r)},...e.extra&&{extra:ge(e.extra,t,r)}};return e.contexts&&e.contexts.trace&&n.contexts&&(n.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(n.contexts.trace.data=ge(e.contexts.trace.data,t,r))),e.spans&&(n.spans=e.spans.map((e=>{const n=_e(e).data;return n&&(e.data=ge(n,t,r)),e}))),n}(e,s,a):e)))}(i,e,t,r,this,n).then((e=>{if(null===e)return e;const t={...n.getPropagationContext(),...r?r.getPropagationContext():void 0};if((!e.contexts||!e.contexts.trace)&&t){const{traceId:n,spanId:i,parentSpanId:o,dsc:s}=t;e.contexts={trace:{trace_id:n,span_id:i,parent_span_id:o},...e.contexts};const a=s||Ce(n,this,r);e.sdkProcessingMetadata={dynamicSamplingContext:a,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},r){return this._processEvent(e,t,r).then((e=>e.event_id),(e=>{if(Q){const t=e;"log"===t.logLevel?g.log(t.message):g.warn(t)}}))}_processEvent(e,t,r){const n=this.getOptions(),{sampleRate:i}=n,o=mn(e),s=gn(e),a=e.type||"error",c=`before send for type \`${a}\``;if(s&&"number"==typeof i&&Math.random()>i)return this.recordDroppedEvent("sample_rate","error",e),ee(new zr(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const u="replay_event"===a?"replay":a,l=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,r,l).then((r=>{if(null===r)throw this.recordDroppedEvent("event_processor",u,e),new zr("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return r;const i=function(e,t,r){const{beforeSend:n,beforeSendTransaction:i}=e;return gn(t)&&n?n(t,r):mn(t)&&i?i(t,r):t}(n,r,t);return function(e,t){const r=`${t} must return \`null\` or a valid event.`;if(T(e))return e.then((e=>{if(!O(e)&&null!==e)throw new zr(r);return e}),(e=>{throw new zr(`${t} rejected with ${e}`)}));if(!O(e)&&null!==e)throw new zr(r);return e}(i,c)})).then((n=>{if(null===n)throw this.recordDroppedEvent("before_send",u,e),new zr(`${c} returned \`null\`, will not send event.`,"log");const i=r&&r.getSession();!o&&i&&this._updateSessionFromEvent(i,n);const s=n.transaction_info;if(o&&s&&n.transaction!==e.transaction){const e="custom";n.transaction_info={...s,source:e}}return this.sendEvent(n,t),n})).then(null,(e=>{if(e instanceof zr)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new zr(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,(e=>{Q&&g.error("Error while sending event:",e)}));Q&&g.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[r,n]=t.split(":");return{reason:r,category:n,quantity:e[t]}}))}}function gn(e){return void 0===e.type}function mn(e){return"transaction"===e.type}class vn extends fn{constructor(e){!function(e,t,r=[t],n="npm"){const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:r.map((e=>({name:`${n}:@sentry/${e}`,version:ke}))),version:ke}),e._metadata=i}(e,"browser",["browser"],Lt.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&Lt.document&&Lt.document.addEventListener("visibilitychange",(()=>{"hidden"===Lt.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return function(e,t,r,n){const i=rr(e,t,r&&r.syntheticException||void 0,n);return K(i),i.level="error",r&&r.event_id&&(i.event_id=r.event_id),Z(i)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",r){return function(e,t,r="info",n,i){const o=nr(e,t,n&&n.syntheticException||void 0,i);return o.level=r,n&&n.event_id&&(o.event_id=n.event_id),Z(o)}(this._options.stackParser,e,t,r,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(Dt&&g.warn("SDK not enabled, will not capture user feedback."));const t=function(e,{metadata:t,tunnel:r,dsn:n}){const i={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!r&&!!n&&{dsn:Yr(n)}},o=function(e){return[{type:"user_report"},e]}(e);return Kr(i,[o])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,r)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(Dt&&g.log("No outcomes to send"));if(!this._dsn)return void(Dt&&g.log("No dsn provided, will not send outcomes"));Dt&&g.log("Sending outcomes:",e);const t=(r=e,Kr((n=this._options.tunnel&&Yr(this._dsn))?{dsn:n}:{},[[{type:"client_report"},{timestamp:se(),discarded_events:r}]]));var r,n;this._sendEnvelope(t)}}class yn{constructor(e){this.debug=e.debug??!1;const t={debug:this.debug,dist:`${e.release.split("@")[1]}-${e.environment}`,dsn:e.dsn,environment:e.environment,integrations:[...Rr,new kr.GlobalHandlers({onerror:e.useGlobalHandlers??!1,onunhandledrejection:e.useGlobalHandlers??!1})],release:e.release,stackParser:Vr,transport:e.transport??ln};e.beforeSend&&(t.beforeSend=e.beforeSend);const r=new vn(t),n=new Le;e.initialScope&&n.update(e.initialScope),this.hub=new je(r,n),!0===e.useGlobalHandlers&&Fe(this.hub)}setCustomTags(e){this.hub.configureScope((t=>{Object.entries(e).forEach((([e,r])=>{t.setTag(e,r)}))}))}setUser(e){this.hub.setUser({id:e})}captureException(e,t){this.debug&&console.error("[Sentry exception]",e,t),this.hub.captureException(e,t)}addBreadcrumb(e,t){this.debug&&console.log("[Sentry Breadcrumb]",e,t),this.hub.addBreadcrumb(e,t)}}var En;!function(e){e.development="development",e.sandbox="sandbox",e.production="production",e.staging="staging",e.test="test"}(En||(En={}));var _n=null!=="production"?"production":"development",Sn={get ANALYTICS_CLIENT_VERSION(){return"3.0.2"},get API_PROTOCOL(){return"https://"},get API_PUBLIC_HOST(){switch(_n){case En.production:return"squareup.com";case En.sandbox:return"squareupsandbox.com";default:return"squareupstaging.com"}},get API_URL(){return"".concat(this.API_PROTOCOL).concat(this.PCI_CONNECT_API_HOST)},get ASSET_BASE_URL(){return function(e){switch(e){case En.production:return"https://web.squarecdn.com";case En.sandbox:return"https://sandbox.web.squarecdn.com";case En.development:return"https://localhost:1779";default:return"https://staging.web.squarecdn.com"}}(En[_n])},get ASSET_URL(){return"local"===this.VERSION?this.ASSET_BASE_URL:"".concat(this.ASSET_BASE_URL,"/").concat(this.VERSION)},get BANK_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/bank-nonce")},get CARD_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/card-nonce")},get CONNECT_API_URL(){return"https://connect.".concat(this.API_PUBLIC_HOST)},get CREATE_OAUTH_PLAID_LINK_SESSION_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/plaid/oauth-link-session")},get ENABLE_ERROR_LOGGING(){return _n!==En.development},get GET_PRODUCT_INFORMATION_ENDPOINT(){return"".concat(this.API_URL,"/v2/tokenization/product-information")},get GIFT_CARD_IFRAME(){return"".concat(this.ASSET_URL,"/gift-card-element-iframe.html")},get GOOGLE_PAY_GENERATE_TOKEN_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/google-pay/token")},get HYDRATION_ENDPOINT(){return"".concat(this.API_URL,"/payments/hydrate")},IFRAME_SRC(e){return"".concat(this.ASSET_URL,"/main-iframe-").concat(e?"inline":"external",".html")},get INSTANT_WALLET_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/instant-wallet-nonce")},get METRICS_ERROR_URL(){return"".concat(this.API_URL,"/payments/mtx/error")},get METRICS_URL(){return"".concat(this.API_URL,"/payments/mtx")},get METRICS_V2_URL(){return"".concat(this.API_URL,"/payments/mtx/v2")},get PCI_CONNECT_API_HOST(){return"pci-connect.".concat(this.API_PUBLIC_HOST)},get SENTRY_DSN(){switch(_n){case En.test:case En.development:return"https://acacaeaccacacacabcaacdacdacadaca@sentry.io/000001";default:return"https://565ee38bb5ff45dabc25ab6d7b8bebe3@o160250.ingest.sentry.io/3478832"}},get SINGLE_CARD_IFRAME(){return"".concat(this.ASSET_URL,"/single-card-element-iframe.html")},get SINGLE_CARD_WRAPPER_STYLES(){return"".concat(this.ASSET_URL,"/card-wrapper.css")},STATIC_ASSET(e){return"".concat(this.ASSET_URL,"/static-assets/").concat(e)},get VERSION(){return"1.60.1"},env:_n};const An=-1;async function In(e,t,r=new Error("Promise timeout exceeded")){let n=An;const i=new Promise(((e,i)=>{n=window.setTimeout((()=>{i(r)}),t)})),o=await Promise.race([i,e()]);return window.clearTimeout(n),o}const On=(e,t)=>Math.min(200*Math.pow(2,e-1)+Math.floor(1e3*Math.random()),t);class bn extends Error{constructor(e,t,r){super(`Request timeout exceeded (attempts=${e}; duration=${t}ms; url=${r})`),this.name="HttpRequestTimeoutError",Object.setPrototypeOf(this,bn.prototype)}}class Tn extends Error{constructor(e,t,r){super(`Invalid JSON received (status=${t}; url=${e})`),this.originalErrorMessage=r,this.name="HttpRequestInvalidJsonError",Object.setPrototypeOf(this,Tn.prototype)}}class Cn extends Error{constructor(e,t,r){super(`Network error during request (attempts=${e}; duration=${t}ms; url=${r})`),this.name="HttpRequestNetworkError",Object.setPrototypeOf(this,Cn.prototype)}}var wn;function Rn(e,t){return{body:e,status:t.status,statusText:t.statusText}}function Pn(e){const t=new Headers([["Accept","application/json"],["Content-Type","application/json; charset=utf-8"]]);for(const r in e){const n=e[r];void 0!==n&&t.set(r,n)}return t}async function Nn(e,t,r=1,n=Date.now()){const i=Date.now()-n,{body:o,headers:s={},credentials:a="include",mode:c="cors",timeoutMs:u=1e4,maxAttempts:l=3,maxBackoffMs:d=32e3}=t;let h=null;void 0!==window.AbortController&&null!==window.AbortController&&(h=new window.AbortController);const p={...t,body:null!=o?JSON.stringify(o):null,credentials:a,headers:Pn(s),mode:c,signal:h?h.signal:null};try{const t=await In(window.fetch.bind(null,e,p),u,new bn(r,i,e));return await async function(e,t){let r={};const n=e.status;if(!(n<wn.INTERNAL_SERVER_ERROR))return Rn(r,e);{let i;try{return n!==wn.NO_CONTENT&&(r=await e.json()),Rn(r,e)}catch(r){if(r instanceof Error){const n=r.toString();try{i=await e.text(),i=`${i} ${n}`}catch{i=n}throw new Tn(t,e.status,i)}throw new Tn(t,e.status,JSON.stringify(r))}}}(t,e)}catch(o){if(o instanceof bn)h?.abort();else{if(o instanceof Tn)throw o;if(r===l)throw new Cn(r,i,e)}if(r===l)throw o;const s=On(r,d);return new Promise((i=>{setTimeout((()=>{i(Nn(e,t,r+1,n))}),s)}))}}!function(e){e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.OK=200]="OK",e[e.CREATED=201]="CREATED",e[e.NO_CONTENT=204]="NO_CONTENT",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.UNAUTHORIZED=401]="UNAUTHORIZED"}(wn||(wn={}));const Dn=function(e,t){return Nn(e,{...t,method:"POST"})};var Ln,xn,kn,Mn,Un,jn,Hn,Fn,Bn,qn,Vn,Gn,zn,$n,Yn,Wn,Kn;r(8836),r(1657),r(5883),r(7368),r(6708),r(4069),r(5940),r(4112),function(e){e.API_ERROR="API_ERROR",e.AUTHENTICATION_ERROR="AUTHENTICATION_ERROR",e.INVALID_REQUEST_ERROR="INVALID_REQUEST_ERROR",e.RATE_LIMIT_ERROR="RATE_LIMIT_ERROR",e.PAYMENT_METHOD_ERROR="PAYMENT_METHOD_ERROR",e.REFUND_ERROR="REFUND_ERROR"}(Ln||(Ln={}));class Xn extends Error{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown Error",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e;t.length>0&&(r=function(e,t){return"".concat(e,"\n  ").concat(t.map((e=>{switch(!0){case"message"in e:return e.message;case"detail"in e:return e.detail;default:return"[Unspecified Error]"}})).join("\n  "))}(e,t)),super(r),this.errors=t,this.name="SqError",Object.setPrototypeOf(this,Xn.prototype)}fromSerializedError(e){this.name=e.name,this.message=e.message,e.errors&&(this.errors=e.errors)}}class Qn extends Xn{constructor(){super("The Payment 'applicationId' option is not in the correct format."),this.name="InvalidApplicationIdError",Object.setPrototypeOf(this,Qn.prototype)}}class Jn extends Xn{constructor(e,t){super("Web Payments SDK was initialized with an application ID created in ".concat(e," however you are currently using ").concat(t,".")),this.name="ApplicationIdEnvironmentMismatchError ",Object.setPrototypeOf(this,Jn.prototype)}}class Zn extends Xn{constructor(){super("The Payment 'locationId' option is not in the correct format."),this.name="InvalidLocationIdError",Object.setPrototypeOf(this,Zn.prototype)}}class ei extends Xn{constructor(){super("Tokenization has failed. `accountHolderName` is a required option when calling ach.tokenize()"),this.name="PlaidMissingNameError",Object.setPrototypeOf(this,ei.prototype)}}class ti extends Xn{constructor(){super("You cannot call `tokenize` when using an `onTokenize` callback"),this.name="AfterpayOnTokenizeListenerError",Object.setPrototypeOf(this,ti.prototype)}}class ri extends Xn{constructor(e,t){super("This instance of ".concat(e," is missing the ").concat(t," listener.")),this.name="PaymentMethodMissingListener",Object.setPrototypeOf(this,ri.prototype)}}class ni extends Xn{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("The payment request used for Afterpay/Clearpay caused a failure",e),this.errors=e,this.name="AfterpayRequestError",Object.setPrototypeOf(this,ni.prototype)}}class ii extends Xn{constructor(){super("The amount is outside of the merchant's Afterpay payment limits."),this.name="AfterpayAmountOutsideLimitsError",Object.setPrototypeOf(this,ii.prototype)}}class oi extends Xn{constructor(){super("The currency provided is not supported for use with Afterpay/Clearpay"),this.name="AfterpayUnsupportedCurrencyError",Object.setPrototypeOf(this,oi.prototype)}}class si extends Xn{constructor(){super("Afterpay/Clearpay is not enabled for this merchant."),this.name="AfterpayMerchantError",Object.setPrototypeOf(this,si.prototype)}}class ai extends Xn{constructor(e){super(e),this.name="AfterpayInvalidPaymentRequestError",Object.setPrototypeOf(this,ai.prototype)}}class ci extends Xn{constructor(e){super("An issue occurred while verifying the buyer",[e]),this.name="VerifyBuyerError",Object.setPrototypeOf(this,ci.prototype)}toJSON(){return{errors:this.errors.map((e=>{var t={};return["name","message","type","code","token"].forEach((function(r){r in e&&(t[r]=e[r])})),t})),name:this.name}}}class ui extends Xn{constructor(e){var t=e instanceof HTMLElement?e.nodeName:e;super("The element ".concat(t," was not found")),this.name="ElementNotFoundError",Object.setPrototypeOf(this,ui.prototype)}}class li extends Xn{constructor(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).join("\n");super("Please ensure you call payments.paymentRequest (https://developer.squareup.com/reference/sdks/web/payments#Payments.paymentRequest) with the appropriate options.\n".concat(e)),this.name="InvalidPaymentRequestError",Object.setPrototypeOf(this,li.prototype)}}class di extends Xn{constructor(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).join("\n");super("\n".concat(e)),this.name="InvalidPaymentRequestUpdateError",Object.setPrototypeOf(this,di.prototype)}}class hi extends Xn{constructor(e,t){super("The callback provided to the event listener ".concat(e," threw an error with message: ").concat(t)),this.name="InvalidEventListenerCallbackError",Object.setPrototypeOf(this,hi.prototype)}}class pi extends Xn{constructor(e){super("option: '".concat(e,"'")),this.name="InvalidOptionError",Object.setPrototypeOf(this,pi.prototype)}}r(7890),function(e){e.FOCUS_CLASS_ADDED="focusClassAdded",e.FOCUS_CLASS_REMOVED="focusClassRemoved",e.ERROR_CLASS_ADDED="errorClassAdded",e.ERROR_CLASS_REMOVED="errorClassRemoved",e.CARD_BRAND_CHANGED="cardBrandChanged",e.POSTAL_CODE_CHANGED="postalCodeChanged",e.ESCAPE="escape",e.SUBMIT="submit"}(xn||(xn={})),function(e){e.CARD_NUMBER="cardNumber",e.CVV="cvv",e.EXPIRATION_DATE="expirationDate",e.POSTAL_CODE="postalCode"}(kn||(kn={})),function(e){e.CARD_INPUT="input",e.CARD_INPUT_FOCUS="input.is-focus",e.CARD_INPUT_PLACEHOLDER="input::placeholder",e.CARD_INPUT_FOCUS_PLACEHOLDER="input.is-focus::placeholder",e.CARD_INPUT_ERROR="input.is-error",e.CARD_INPUT_ERROR_PLACEHOLDER="input.is-error::placeholder",e.CARD_COMPONENT=".input-container",e.CARD_COMPONENT_FOCUS=".input-container.is-focus",e.CARD_COMPONENT_ERROR=".input-container.is-error",e.CARD_INPUT_HELPER_TEXT=".message-text",e.CARD_INPUT_HELPER_ICON=".message-icon",e.CARD_INPUT_ERROR_TEXT=".message-text.is-error",e.CARD_INPUT_ERROR_ICON=".message-icon.is-error"}(Mn||(Mn={})),function(e){e.GIFT_CARD_NUMBER="giftCardNumber"}(Un||(Un={})),function(e){e.FOCUS_CLASS_ADDED="focusClassAdded",e.FOCUS_CLASS_REMOVED="focusClassRemoved",e.ERROR_CLASS_ADDED="errorClassAdded",e.ERROR_CLASS_REMOVED="errorClassRemoved",e.CARD_BRAND_CHANGED="cardBrandChanged",e.ESCAPE="escape",e.SUBMIT="submit"}(jn||(jn={})),function(e){e.UNKNOWN="Unknown"}(Hn||(Hn={})),function(e){e.GIFT="Gift"}(Fn||(Fn={}));class fi extends Xn{constructor(e){super("".concat(e," is not a valid field name. Valid field names are ").concat([...Object.values(kn),...Object.values(Un)].join(", "))),this.name="InvalidFieldNameError",Object.setPrototypeOf(this,fi.prototype)}}class gi extends Xn{constructor(e){super("Configuration property '".concat(e,"' is invalid")),this.name="InvalidConfigurationPropertyError",Object.setPrototypeOf(this,gi.prototype)}}class mi extends Xn{constructor(e,t,r){super("Configuration property '".concat(e,"' has an invalid value '").concat(t,"'.").concat(r?" ".concat(r,"."):"")),this.name="InvalidConfigurationValueError",Object.setPrototypeOf(this,mi.prototype)}}class vi extends Xn{constructor(e){var t=e.map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).join("\n");super("\n".concat(t)),this.name="InvalidCashAppPayV1OptionsFieldTypes",Object.setPrototypeOf(this,vi.prototype)}}class yi extends Xn{constructor(e){var t=e.map((e=>{var[t,r]=e;return'accepted property: "'.concat(t,'" values are "').concat(r,'"')})).join("\n");super("\n".concat(t)),this.name="InvalidCashAppPayV1OptionsFieldValues",Object.setPrototypeOf(this,yi.prototype)}}class Ei extends Xn{constructor(e){super(e),this.name="CashAppPayInvalidPaymentRequestError",Object.setPrototypeOf(this,Ei.prototype)}}class _i extends Xn{constructor(){super("A redirect url is always required for requests. This must also be a secure link."),this.name="CashAppPayMissingRedirectUrlError",Object.setPrototypeOf(this,_i.prototype)}}class Si extends Xn{constructor(){super("Non function passed as shouldTokenize checker"),this.name="CashAppPayInvalidShouldTokenizeError",Object.setPrototypeOf(this,Si.prototype)}}class Ai extends Xn{constructor(e,t){super("amount '".concat(e,"' in ").concat(t," is not expressed in a valid format")),this.name="InvalidCurrencyFormatError",Object.setPrototypeOf(this,Ai.prototype)}}class Ii extends Xn{constructor(e){super("The ".concat(e," feature is not enabled for this application.")),this.name="FeatureDisabledError",Object.setPrototypeOf(this,Ii.prototype)}}class Oi extends Xn{constructor(){super("Web Payments SDK does not support this browser"),this.name="BrowserNotSupportedError",Object.setPrototypeOf(this,Oi.prototype)}}class bi extends Xn{constructor(){super("Web Payments SDK can only be embedded on sites that use HTTPS"),this.name="WebSdkEmbedError",Object.setPrototypeOf(this,bi.prototype)}}class Ti extends Xn{constructor(e,t){var r=t||(null==e?void 0:e.field);super("Method unsupported: ".concat(null==e?void 0:e.message).concat(r?" (field=".concat(r,")"):"")),this.name="PaymentMethodUnsupportedError",Object.setPrototypeOf(this,Ti.prototype)}}class Ci extends Xn{constructor(e){super("This instance of ".concat(e," has already been attached to the page.")),this.name="PaymentMethodAlreadyAttachedError",Object.setPrototypeOf(this,Ci.prototype)}}class wi extends Xn{constructor(e){super("".concat(e," has not been attached to the page. It must be attached before you can call this method.")),this.name="PaymentMethodNotAttachedError",Object.setPrototypeOf(this,wi.prototype)}}class Ri extends Xn{constructor(e){super("This instance of ".concat(e," has already been destroyed.")),this.name="PaymentMethodAlreadyDestroyedError",Object.setPrototypeOf(this,Ri.prototype)}}class Pi extends Xn{constructor(e,t){var r=e instanceof HTMLElement?e.nodeName:e;super("The value ".concat(r," is not a valid element type or selector. Only valid elements or selectors referring to ").concat([...t].join(", ")," elements are allowed.")),this.name="InvalidElementTypeError",Object.setPrototypeOf(this,Pi.prototype)}}class Ni extends Xn{constructor(e,t){super("An element with one of the following conflicting IDs was found on the page: ".concat(t,". You must change those elements' ID before you can use ").concat(e)),this.name="InvalidElementPresentError",Object.setPrototypeOf(this,Ni.prototype)}}class Di extends Xn{constructor(e){super("Invalid style property '".concat(e,"'.")),this.name="InvalidInputStylePropertyError",Object.setPrototypeOf(this,Di.prototype)}}class Li extends Xn{constructor(e,t){super("Invalid style value '".concat(t,"' for property '").concat(e,"'.")),this.name="InvalidInputStyleValueError",Object.setPrototypeOf(this,Li.prototype)}}class xi extends Xn{constructor(e){super("Invalid style selector '".concat(e,"'.")),this.name="InvalidInputStyleSelectorError",Object.setPrototypeOf(this,xi.prototype)}}class ki extends Xn{constructor(e){super("One or more style selectors and/or CSS properties are invalid",e),this.errors=e,this.name="InvalidStylesError",Object.setPrototypeOf(this,ki.prototype)}}class Mi extends Xn{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("Tokenization has failed",e),this.errors=e,this.name="TokenizationError",Object.setPrototypeOf(this,Mi.prototype)}}class Ui extends Xn{constructor(e){var t="An unexpected error occurred";e&&(t+=" while ".concat(e)),super("".concat(t,".")),this.name="UnexpectedError",Object.setPrototypeOf(this,Ui.prototype)}}!function(e){e.ON_TOKENIZATION="ontokenization",e.CLOSE_OAUTH="CLOSE_OAUTH",e.ERROR="ERROR",e.EXIT="EXIT",e.FAIL_OAUTH="FAIL_OAUTH",e.HANDOFF="HANDOFF",e.MATCHED_SELECT_INSTITUTION="MATCHED_SELECT_INSTITUTION",e.MATCHED_SELECT_VERIFY_METHOD="MATCHED_SELECT_VERIFY_METHOD",e.OPEN="OPEN",e.OPEN_MY_PLAID="OPEN_MY_PLAID",e.OPEN_OAUTH="OPEN_OAUTH",e.SEARCH_INSTITUTION="SEARCH_INSTITUTION",e.SELECT_BRAND="SELECT_BRAND",e.SELECT_INSTITUTION="SELECT_INSTITUTION",e.SUBMIT_CREDENTIALS="SUBMIT_CREDENTIALS",e.SUBMIT_MFA="SUBMIT_MFA",e.TRANSITION_VIEW="TRANSITION_VIEW"}(Bn||(Bn={})),function(e){e.BLACK="black",e.GREEN="mint",e.MINT="mint"}(qn||(qn={})),function(e){e.CheckoutWithAfterpay="checkout_with_afterpay",e.BuyNowWithAfterpay="buy_now_with_afterpay",e.PlaceOrderWithAfterpay="place_order_with_afterpay"}(Vn||(Vn={})),function(e){e.REVIEW_MY_ORDER="review_my_order",e.BUY_NOW="buy_now"}(Gn||(Gn={})),function(e){e.BLACK_ON_MINT="black-on-mint",e.BLACK_ON_WHITE="black-on-white",e.MINT_ON_BLACK="mint-on-black",e.WHITE_ON_BLACK="white-on-black"}(zn||(zn={})),function(e){e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg"}($n||($n={})),function(e){e.CIRCLED_INFO_ICON="circled-info-icon",e.CIRCLED_QUESTION_ICON="circled-question-icon",e.LEARN_MORE_TEXT="learn-more-text",e.MORE_INFO_TEXT="more-info-text",e.NONE="none"}(Yn||(Yn={})),function(e){e.MINT="mint",e.WHITE="white"}(Wn||(Wn={})),function(e){e.AFTERPAY_SHIPPING_ADDRESS_CHANGED="afterpay_shippingaddresschanged",e.AFTERPAY_SHIPPING_OPTION_CHANGED="afterpay_shippingoptionchanged"}(Kn||(Kn={}));var ji,Hi,Fi,Bi,qi,Vi,Gi,zi,$i,Yi,Wi,Ki,Xi,Qi,Ji,Zi=["borderColor","borderRadius","borderWidth"],eo=["borderColor","borderWidth"],to=["color"],ro=["color"];!function(e){e.UNKNOWN="OTHER_BRAND",e.AMERICAN_EXPRESS="AMERICAN_EXPRESS",e.DINERS_CLUB="DISCOVER_DINERS",e.DISCOVER="DISCOVER",e.JCB="JCB",e.MASTERCARD="MASTERCARD",e.UNION_PAY="CHINA_UNIONPAY",e.VISA="VISA"}(ji||(ji={})),function(e){e.UNKNOWN_CARD_TYPE="UNKNOWN_CARD_TYPE",e.CREDIT="CREDIT",e.DEBIT="DEBIT"}(Hi||(Hi={})),function(e){e.UNKNOWN_PAYMENT_TYPE="UNKNOWN_PREPAID_TYPE",e.NOT_PREPAID="NOT_PREPAID",e.PREPAID="PREPAID"}(Fi||(Fi={})),function(e){e.ROUND="round",e.SEMIROUND="semiround"}(Bi||(Bi={})),function(e){e.MEDIUM="medium",e.SMALL="small"}(qi||(qi={})),function(e){e.DARK="dark",e.LIGHT="light"}(Vi||(Vi={})),function(e){e.FULL="full",e.STATIC="static"}(Gi||(Gi={})),function(e){e.ONTOKENIZATION="ontokenization",e.CUSTOMER_INTERACTION="customerInteraction",e.CUSTOMER_DISMISSED="customerDismissed"}(zi||(zi={})),function(e){e.DEFAULT="default",e.BLACK="black",e.WHITE="white"}($i||($i={})),function(e){e.STATIC="static",e.FILL="fill"}(Yi||(Yi={})),function(e){e.LONG="long",e.SHORT="short"}(Wi||(Wi={})),function(e){e.PAYMENT_METHOD_DESTROYED="PAYMENT_METHOD_DESTROYED",e.SHIPPING_ADDRESS_UNSERVICEABLE="SHIPPING_ADDRESS_UNSERVICEABLE",e.SHIPPING_ADDRESS_INVALID="SHIPPING_ADDRESS_INVALID"}(Ki||(Ki={})),function(e){e.APPLE_PAY="Apple Pay",e.AFTERPAY_CLEARPAY="AfterpayClearpay",e.CARD="Card",e.GOOGLE_PAY="Google Pay",e.GIFT_CARD="Gift Card",e.ACH="ACH",e.CASH_APP_PAY="Cash App Pay"}(Xi||(Xi={})),function(e){e.SHIPPING_CONTACT_CHANGED="shippingcontactchanged",e.SHIPPING_OPTION_CHANGED="shippingoptionchanged"}(Qi||(Qi={}));class no{constructor(e,t){this.type=e,this.detail=t,this.type=e,this.detail=t}}function io(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.entries(t).map((e=>{var[t,r]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r))})).join("&");return encodeURI(e)+(r.length>0?"?".concat(r):"")}!function(e){e.UNKNOWN="Unknown",e.OK="OK",e.ERROR="Error",e.INVALID="Invalid",e.ABORT="Abort",e.CANCEL="Cancel"}(Ji||(Ji={}));var oo=new RegExp(/^[\w.-]+$/i),so=new RegExp(/sq0at/i);function ao(e){return Sn.env===e}function co(){return ao(En.production)}var uo=ho(60),lo=po(60);function ho(e){return 1e3*e}function po(e){return e*uo}var fo=function(e){return e*lo},go=/^_/g,mo=/(?!^)([A-Z])/g,vo=/[\s_]+(?=[A-Za-z])/g;function yo(e){return"JPY"===e.toUpperCase()?0:2}var Eo,_o,So={convertLocaleToUnderscore:function(e){return e.replace(/-/,"_")},cssProperty:function(e){return e.replace(go,"-").replace(mo," $1").replace(vo,"-").toLowerCase()},decimalPlaces:yo,delay:function(e){return new Promise((t=>setTimeout(t,e)))},enumValues:function(e){return Object.keys(e).map((t=>e[t])).filter((function(e){return"string"==typeof e}))},formatCSSKeyValuePair:function(e,t){return"".concat(e,": ").concat(t,";")},isInstanceOf:function(e,t){return t.some((function(t){return e instanceof t}))},isProduction:co,isStaging:function(){return ao(En.staging)},isValidUrl:function(e){try{return new URL(e),!0}catch(e){return!1}},moneyAmountToInternationalizedCurrency:function(e,t,r){var n=yo(t),i=e/Math.pow(10,n);return new Intl.NumberFormat(r,{currency:t,style:"currency"}).format(i)},moneyAmountToPaymentRequestAmount:function(e,t){var r=yo(t);return(e/Math.pow(10,r)).toFixed(r)},paymentRequestAmountToMoneyAmount:function(e,t){var r=yo(t),n="^(-?[0-9]+)";r>0&&(n="".concat(n,"(?:\\.([0-9]{1,").concat(r,"})[0-9]*)?")),n="".concat(n,"$");var i=e.match(n);if(!i)throw new Ai(e,t);var o=i[1];if(r>0){var s=i[2]||"";o=o+s+"0".repeat(r-s.length)}return Number(o)},requestId:function(){return Date.now()+Number.parseFloat(Math.random().toFixed(8))},url:io,versionedUrl:function(e){return io(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}};class Ao{constructor(e){this.recordErrorMetrics=!1;var t={beforeSend:(t,r)=>{var n;if(!Sn.ENABLE_ERROR_LOGGING)return console.error(t.exception),null!==(n=t.exception)&&void 0!==n&&n.values&&t.exception.values.forEach((e=>{console.error(e)})),null;if(!r)return t;var i=r.originalException;if(this.recordErrorMetrics){var o=null==i?void 0:i.toString();i instanceof Error&&(o=i.stack);var s="applicationID: ".concat(e.applicationId,", url: ").concat(e.applicationUrl,", source: ").concat(e.source,", error: ").concat(o);Dn(Sn.METRICS_ERROR_URL,{body:{error_message:s,sdk_version:Sn.VERSION}}).catch((()=>{}))}return t},dsn:Sn.SENTRY_DSN,environment:Sn.env,release:"web-payments-sdk@".concat(Sn.VERSION),transport:e.transport,useGlobalHandlers:e.useGlobalHandlers};this.browserErrorLogger=new yn(t),this.browserErrorLogger.setCustomTags({applicationId:e.applicationId,applicationUrl:e.applicationUrl,source:e.source,version:Sn.VERSION})}setRecordErrorMetrics(e){this.recordErrorMetrics=e}setCustomTags(e){this.browserErrorLogger.setCustomTags(e)}setUser(e){this.browserErrorLogger.setUser(e)}addBreadcrumb(e,t){this.browserErrorLogger.addBreadcrumb(e,t)}captureException(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};So.isInstanceOf(e,[Cn,bn])||(e instanceof Tn&&this.browserErrorLogger.addBreadcrumb({category:"invalid json error message",message:e.originalErrorMessage}),this.browserErrorLogger.captureException(e,{captureContext:{tags:t}}))}}!function(e){e.INVALID_APPLICATION_ID="INVALID_APPLICATION_ID",e.INVALID_CARD_NUMBER="INVALID_CARD_NUMBER",e.INVALID_CVV="INVALID_CVV",e.INVALID_EXPIRATION_DATE="INVALID_EXPIRATION_DATE",e.INVALID_POSTAL_CODE="INVALID_POSTAL_CODE",e.INVALID_SANDBOX_CARD_NUMBER="INVALID_SANDBOX_CARD_NUMBER",e.INVALID_STAGING_CARD_NUMBER="INVALID_STAGING_CARD_NUMBER",e.MISSING_APPLICATION_ID="MISSING_APPLICATION_ID",e.MISSING_CARD_DATA="MISSING_CARD_DATA",e.UNKNOWN="UNKNOWN",e.UNSUPPORTED_CARD_BRAND="UNSUPPORTED_CARD_BRAND"}(Eo||(Eo={})),function(e){e.UNKNOWN="UNKNOWN"}(_o||(_o={}));var Io,Oo={[_o.UNKNOWN]:{message:"An unknown error has occurred",type:"UNKNOWN"}};!function(e){e.EXPIRED_PLAID_SESSION="EXPIRED_PLAID_SESSION",e.INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID="INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID",e.UNKNOWN="UNKNOWN"}(Io||(Io={}));var bo,To,Co={EXPIRED_PLAID_SESSION:{message:"The plaid session was expired. Please try again.",type:"EXPIRED_PLAID_SESSION"},INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID:{message:"Invalid plaid bank account id selected",type:"INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID"},UNKNOWN:{message:"An unknown error has occurred",type:"UNKNOWN"}},wo={INVALID_APPLICATION_ID:{message:"Invalid applicationId",type:"INVALID_APPLICATION_ID"},INVALID_CARD_NUMBER:{field:"cardNumber",message:"Credit card number is not valid",type:"VALIDATION_ERROR"},INVALID_CVV:{field:"cvv",message:"CVV is not valid",type:"VALIDATION_ERROR"},INVALID_EXPIRATION_DATE:{field:"expirationDate",message:"Expiration date is not valid",type:"VALIDATION_ERROR"},INVALID_POSTAL_CODE:{field:"postalCode",message:"Postal code is not valid",type:"VALIDATION_ERROR"},INVALID_SANDBOX_CARD_NUMBER:{field:"cardNumber",message:"Credit card number is not valid for sandbox use. Please use one of the test numbers documented at https://developer.squareup.com/docs/testing/test-values.",type:"VALIDATION_ERROR"},INVALID_STAGING_CARD_NUMBER:{field:"cardNumber",message:"Card number is not allowed in Staging. See: https://go/panfake-ui",type:"VALIDATION_ERROR"},MISSING_APPLICATION_ID:{message:"Missing applicationId",type:"MISSING_APPLICATION_ID"},MISSING_CARD_DATA:{message:"Missing card data",type:"MISSING_CARD_DATA"},UNKNOWN:{message:"An unknown error has occurred",type:"UNKNOWN"},UNSUPPORTED_CARD_BRAND:{field:"cardNumber",message:"Card not supported",type:"UNSUPPORTED_CARD_BRAND"}};!function(e){e.INVALID_VALUE="INVALID_VALUE",e.MISSING_LOCATION_ID_OR_NAME="MISSING_LOCATION_ID_OR_NAME",e.NOT_FOUND="NOT_FOUND",e.UNKNOWN="UNKNOWN"}(bo||(bo={}));class Ro extends Xn{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("Internal Validation Error",e),this.errors=e,this.name="InternalValidationError",Object.setPrototypeOf(this,Ro.prototype)}}function Po(){return new Mi([wo.UNKNOWN])}!function(e){e.INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",e.NOT_FOUND="NOT_FOUND",e.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE",e.TOO_MANY_REQUESTS="TOO_MANY_REQUESTS",e.UNAUTHORIZED="UNAUTHORIZED",e.UNKNOWN="UNKNOWN"}(To||(To={}));var No={message:"An internal error has occurred. Unable to complete the request.",type:"INTERNAL_SERVER_ERROR"},Do={message:"The requested resource was not found.",type:"NOT_FOUND"},Lo={message:"The endpoint is currently unavailable.",type:"SERVICE_UNAVAILABLE"},xo={message:"Too many requests in progress.",type:"TOO_MANY_REQUESTS"},ko={message:"Request not authorized.",type:"UNAUTHORIZED"},Mo={message:"An unknown error has occurred",type:"UNKNOWN"};class Uo extends Xn{constructor(e){super(e),this.name="InternalError",Object.setPrototypeOf(this,Uo.prototype)}}class jo extends Xn{constructor(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=function(e){switch(e){case wn.UNAUTHORIZED:return ko;case wn.NOT_FOUND:return Do;case wn.TOO_MANY_REQUESTS:return xo;case wn.INTERNAL_SERVER_ERROR:return No;case wn.SERVICE_UNAVAILABLE:return Lo;default:return Mo}}(t);super("".concat(i.message," (message=").concat(r,"; url=").concat(e,")"),n),this.name="InternalHttpError",Object.setPrototypeOf(this,jo.prototype)}}class Ho extends Xn{constructor(e,t){super("".concat(e," (payment_method=").concat(t,")")),this.name="InternalPaymentMethodError",Object.setPrototypeOf(this,Ho.prototype)}}class Fo extends Xn{constructor(e,t,r){super("Request timeout exceeded (attempts=".concat(e,"; duration=").concat(t,"ms; url=").concat(r,")")),this.name="InternalTimeoutError",Object.setPrototypeOf(this,Fo.prototype)}}function Bo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bo(Object(r),!0).forEach((function(t){Vo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vo(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Go={HttpRequestInvalidJsonError:Tn,HttpRequestNetworkError:Cn,HttpRequestTimeoutError:bn,InternalError:Uo,InternalHttpError:jo,InternalPaymentMethodError:Ho,InternalTimeoutError:Fo,InternalValidationError:Ro};function zo(e){return Object.values(Go).some((t=>e instanceof t))}var $o={AfterpayAmountOutsideLimitsError:ii,AfterpayMerchantError:si,AfterpayRequestError:ni,AfterpayUnsupportedCurrencyError:oi,BrowserNotSupportedError:Oi,ElementNotFoundError:ui,InvalidCurrencyFormatError:Ai,InvalidElementTypeError:Pi,InvalidEventListenerCallbackError:hi,InvalidOptionError:pi,InvalidPaymentRequestError:li,InvalidPaymentRequestUpdateError:di,PaymentMethodUnsupportedError:Ti,PlaidMissingNameError:ei,TokenizationError:Mi,UnexpectedError:Ui,VerifyBuyerError:ci,WebSdkEmbedError:bi},Yo=qo(qo(qo({},$o),Go),{},{AfterpayInvalidPaymentRequestError:ai,AfterpayOnTokenizeListenerError:ti,InvalidApplicationIdError:Qn,InvalidInputStylePropertyError:Di,InvalidInputStyleValueError:Li,InvalidStylesError:ki,PaymentMethodAlreadyAttachedError:Ci,PaymentMethodAlreadyDestroyedError:Ri,PaymentMethodMissingListener:ri,PaymentMethodNotAttachedError:wi,SqError:Xn}),Wo=new Set(["CLEAR","CONFIG_UPDATED","CONFIGURED","DESTROYED","DETACHED","EVENT_LISTENER_ADDED","EVENT_LISTENER_ON_COMPLETE_RESPONSE","FOCUSED","OVERRIDE_STRINGS","RECALCULATED_SIZE","SET_LOCALE","SET_ERROR"]);function Ko(e){return Wo.has(e)}var Xo=new Set(["IFRAME_MESSENGER_TIMEOUT_ERROR","INVALID_REDIRECT_URI"]);function Qo(e){return Xo.has(e)}var Jo,Zo=new Set(["GET_PRODUCT_INFORMATION","LOAD","MAIN_IFRAME","NONCE"]),es={ATTACH:!0,BUILD:!0,INITIALIZATION:!1,PROOF_OF_WORK:!1};!function(e){e.Ach="ACH",e.Afterpay="Afterpay",e.App="WebSDK",e.ApplePay="Apple Pay",e.Card="Card",e.CashApp="Cash App",e.CashAppPayV1="Cash App Pay V1",e.GooglePay="Google Pay",e.Masterpass="Masterpass",e.GiftCard="Gift Card",e.Fields="Fields",e.PaymentRequest="Payment Request"}(Jo||(Jo={})),r(4908);var ts,rs,ns,is,os={hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",port:"",protocol:"",search:"",toString:()=>""};function ss(){if(s.windowLocation===s.windowParentLocation)return s.windowLocation;var e=s.documentReferrer;return e&&0!==e.length?(ts||(ts=document.createElement("a")),ts.href="".concat(e),{hash:ts.hash,host:ts.host,hostname:ts.hostname,href:ts.href,origin:ts.origin,pathname:ts.pathname,port:ts.port,protocol:ts.protocol,search:ts.search,toString(){return this.href}}):os}function as(e,t){var r={};return Object.keys(e).forEach((n=>{"object"==typeof e[n]&&!Array.isArray(e[n])&&t[n]?r[n]=as(e[n],t[n]):r[n]=t[n]||e[n]})),r}!function(e){e.CA="CA",e.GB="GB",e.US="US"}(rs||(rs={})),function(e){e.en="en",e.ja="ja",e.fr="fr",e.es="es"}(ns||(ns={})),function(e){e.enUS="en-US",e.enIE="en-IE",e.enCA="en-CA",e.enGB="en-GB",e.enAU="en-AU",e.jaJP="ja-JP",e.frFR="fr-FR",e.frCA="fr-CA",e.esES="es-ES"}(is||(is={}));var cs={"en-AU":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid ZIP code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"en-CA":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"en-GB":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid ZIP code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the zip code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected delivery contact. Please try again.",optionsError:"There was an error processing your selected delivery option. Please try again."}}}},"en-IE":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiry date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiry date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected delivery contact. Please try again.",optionsError:"There was an error processing your selected delivery option. Please try again."}}}},"en-US":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the zip code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"es-ES":{paymentMethods:{afterpay:{checkoutWidget:{title:"Tus 4 pagos sin intereses",today:"Hoy",weeks:"semanas"}},cards:{errors:{cardNumberError:"Introduce un número de tarjeta válido.",cvvError:"Introduce un código de seguridad válido.",expirationDateError:"Introduce una fecha de caducidad válida.",multipleErrors:"Corrige los errores resaltados.",postalCodeErrors:{CA:"Introduce un código postal válido.",GB:"Introduce un código postal válido.",US:"Introduce un código postal válido."}},helperText:{cardNumber:"Introduce tu número de tarjeta",cvv:"Introduce el código de seguridad",expirationDate:"Introduce la fecha de caducidad",postalCodes:{CA:"Introduce el código postal",GB:"Introduce el código postal",US:"Introduce el código postal"}},placeholderText:{cardNumber:"Número de tarjeta",cvv:"Código CVV",expirationDate:"MM/AA",postalCodes:{CA:"Código postal",GB:"Código postal",US:"C.P."}}},giftCards:{errors:{giftCardNumberError:"Introduce un número de tarjeta de regalo válido."},helperText:{giftCardNumber:"Introduce el número de tu tarjeta de regalo"},placeholderText:{giftCardNumber:"Tarjeta de regalo"}},wallets:{callbackErrors:{contactError:"Se ha producido un error al procesar el contacto de envío que has seleccionado. Inténtalo de nuevo.",optionsError:"Se ha producido un error al procesar la opción de envío que has seleccionado. Inténtalo de nuevo."}}}},"fr-CA":{paymentMethods:{cards:{errors:{cardNumberError:"Saisissez un numéro de carte valide.",cvvError:"Veuillez saisir un code de sécurité valide.",expirationDateError:"Veuillez saisir une date d’expiration valide.",multipleErrors:"Corrigez les erreurs mises en évidence.",postalCodeErrors:{CA:"Saisissez un code postal valide.",GB:"Saisissez un code postal valide.",US:"Saisissez un code postal valide."}},helperText:{cardNumber:"Saisir votre numéro de carte",cvv:"Saisir le code de sécurité",expirationDate:"Saisir la date d’expiration",postalCodes:{CA:"Saisir le code postal",GB:"Saisir le code postal",US:"Saisir le code postal"}},placeholderText:{cardNumber:"Numéro de la carte",cvv:"CVV",expirationDate:"MM/AA",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code postal"}}},giftCards:{errors:{giftCardNumberError:"Saisissez un numéro de carte cadeau valide."},helperText:{giftCardNumber:"Saisir le numéro de votre carte cadeau"},placeholderText:{giftCardNumber:"Carte cadeau"}},afterpay:{checkoutWidget:{title:"Vos quatre paiements sans intérêts",today:"Aujourd’hui",weeks:"semaines"}},wallets:{callbackErrors:{contactError:"Une erreur s‘est produite lors du traitement du contact de livraison sélectionné. Veuillez réessayer.",optionsError:"Une erreur s‘est produite lors du traitement de l‘option d‘expédition sélectionnée. Veuillez réessayer."}}}},"fr-FR":{paymentMethods:{afterpay:{checkoutWidget:{title:"Vos quatre paiements sans intérêts",today:"Aujourd’hui",weeks:"semaines"}},cards:{errors:{cardNumberError:"Saisissez un numéro de carte valide",cvvError:"Veuillez saisir un code de sécurité valide.",expirationDateError:"Saisir une date d’expiration valide",multipleErrors:"Corrigez les erreurs mises en évidence.",postalCodeErrors:{CA:"Saisissez un code postal valide",GB:"Saisissez un code postal valide",US:"Saisissez un code ZIP valide"}},helperText:{cardNumber:"Saisir votre numéro de carte",cvv:"Saisir le code de sécurité",expirationDate:"Saisir la date d’expiration",postalCodes:{CA:"Saisir un code postal",GB:"Saisir un code postal",US:"Saisir un code ZIP"}},placeholderText:{cardNumber:"Numéro de carte",expirationDate:"MM/AA",cvv:"CVV",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code ZIP"}}},giftCards:{errors:{giftCardNumberError:"Saisir un numéro de carte cadeau valide"},helperText:{giftCardNumber:"Saisir le numéro de votre carte cadeau"},placeholderText:{giftCardNumber:"Carte cadeau"}},wallets:{callbackErrors:{contactError:"Une erreur s‘est produite lors du traitement du contact de livraison sélectionné. Veuillez réessayer.",optionsError:"Une erreur s‘est produite lors du traitement de l‘option d‘expédition sélectionnée. Veuillez réessayer."}}}},"ja-JP":{paymentMethods:{afterpay:{checkoutWidget:{title:"無利息の4回払い",today:"今日",weeks:"週間"}},cards:{errors:{cardNumberError:"正しいカード番号を入力してください。",cvvError:"有効なセキュリティコードを入力してください。",expirationDateError:"正しい有効期限を入力してください。",multipleErrors:"強調表示されたエラーを修正してください。",postalCodeErrors:{CA:"正しい郵便番号を入力してください。",GB:"有効な郵便番号を入力してください。",US:"正しいZIPコードを入力してください。"}},helperText:{cardNumber:"カード番号を入力してください",cvv:"セキュリティコードを入力してください",expirationDate:"有効期限を入力してください",postalCodes:{CA:"郵便番号を入力してください",GB:"郵便番号を入力してください",US:"ZIPコードを入力してください"}},placeholderText:{cardNumber:"カード番号",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"郵便番号",GB:"郵便番号",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"有効なギフトカード番号を入力してください。"},helperText:{giftCardNumber:"ギフトカード番号を入力してください"},placeholderText:{giftCardNumber:"ギフトカード"}},wallets:{callbackErrors:{contactError:"選択された配送住所を処理する際にエラーが発生しました。もう一度やり直してください。",optionsError:"選択された配送方法を処理する際にエラーが発生しました。もう一度やり直してください。"}}}}},us={en:is.enUS,es:is.esES,fr:is.frFR,ja:is.jaJP},ls=us[ns.en];class ds{constructor(e){this.currentLocale=ls,this.currentTranslations=cs[this.currentLocale],this.setLocale(e)}setTranslationOverrides(e){this.translationOverrides=e}setLocale(e){var t=this.getLanguageFromLocale(e),r=this.getRegionFromLocale(e),n=this.currentLocale;if(cs[e])this.currentLocale=e;else{if(!ns[t])return{message:"Locale ".concat(e," is not supported. Language ").concat(t," and region ").concat(r," are both unsupported."),newLocale:this.currentLocale,previousLocale:n};this.currentLocale=us[t]}this.currentTranslations=cs[this.currentLocale];var i=this.getRegionFromLocale(this.currentLocale);return r&&i&&r.toLowerCase()!==i.toLowerCase()?{message:"Locale ".concat(e," is not supported. Language ").concat(t," is supported, but region ").concat(r," is not. Falling back to ").concat(this.currentLocale,"."),newLocale:this.currentLocale,previousLocale:n}:{newLocale:this.currentLocale,previousLocale:n}}getCurrentLocale(){return this.currentLocale}getLocaleString(){return this.translationOverrides?as(this.currentTranslations,this.translationOverrides):this.currentTranslations}getLanguageFromLocale(e){return e.split("-")[0]}getRegionFromLocale(e){return e.split("-")[1]}}var hs="INVALID_VALUE",ps="SANITIZED",fs=new Set(["countryCode","currencyCode","requestBillingContact","requestShippingContact","lineItems","total","shippingOptions","shippingContact"]),gs=new Set(["error","shippingErrors","lineItems","total","shippingOptions","taxLineItems","shippingLineItems","discounts"]),ms=new Set([...gs.values(),"eventName"]),vs=new Set(["includeInputLabels","postalCode","style"]),ys=new Set(["includeInputLabels","style"]),Es=new Set(["lineItems","total","shippingOptions","shippingContact"]),_s=new Set(["buttonColor","buttonSizeMode","buttonType"]),Ss=new Set(["shape","size","values","theme","width"]),As=Ms(Bn),Is=Ms(xn),Os=Ms(jn),bs=Ms(Qi),Ts=Ms(kn),Cs=Ms(Un),ws=Ms(is),Rs=Ms($i),Ps=Ms(Yi),Ns=Ms(Wi),Ds=Ms(qi),Ls=Ms(Bi),xs=Ms(Vi),ks=Ms(Gi);function Ms(e){return new Set(Object.values(e))}function Us(e){return JSON.stringify({value:e})}function js(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={};return Object.entries(e).forEach((e=>{var[o,s]=e;if(t.has(o)){var a=s;r.has(o)?a=ps:n[o]&&(a=n[o].has(s)?s:hs),i[o]=a}})),JSON.stringify(i)}function Hs(e){return js(e,Ss,void 0,{shape:Ls,size:Ds,theme:xs,values:xs,width:ks})}var Fs=function(e,t,r){switch(e){case"CONFIGURED":case"CONFIG_UPDATED":return function(e,t){switch(e){case Jo.Card:case Jo.GiftCard:return function(e,t){return js(t,e===Jo.Card?vs:ys)}(e,t);case Jo.GooglePay:return function(e){return js(e,_s,void 0,{buttonColor:Rs,buttonSizeMode:Ps,buttonType:Ns})}(t);case Jo.PaymentRequest:return function(e){return js(e,fs,Es)}(t);case Jo.CashAppPayV1:return Hs(t)}return hs}(t,r);case"FOCUSED":return Us(function(e,t){if("string"!=typeof t)return hs;switch(e){case Jo.Card:if(Ts.has(t))return t;break;case Jo.GiftCard:if(Cs.has(t))return t}return hs}(t,r));case"SET_LOCALE":return Us(function(e){return"string"!=typeof e?hs:ws.has(e)?e:hs}(r));case"EVENT_LISTENER_ADDED":return Us(function(e,t){if("string"!=typeof t)return hs;switch(e){case Jo.Ach:if(As.has(t))return t;break;case Jo.Card:if(Is.has(t))return t;break;case Jo.GiftCard:if(Os.has(t))return t;break;case Jo.PaymentRequest:if(bs.has(t))return t}return hs}(t,r));case"EVENT_LISTENER_ON_COMPLETE_RESPONSE":return function(e,t){return e===Jo.PaymentRequest?function(e){return js(e,ms,gs,{eventName:bs})}(t):hs}(t,r);default:return""}};function Bs(e,t){return null!==e.document.body&&void 0!==e.document.body&&null!==e.document.createNodeIterator(e.document.body,NodeFilter.SHOW_ELEMENT,{acceptNode:t}).nextNode()}function qs(e,t){return Boolean(e.querySelector(t))}function Vs(e,t){return void 0!==e[t]}r(1804);var Gs=function(e){var t,r=Vs(e,"angular"),n=qs(e.document,"[ng-version]")||Vs(e,"getAllAngularRootElements")||Vs(e,"getAngularVersion"),i=Vs(e,"bootstrap"),o=Vs(e,"Ember"),s=Vs(e,"jQuery"),a=qs(e.document,'form[action*="paypal.com"]'),c=function(e){return Bs(e,(function(e){return e.__k||e._component||e.__c?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),u=function(e){var t=qs(e.document,"*[data-reactroot]");if(t)return t;return Bs(e,(function(e){return e._reactRootContainer?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),l=function(e){var t=Vs(e,"__NUXT__")||Vs(e,"$nuxt"),r=Vs(e,"__VUE__");if(r||t)return r||t;return Bs(e,(function(e){return e.__vue__?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),d={angular:n,angularJS:r,bootstrap:i,ember:o,jquery:s,nextJS:Vs(e,"__NEXT_DATA__")&&void 0!==(null===(t=e.__NEXT_DATA__)||void 0===t?void 0:t.buildId),paypalBuyNow:a,preact:c,react:u,vue:l};return Object.fromEntries(Object.entries(d).filter((e=>{var[t,r]=e;return!0===r})))},zs=/[$()*+.?[\\\]^{|}]/g,$s=new RegExp(zs.source),Ys=function(e){return e&&$s.test(e)?e.replace(zs,"\\$&"):e||""},Ws={CARD_NONCE_ENDPOINT:new RegExp(Ys(Sn.CARD_NONCE_ENDPOINT)),GET_PRODUCT_INFORMATION_ENDPOINT:new RegExp(Ys(Sn.GET_PRODUCT_INFORMATION_ENDPOINT)),LIBRARY_RESOURCE:new RegExp("".concat(Ys(Sn.ASSET_BASE_URL),"/([\\w\\d.-]*/)?square\\.js")),MAIN_IFRAME_RESOURCE:new RegExp("".concat(Ys(Sn.ASSET_URL),"/main-iframe"))};function Ks(e,t){var r=s.windowPerformance;if(!r||"function"!=typeof r.getEntriesByType)return null;var n=function(e,t,r){var n=e.filter((e=>e.initiatorType===t&&r.test(e.name)));return n[n.length-1]}([...r.getEntriesByType("resource"),...r.getEntriesByType("navigation")],e,t);return n?Math.round(function(e){return e.duration>0?e.duration:Math.max(Math.trunc(e.responseEnd-e.startTime),0)}(n)):null}var Xs=function(e){switch(e){case"GET_PRODUCT_INFORMATION":return Ks("fetch",Ws.GET_PRODUCT_INFORMATION_ENDPOINT);case"MAIN_IFRAME":return Ks("navigation",Ws.MAIN_IFRAME_RESOURCE);case"LOAD":return Ks("script",Ws.LIBRARY_RESOURCE);case"NONCE":return Ks("fetch",Ws.CARD_NONCE_ENDPOINT);default:return null}};function Qs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Js(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qs(Object(r),!0).forEach((function(t){Zs(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zs(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ea,ta=Sn.METRICS_URL,ra=Sn.METRICS_V2_URL;function na(e){return Ko(e.event)}function ia(e){return Qo(e.event)}function oa(e){return!na(e)&&!ia(e)}class sa{constructor(e,t){this.sdkVersion=Sn.VERSION,this.jsFramework="",this.applicationData=t,this.manualTelemetryStarts={},this.metricsBuffer=[],this.errorLogger=e,this.disableBeacon=!1,this.logVisibilityEvent=this.logVisibilityEvent.bind(this),this.flushAllMetrics=this.flushAllMetrics.bind(this)}setAvt(e){this.avt=e}setFeatureFlagValues(e){this.featureFlagValues=e}logEvent(e,t,r,n){try{var i=this.getMetricsLoggerBody(e,t,r,n);if(this.session=i.session,this.disableBeacon||!s.windowNavigationBeacon||!s.documentVisibilityState)return void Dn(ta,{body:i}).catch((e=>{this.errorLogger.captureException(e)}));this.metricsBuffer.push(i),"NONCE:OK"!==e.event&&"DESTROYED"!==e.event||this.buildAndSendBeacon(),void 0===this.currentInterval&&(document.addEventListener("visibilitychange",this.logVisibilityEvent),document.addEventListener("visibilitychange",this.flushAllMetrics),this.currentInterval=window.setInterval((()=>{this.buildAndSendBeacon()}),1e3))}catch(e){this.errorLogger.captureException(e)}}clearEventListener(){document.removeEventListener("visibilitychange",this.logVisibilityEvent),document.removeEventListener("visibilitychange",this.flushAllMetrics)}getJSFrameworkValue(){return 0===this.jsFramework.length&&(this.jsFramework=JSON.stringify(Gs(window))),this.jsFramework}eventDuration(e,t){var[r,n]=e.event.split(":");if(r in es){var i;if(!1!==es[r]?t&&(i="".concat(r,":").concat(t)):i=r,!i)return null;if("START"===n){var o=Date.now();return this.manualTelemetryStarts[i]=o,null}if("OK"===n||"ERROR"===n){var s=this.manualTelemetryStarts[i];return void 0===s?null:(delete this.manualTelemetryStarts[i],Date.now()-s)}}return"START"!==n&&function(e){return Zo.has(e)}(r)?Xs(r):null}buildAndSendBeacon(){if(0!==this.metricsBuffer.length){try{var e=new Blob([JSON.stringify({metrics:this.metricsBuffer})],{type:"text/plain;charset=UTF-8"});window.navigator.sendBeacon(ra,e)}catch(e){e instanceof TypeError&&"Illegal invocation"===e.message||this.errorLogger.captureException(e),this.disableBeacon=!0,void 0!==this.currentInterval&&(clearInterval(this.currentInterval),this.currentInterval=void 0),Dn(ra,{body:{metrics:this.metricsBuffer}}).catch((e=>{this.errorLogger.captureException(e)}))}this.metricsBuffer=[]}}metricsSession(e,t,r){var n=Js(Js({},this.applicationData),{},{instanceId:e,sessionId:t});return r&&(n.paymentMethodTrackingId=r),n}getMetricsLoggerBody(e,t,r,n){var i={origin:ss().origin},o={innerHeight:s.windowInnerHeight,innerWidth:s.windowInnerWidth,isSecureContext:s.isSecureContext,language:s.windowNavigationLanguage},a=this.eventDuration(e,n),{event:c,eventSource:u}=e,l=this.sdkVersion,d=this.metricsSession(t,r,n),h={appLocation:i,avt:this.avt,browserData:o,event:c,eventSource:u,paymentMethodTrackingId:n,sdkVersion:l,session:d};return na(e)&&void 0!==e.eventConfigurationValues&&(h.eventConfigurationValues=Fs(e.event,u,e.eventConfigurationValues)),ia(e)?h.internalConfigurationValues=JSON.stringify(e.errorMessage):oa(e)&&void 0!==this.featureFlagValues&&(h.internalConfigurationValues=JSON.stringify(this.featureFlagValues)),a&&(h.duration=a),oa(e)&&void 0!==e.sloStatus&&(h.sloStatus=e.sloStatus),"INITIALIZATION:OK"===c&&(h.jsFramework=this.getJSFrameworkValue()),h}logVisibilityEvent(){var e={event:"visible"===s.documentVisibilityState?"VISIBILITY:VISIBLE":"VISIBILITY:HIDDEN",eventSource:Jo.App},t=this.getMetricsLoggerBody(e,this.session.instanceId,this.session.sessionId,this.session.paymentMethodTrackingId);this.metricsBuffer.push(t)}flushAllMetrics(){"hidden"===s.documentVisibilityState&&(this.buildAndSendBeacon(),clearInterval(this.currentInterval),this.currentInterval=void 0)}}r(2356),function(e){e.ACH="ACH",e.AFTERPAY="AFTERPAY",e.APPLE_PAY="APPLE_PAY",e.CASH_APP_PAY_V1="CASH_APP_PAY_V1",e.GOOGLE_PAY="GOOGLE_PAY"}(ea||(ea={})),Sn.HYDRATION_ENDPOINT;var aa="UPDATE_SESSION";class ca{constructor(e,t){this.errorLogger=e,this.messenger=t}}function ua(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function la(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){ua(o,n,i,s,a,"next",e)}function a(e){ua(o,n,i,s,a,"throw",e)}s(void 0)}))}}var da,ha="LOCALE_CHANGED_EVENT";class pa extends ca{constructor(e,t,r,n,i,o,s,a,c,u,l){super(e,t),this.session=n,this.localeStrings=o,this.paymentMethodSupportDetail=i,this.metricsHandler=r,this.eventTarget=s,this.featureFlagValues=a,this.isTestMerchant=c,this.analyticsManager=u,this.proofOfWorkComputePromise=l}addLocaleChangedListener(e){this.eventTarget.addEventListener(ha,e)}removeLocaleChangedListener(e){this.eventTarget.removeEventListener(ha,e)}getSession(){return this.session.serialize()}getFeatureFlagValues(){return this.featureFlagValues}featureFlagActive(e){return void 0!==this.featureFlagValues&&"true"===this.featureFlagValues[e]}getLocaleString(){return this.localeStrings.getLocaleString()}setTranslationOverrides(e){this.localeStrings.setTranslationOverrides(e),this.session.setTranslationOverrides(e),this.eventTarget.dispatchEvent(ha,this.localeStrings.getCurrentLocale()),this.messenger.sendOneWayMessage(aa,{session:this.session.serialize()})}setLocale(e){var t=this.localeStrings.setLocale(e);if(t.previousLocale===t.newLocale)return t;var r=this.localeStrings.getCurrentLocale();return this.session.setLocale(r),this.eventTarget.dispatchEvent(ha,r),this.messenger.sendOneWayMessage(aa,{session:this.session.serialize()}),t}updateSession(e){var t=this;return la((function*(){t.session.setSessionId(e),t.errorLogger.setCustomTags({sessionId:e}),t.analyticsManager.beginGenerateToken(),yield t.messenger.sendOneWayMessage(aa,{session:t.session.serialize()})}))()}waitForAnalyticsAndProofOfWorkCompletion(){var e=this;return la((function*(){try{var[t,r]=yield Promise.all([e.analyticsManager.retrieveCurrentToken(),e.proofOfWorkComputePromise]);t&&t!==e.session.analyticsToken&&e.session.setAnalyticsToken(t),r&&r!==e.session.powCounter&&e.session.setPowCounter(r),e.session.serializationHasChanged()&&(yield e.messenger.sendOneWayMessage(aa,{session:e.session.serialize()}))}catch(t){e.errorLogger.captureException(t)}}))()}setPaymentMethodTrackingId(e){this.metricsHandler.setPaymentMethodTrackingId(e)}getPaymentMethodTrackingId(){return this.metricsHandler.getPaymentMethodTrackingId()}}!function(e){e.APPLE_PAY_BROWSER_NOT_SUPPORTED="APPLE_PAY_BROWSER_NOT_SUPPORTED",e.APPLE_PAY_DEVICE_NOT_SUPPORTED="APPLE_PAY_DEVICE_NOT_SUPPORTED",e.APPLE_PAY_NOT_REGISTERED="APPLE_PAY_NOT_REGISTERED",e.GOOGLE_PAY_BROWSER_NOT_SUPPORTED="GOOGLE_PAY_BROWSER_NOT_SUPPORTED",e.GOOGLE_PAY_REQUIRES_HTTPS="GOOGLE_PAY_REQUIRES_HTTPS",e.INVALID_CONFIG="INVALID_CONFIG",e.UNKNOWN="UNKNOWN",e.UNABLE_TO_LOAD="UNABLE_TO_LOAD"}(da||(da={}));var fa,ga={message:"Apple Pay is only available on Safari.",type:"BROWSER_NOT_SUPPORTED"},ma={message:"Device does not support Apple Pay.\nSee: https://developer.squareup.com/docs/web-payments/apple-pay#prerequisites-and-assumptions",type:"DEVICE_NOT_SUPPORTED"},va={message:"Browser does not support Google Pay. \nSee: https://developer.squareup.com/docs/web-payments/google-pay#prerequisites-and-assumptions",type:"BROWSER_NOT_SUPPORTED"},ya={message:"Google Pay requires HTTPS. \nSee: https://developer.squareup.com/docs/web-payments/google-pay#prerequisites-and-assumptions",type:"BROWSER_NOT_SUPPORTED"},Ea={message:"Configuration is invalid.",type:"INVALID_CONFIG"},_a={message:"Temporarily unable to register the payment method.",type:"UNABLE_TO_LOAD"},Sa={message:"An unknown error has occurred.",type:"UNKNOWN"};!function(e){e.COUNTRY_NOT_SUPPORTED="COUNTRY_NOT_SUPPORTED",e.APPLICATION_DISABLED="APPLICATION_DISABLED",e.MISSING_LOCATION_ID="MISSING_LOCATION_ID",e.UNVERIFIED_DOMAIN="UNVERIFIED_DOMAIN",e.NOT_ONBOARDED="NOT_ONBOARDED",e.US_AND_UK_MERCHANT_ONLY="US_AND_UK_MERCHANT_ONLY",e.US_MERCHANT_ONLY="US_MERCHANT_ONLY",e.INTERNAL_ERROR="INTERNAL_ERROR",e.DOMAIN_NOT_REGISTERED="DOMAIN_NOT_REGISTERED"}(fa||(fa={}));var Aa={APPLICATION_DISABLED:{message:"Wallet is disabled for your application.",type:"APPLICATION_DISABLED"},COUNTRY_NOT_SUPPORTED:{message:"Wallet is not available in this merchant country.",type:"COUNTRY_NOT_SUPPORTED"},DOMAIN_NOT_REGISTERED:{message:"Your website's domain is not registered for use with Apple Pay.\nSee: https://developer.squareup.com/docs/web-payments/apple-pay#production-configuration",type:"DOMAIN_NOT_REGISTERED"},INTERNAL_ERROR:{message:"There was a temporary error determining your website's payment method status",type:"INTERNAL_ERROR"},MISSING_LOCATION_ID:{field:"locationId",message:"Missing locationId in the payment request configuration.\nSee: https://developer.squareup.com/reference/sdks/web/payments/objects/Payments",type:"MISSING_LOCATION_ID"},NOT_ONBOARDED:{message:"Your merchant account has not yet been onboarded for this payment method. Please visit the Seller Dashboard to enable the payment method",type:"NOT_ONBOARDED"},UNVERIFIED_DOMAIN:{message:"Your website's domain is not verified for use with Apple Pay. Please visit the Square Developer Dashboard at https://developer.squareup.com/ to register your domain for use with Apple Pay",type:"UNVERIFIED_DOMAIN"},US_AND_UK_MERCHANT_ONLY:{message:"Wallet is available for US and UK merchants only.",type:"US_AND_UK_MERCHANT_ONLY"},US_MERCHANT_ONLY:{message:"Wallet is available for US merchants only.",type:"US_MERCHANT_ONLY"}};class Ia extends Xn{constructor(e,t,r){var n="".concat(e," was called with a missing or invalid parameter. '").concat(t,"' is required");r&&(n+=" and must be a(n) ".concat(r)),super("".concat(n,".")),this.name="InvalidFunctionArgumentError",Object.setPrototypeOf(this,Ia.prototype)}}class Oa extends Xn{constructor(e){super("One or more of the arguments needed are missing or invalid."),this.argumentErrors=e,this.name="InvalidArgumentsError",Object.setPrototypeOf(this,Oa.prototype)}}class ba{constructor(){this.listeners={}}addEventListener(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}removeEventListener(e,t){if(e in this.listeners)for(var r=this.listeners[e],n=0;n<r.length;n++)r[n]===t&&(r.splice(n,1),n--)}dispatchEvent(e,t){if(e in this.listeners)for(var r=new no(e,t),n=[...this.listeners[e]],i=0,o=n.length;i<o;i++)try{n[i](r)}catch(e){console.error(e)}}hasEventListener(e){return e in this.listeners&&this.listeners[e].length>0}}var Ta=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).slice(1)}return"".concat(e()+e(),"-").concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e()).concat(e()).concat(e())};class Ca{constructor(e,t,r,n){this.metricsLogger=e,this.eventSource=r,this.session=t,this.paymentMethodTrackingId=n}logEvent(e,t){Qo(e)?this.logMetricEvent({errorMessage:t,event:e,eventSource:this.eventSource}):Ko(e)?this.logMetricEvent({event:e,eventConfigurationValues:t,eventSource:this.eventSource}):this.logMetricEvent({event:e,eventSource:this.eventSource,sloStatus:t})}setPaymentMethodTrackingId(e){this.paymentMethodTrackingId=e}getPaymentMethodTrackingId(){return this.paymentMethodTrackingId}logMetricEvent(e){return this.metricsLogger.logEvent(e,this.session.instanceId,this.session.sessionId,this.paymentMethodTrackingId)}}var wa,Ra=fo(2);r(5794),function(e){e[e.DETACHED=0]="DETACHED",e[e.ATTACHED=1]="ATTACHED",e[e.DESTROYED=2]="DESTROYED"}(wa||(wa={}));var Pa=[Ci,Ri,wi,Mi];function Na(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Da(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Na(o,n,i,s,a,"next",e)}function a(e){Na(o,n,i,s,a,"throw",e)}s(void 0)}))}}class La{constructor(e){this.status=wa.DETACHED,this.eventTarget=new ba,this.eventBuffer={},this.context=e}get session(){return this.context.getSession()}get messenger(){return this.context.messenger}get metricsHandler(){return this.context.metricsHandler}get errorLogger(){return this.context.errorLogger}static withErrorCapture(e,t,r){return Da((function*(){try{return yield Promise.resolve(e(...arguments))}catch(e){throw So.isInstanceOf(e,Pa)?e:(t.captureException(e),new Ui("using ".concat(r)))}}))}addEventListener(e,t){this.eventTarget.addEventListener(e,t),e in this.eventBuffer&&this.eventBuffer[e].length>0&&(this.eventBuffer[e].forEach((t=>this.eventTarget.dispatchEvent(e,t))),this.eventBuffer[e]=[])}hasEventListener(e){return this.eventTarget.hasEventListener(e)}removeEventListener(e,t){this.eventTarget.removeEventListener(e,t)}destroy(){return Promise.resolve(!0)}detach(){return Promise.resolve(!0)}dispatchEvent(e,t){this.hasEventListener(e)?this.eventTarget.dispatchEvent(e,t):(e in this.eventBuffer||(this.eventBuffer[e]=[]),this.eventBuffer[e].push(t))}throwIfDestroyed(){if(this.status===wa.DESTROYED)throw new Ri(this.methodType)}throwIfDestroyedOrAlreadyAttached(){if(this.throwIfDestroyed(),this.status===wa.ATTACHED)throw new Ci(this.methodType)}throwIfDestroyedOrNotAttached(){if(this.throwIfDestroyed(),this.status!==wa.ATTACHED)throw new wi(this.methodType)}}var xa,ka={message:"the tokenization request is already in process",type:"TOKENIZATION_IN_PROCESS"};class Ma{constructor(e){this.id=Ta(),this.context=e}request(e,t){return this.context.messenger.request(e,{body:t,featureFlagValues:this.context.getFeatureFlagValues(),paymentMethodInstanceId:this.id,paymentMethodTrackingId:this.context.getPaymentMethodTrackingId(),session:this.context.getSession()})}initializeMessageBus(e){var t=this,r=function(e){t.context.messenger.onMessage({listener(t){e(t)},messageType:"".concat(n,":").concat(t.id)})};for(var[n,i]of Object.entries(e))r(i)}}function Ua(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}!function(e){e.CREATE_OAUTH_PLAID_LINK_SESSION="CREATE_OAUTH_PLAID_LINK_SESSION",e.REQUEST_ACH_BANK_NONCE="REQUEST_ACH_BANK_NONCE"}(xa||(xa={}));var ja=new Set(["ITEM_ERROR"]),Ha=new Set(["en","es"]),Fa=["US"];r(3108);class Ba extends Error{constructor(e,t,r){super(`error loading script ${e}: ${t} ${r?r.toString():""}`),this.name="ScriptLoaderError",Object.setPrototypeOf(this,Ba.prototype)}}const qa={};function Va(e){delete qa[e],document.getElementById(e)?.remove()}function Ga(e,t){const r=t();if(void 0!==r)return Promise.resolve(r);if(e.id in qa)return qa[e.id];const n=document.createElement("script");for(const t in e){const r=e[t];void 0!==r&&n.setAttribute(t,r)}return qa[e.id]=new Promise(((r,i)=>{n.onload=()=>{const n=t();void 0===n?(Va(e.id),i(new Ba(e.src,"location returned undefined"))):r(n)},n.onerror=(t,r,n,o,s)=>{Va(e.id),i(new Ba(e.src,"Unknown error occurred",s))}})),document.body.appendChild(n),qa[e.id]}function za(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $a(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ya(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Wa(){var e;return e=function*(e,t,r,n){try{var i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?za(Object(r),!0).forEach((function(t){$a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):za(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:"square-payments-".concat(e,"-script")},t);return yield Ga(i,(()=>r.split(".").reduce(((e,t)=>null==e?void 0:e[t]),window)))}catch(e){throw n.captureException(e),new Ti(_a)}},Wa=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Ya(o,n,i,s,a,"next",e)}function a(e){Ya(o,n,i,s,a,"throw",e)}s(void 0)}))},Wa.apply(this,arguments)}var Ka={load:function(e,t,r,n){return Wa.apply(this,arguments)}};function Xa(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Qa(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Xa(o,n,i,s,a,"next",e)}function a(e){Xa(o,n,i,s,a,"throw",e)}s(void 0)}))}}var Ja=(e,t)=>Qa((function*(){var r=new Ma(e),n=function(e,t,r,n){var i;function o(){var a;return a=function*(){var o=yield function(e,t){var r=e.getSession();if(!r.locationId)throw new Ui("locationId not defined when creating OAuth Plaid Link Session");var n=s.windowNavigationLanguage.slice(0,2),i={createOAuthPlaidLinkSessionRequest:{clientId:r.applicationId,languageCode:n,locationId:r.locationId,redirectUri:""}};return t.request(xa.CREATE_OAUTH_PLAID_LINK_SESSION,i)}(t,r);return function(r){return new Promise(((o,a)=>{var c=s.windowNavigationLanguage.split("-")[0];Ha.has(c)||(c="en");var{errorLogger:u,metricsHandler:l,isTestMerchant:d}=t,h="sandbox";Sn.env!==En.production||d||(h="production"),i=e.create({clientName:"Square, Inc.",countryCodes:Fa,env:h,language:c,onEvent:(e,t)=>{e!==Bn.ERROR||ja.has(t.error_type)||u.captureException(new Ho("PlaidErrorEvent: ".concat(JSON.stringify(t)),Xi.ACH)),n.onEvent(e,t)},onExit:(e,t)=>{e&&(l.logEvent("EXTERNAL_SESSION:ERROR"),ja.has(e.error_type)||u.captureException(new Ho("PlaidErrorOnExit: ".concat(JSON.stringify(e),", Metadata: ").concat(t),Xi.ACH))),o({kind:"canceled"})},onSuccess:(e,t)=>{if(!t||!t.accounts||!t.accounts[0]){l.logEvent("EXTERNAL_SESSION:ERROR");var n=new Error("No account selected but expected account, metadata: ".concat(JSON.stringify(t)));return u.captureException(n),void a(n)}l.logEvent("EXTERNAL_SESSION:OK"),o({gringottsSessionToken:r.gringottsSessionToken,kind:"success",publicToken:e,selectedBankAccountId:t.accounts[0].id})},product:["auth"],token:r.plaidLinkToken}),l.logEvent("EXTERNAL_SESSION:START"),i.open()}))}(o)},o=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=a.apply(e,t);function o(e){Ua(i,r,n,o,s,"next",e)}function s(e){Ua(i,r,n,o,s,"throw",e)}o(void 0)}))},o.apply(this,arguments)}return{beginFlow:function(){return o.apply(this,arguments)},destroy:function(){i&&(i.exit({force:!0}),i.destroy(),i=void 0)}}}(yield Ka.load("plaid-link",{src:"https://cdn.plaid.com/link/v2/stable/link-initialize.js"},"Plaid",e.errorLogger),e,r,{onEvent:t});function i(){return i=Qa((function*(e){var t=yield n.beginFlow();if("success"===t.kind){var r=yield function(e,t,r,n){return o.apply(this,arguments)}(e.accountHolderName,t.publicToken,t.selectedBankAccountId,t.gringottsSessionToken);return r}return{status:Ji.CANCEL}})),i.apply(this,arguments)}function o(){return(o=Qa((function*(t,n,i,o){yield e.waitForAnalyticsAndProofOfWorkCompletion();var s=e.getSession(),a={accountHolderName:t,gringottsSessionToken:o,plaidPublicToken:n,selectedPlaidBankAccountId:i},c={bankNonceRequest:{analyticsToken:s.analyticsToken,clientId:s.applicationId,instanceId:s.instanceId,locationId:s.locationId,paymentMethodTrackingId:e.getPaymentMethodTrackingId(),plaidLinkData:a,sessionId:s.sessionId,websdkVersion:Sn.VERSION,websiteUrl:s.sourceUrl}};try{var u=yield r.request(xa.REQUEST_ACH_BANK_NONCE,c);return e.setPaymentMethodTrackingId(u.paymentMethodTrackingId),{accountDetails:u.accountDetails,bankNonce:u.bankNonce,status:Ji.OK}}catch(e){throw e instanceof Mi?e:new Mi([Co.UNKNOWN])}}))).apply(this,arguments)}return Object.freeze({destroy:function(){n.destroy()},run:function(e){return i.apply(this,arguments)}})}))();class Za extends Error{constructor(e){super(e),this.name="InvalidAuthorizationParameter",Object.setPrototypeOf(this,Za.prototype)}}class ec extends Error{constructor(e,t){super(`The listener provided for event type ${e} threw an error: ${t}`),this.name="InvalidEventListenerError",Object.setPrototypeOf(this,ec.prototype)}}class tc{constructor(){this.listeners=new Map,this.eventBuffer=new Map}addEventListener(e,t,r={}){if(!0===r.once){const r=t;t=n=>{this.removeEventListener(e,t),r(n)}}if(r.signal){if(r.signal.aborted)return;r.signal.addEventListener("abort",(()=>{this.removeEventListener(e,t)}))}const n=this.listeners.get(e);void 0===n?this.listeners.set(e,[t]):n.push(t);const i=this.eventBuffer.get(e);i&&(i.forEach((e=>{this.dispatchEvent(e)})),this.eventBuffer.set(e,[]))}removeEventListener(e,t){const r=this.listeners.get(e);if(void 0!==r)for(let e=0;e<r.length;e++)r[e]===t&&(r.splice(e,1),e--)}hasEventListener(e){const t=this.listeners.get(e);return void 0!==t&&t.length>0}dispatchEvent(e){if(this.hasEventListener(e.type)){const t=[...this.listeners.get(e.type)];for(const r of t)try{r(e)}catch(t){throw new ec(e.type,t.message)}}else{const t=this.eventBuffer.get(e.type);void 0===t?this.eventBuffer.set(e.type,[e]):t.push(e)}}}class rc{constructor(){this.eventTarget=new tc}addEventListener(e,t){this.eventTarget.addEventListener(e,(e=>{t(e.detail)}))}dispatchEvent(e){this.eventTarget.dispatchEvent(new CustomEvent(e.type,{detail:e}))}}const nc={get DEV_ENV(){return"development"},get IFRAME_NAME(){return"ach_authz"},get PRODUCTION_ENV(){return"production"},get SANDBOX_ENV(){return"sandbox"},get TEST_ENV(){return"test"},getDebitAuthHostname(e){switch(e){case this.PRODUCTION_ENV:return"https://connect.squareup.com";case this.SANDBOX_ENV:return"https://connect.squareupsandbox.com";default:return"https://connect.squareupstaging.com"}},getSDKBaseUrlForEnv(e){switch(e){case"production":return"https://web.squarecdn.com";case"sandbox":return"https://sandbox.web.squarecdn.com";case"development":return"https://localhost:1779";default:return"https://staging.web.squarecdn.com"}}},ic=function(e,t){const r=document.createElement("iframe");return new Promise(((n,i)=>{r.onerror=e=>{i(e)},r.onload=()=>{n(r)},r.setAttribute("id","ach-auth-enclave"),r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.setAttribute("style","position: fixed; inset: 0px; z-index: 2147483647; border-width: 0px; display: block; overflow: hidden auto;"),r.setAttribute("src",`${nc.getSDKBaseUrlForEnv(e)}${"development"===e?"":`/${t}`}/ach-authz-sdk/enclave.html`),document.body.append(r)}))},oc=function(e){e.parentElement?.removeChild(e)};class sc extends Error{constructor(e){super(e),this.name="IframeMessengerImplementationError",Object.setPrototypeOf(this,sc.prototype)}}class ac extends Error{constructor(e){super(e),this.name="IframeMessengerInternalMessageError",Object.setPrototypeOf(this,ac.prototype)}}class cc extends Error{constructor(e,t,r){void 0!==r?(super(`Messenger has not received an acknowledgement of message ${e} with id ${t} from iframe id=${r} which ${null===document.getElementById(r)?"does not exist":"exists"}`),this.iframeID=r):super(`Messenger has not received an acknowledgement of message ${e} with id ${t}, no iframeID was set`),this.type=e,this.id=t,this.name="IframeMessengerTimeoutError",Object.setPrototypeOf(this,cc.prototype)}}const uc="channel:connected",lc="channel:connecting",dc="channel:close",hc="channel:error";class pc{constructor(e){this.receiveMessage=e=>{switch(e.data){case this.messageWithName(lc):this.handleConnecting(e);break;case this.messageWithName(uc):this.handleConnected();break;case this.messageWithName(dc):this.close();break;case this.messageWithName(hc):break;default:this.handleMessage(e)}},this.connected=!1,this.listeners=[],this.messageBuffer=[],this.name=void 0!==e?`:${e}`:""}set onmessage(e){this.listeners.push(e)}close(){this.port&&(this.postMessage(this.messageWithName(dc)),this.port.close(),this.port=void 0,this.connected||window.removeEventListener("message",this.receiveMessage)),this.connected=!1}connect(e){if(this.connected)throw new sc("message channel is already connected");if(e){if(void 0===e.origin)throw new sc("message channel remote.origin must be defined");if(null===e.window)throw new sc("message channel remote.window cannot be null");const t=new MessageChannel;this.setupPort(t.port1),e.window.postMessage(this.messageWithName(lc),e.origin,[t.port2])}else window.addEventListener("message",this.receiveMessage)}setErrorHandler(e){this.errorHandler=e}postMessage(e){this.port&&this.connected?this.port.postMessage(e):this.messageBuffer.push(e)}handleConnecting(e){if(this.connected)throw new sc("message channel should not be connecting because already connected");window.removeEventListener("message",this.receiveMessage),e.ports[0]&&(this.setupPort(e.ports[0]),this.postMessage(this.messageWithName(uc)),this.connectionEstablished())}handleConnected(){if(this.connected)throw new sc("message channel already connected");this.connectionEstablished()}connectionEstablished(){for(this.connected=!0;this.messageBuffer.length>0;)this.postMessage(this.messageBuffer.shift())}handleMessage(e){this.listeners.forEach((t=>{t(e)}))}setupPort(e){this.port=e,this.port.onmessage=this.receiveMessage,this.port.onmessageerror=e=>{this.postMessage(this.messageWithName(hc)),this.errorHandler&&this.errorHandler(new sc("message channel failed to deserialize message"),e)}}messageWithName(e){return e+this.name}}function fc(){return`${Date.now()}${Math.floor(8e3*Math.random())}`}var gc,mc;!function(e){e.ACK="ack",e.OK="ok",e.ERROR="error"}(gc||(gc={}));class vc{constructor(e={}){this.messageListeners=new Map,this.channel=new pc(e.name),this.channel.onmessage=this.handleMessage.bind(this),void 0!==e.payloadSerializer&&(this.payloadSerializer=e.payloadSerializer),void 0!==e.errorSerializer&&(this.errorSerializer=e.errorSerializer)}setErrorHandler(e){this.errorHandler=e,this.channel.setErrorHandler(e)}sendOneWayMessage(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:fc(),mustAcknowledge:!1,mustRespond:!1,payload:r,type:e})}sendMessage(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:fc(),mustAcknowledge:!0,mustRespond:!1,payload:r,type:e})}request(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:fc(),mustAcknowledge:!0,mustRespond:!0,payload:r,type:e})}respond(e,t){const r=`${e.type}:${gc.OK}`;let n=t;return void 0!==this.payloadSerializer&&(n=this.payloadSerializer.serialize(t)),this.postResponse(r,e,n)}reject(e,t){const r=`${e.type}:${gc.ERROR}`;let n=t;return void 0!==this.errorSerializer&&(n=this.errorSerializer.serialize(t)),this.postResponse(r,e,n)}onMessage(e,t=fc()){return this.addMessageEventListener(e,t),t}connect(e,t){void 0!==t&&(this.iframeID=t),this.channel.connect(e)}close(){this.channel.close()}handleMessage(e){const t=this.messageListeners.get(e.data.type);void 0!==e.data.type&&"undefined"!==e.data.type?t?(e.data.mustAcknowledge&&this.acknowledge(e.data),t.forEach((t=>{t.forEach((t=>{t(e)}))}))):this.errorHandler&&this.errorHandler(new sc(`Listener does not exist for ${e.data.type}. Add one to your messenger instance:\n            messenger.onMessage({\n                    listener: (msg) => {},\n                    messageType: '${e.data.type}',\n                });\n          `),e):void 0!==this.errorHandler&&this.errorHandler(new ac("Received a messenger message with an undefined type"),e)}logMessengerTimeout(e){const t=new cc(e.type,e.id,this.iframeID);this.errorHandler&&this.errorHandler(t,new MessageEvent(e.type,{data:e}))}handleMessageContract(e){const{errorSerializer:t}=this,{payloadSerializer:r}=this;if(!e.mustAcknowledge)return new Promise((e=>{e({})}));let n;const i=()=>{[gc.ACK,gc.OK,gc.ERROR].forEach((t=>{const r=this.messageListeners.get(`${e.type}:${t}`);void 0!==r&&r.delete(n)}))},o=window.setTimeout((()=>{this.logMessengerTimeout(e)}),1e4);return new Promise(((s,a)=>{n=this.onMessage({listener(){clearTimeout(o),e.mustRespond||(i(),s({}))},messageType:`${e.type}:${gc.ACK}`}),this.onMessage({listener(e){i();const{payload:t}=e.data;if(void 0===r)s(t);else{const e=r.deserialize(t);s(e)}},messageType:`${e.type}:${gc.OK}`},n),this.onMessage({listener(e){i();const{payload:r}=e.data;if(void 0===t)a(r);else{const e=t.deserialize(r);a(e)}},messageType:`${e.type}:${gc.ERROR}`},n)}))}acknowledge(e){const t=`${e.type}:${gc.ACK}`;return this.message({id:e.id,mustAcknowledge:!1,mustRespond:!1,payload:void 0,type:t})}postResponse(e,t,r){return this.message({id:t.id,mustAcknowledge:!0,mustRespond:!1,payload:r,type:e})}message(e){const t=this.handleMessageContract(e);return e.type&&"undefined"!==e.type||void 0===this.errorHandler||this.errorHandler(new ac("attempting to send a messenger message with an undefined type")),this.channel.postMessage(e),t}addMessageEventListener(e,t){const{messageType:r,listener:n}=e,i=this.messageListeners.get(r);if(i){const e=i.get(t);e?e.push(n):i.set(t,[n])}else this.messageListeners.set(r,new Map([[t,[n]]]))}}!function(e){e.CAPTURE_AUTHORIZATION="CAPTURE_AUTHORIZATION"}(mc||(mc={}));const yc=function(){const e={name:nc.IFRAME_NAME};return new vc(e)},Ec=async function(e,t,r){const n=nc.getSDKBaseUrlForEnv(r);e.connect({origin:n,window:t.contentWindow},t.id),await e.sendMessage("INITIALIZE",{env:r})},_c={build(e,t){const r=yc(),n=new rc;return Promise.resolve(Object.freeze({addEventListener:function(e,t){n.addEventListener(e,t)},captureAuthorization:async function(i){let o;try{!function(e){if(!e.idempotencyKey)throw new Za("idempotencyKey is invalid");if(!e.applicationId)throw new Za("applicationId is invalid");if(!e.locationId)throw new Za("locationId is invalid");if(!e.total)throw new Za("total needs to be provided");if("number"!=typeof e.total.amount)throw new Za("amount needs to be a number");if(!e.total.currencyCode)throw new Za("total needs to be valid");if("CHARGE"===e.intent){if(!e.bankNonce&&!e.bankAccountId)throw new Za("one of bankNonce or bankAccountId needs to be provided");if(e.bankNonce&&e.bankAccountId)throw new Za("only one of bankNonce or bankAccountId needs to be provided")}else if("RECURRING_CHARGE"===e.intent){if(!e.bankAccountId)throw new Za("bankAccountId needs to be provided for recurring payments");if("WEEKLY"!==e.cadence&&"MONTHLY"!==e.cadence)throw new Za("Unsupported cadence. Must be one of: WEEKLY, MONTHLY");if(!e.startDate)throw new Za("Invalid startDate")}}(i),o=await ic(e,t),await Ec(r,o,e);const s=await r.request(mc.CAPTURE_AUTHORIZATION,i);"success"===s.kind?n.dispatchEvent({token:s.token,type:"signed"}):n.dispatchEvent({type:"canceled"})}catch(e){n.dispatchEvent({error:e,type:"error"})}o&&oc(o)}}))}};var Sc=["bankAccountDetails"];function Ac(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ic(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oc(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}var bc={build(e){var{env:t,transactionId:r,session:n,context:i,onSigned:o,onCanceled:s,onError:a}=e;function c(){var e;return e=function*(e){var c=yield _c.build(t,Sn.VERSION);i.metricsHandler.logEvent("ACH_AUTH:START");var{bankAccountDetails:u}=e,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,Sc);c.addEventListener("signed",(function(e){o(e.token,u),i.metricsHandler.logEvent("ACH_AUTH:OK")})),c.addEventListener("canceled",(function(){i.metricsHandler.logEvent("ACH_AUTH:CANCEL"),s()})),c.addEventListener("error",(function(e){var t=e.error;a(t instanceof Za?new pi(t.message):new Ui("authorizing the payment")),i.metricsHandler.logEvent("ACH_AUTH:ERROR"),i.errorLogger.captureException(t)})),yield c.captureAuthorization(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ac(Object(r),!0).forEach((function(t){Ic(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ac(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({applicationId:n.applicationId,idempotencyKey:r,locationId:n.locationId},l))},c=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Oc(o,n,i,s,a,"next",e)}function a(e){Oc(o,n,i,s,a,"throw",e)}s(void 0)}))},c.apply(this,arguments)}return Object.freeze({run:function(e){return c.apply(this,arguments)}})}},Tc=function(){var e=document.createElement("div");return e.setAttribute("style","position:fixed; top: 0; left: 0; width: 100vw; height: 100%; z-index: 3; background-color: ".concat("rgba(0, 0, 0, 0.8)","; opacity: 0;")),document.body.appendChild(e),e.style.transition="opacity ".concat("cubic-bezier(0.26, 0.1, 0.48, 1)"," ").concat("0.24s"),setTimeout((function(){e.style.opacity="1"})),new Promise((function(t){setTimeout((function(){t(e)}),240)}))},Cc=function(e){e&&(e.style.transition="opacity ".concat("cubic-bezier(0.52, 0, 0.74, 0)"," ").concat("0.16s"),setTimeout((function(){e.style.opacity="0"})),setTimeout((function(){e.remove()}),160))};function wc(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Rc(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){wc(o,n,i,s,a,"next",e)}function a(e){wc(o,n,i,s,a,"throw",e)}s(void 0)}))}}class Pc extends La{constructor(e,t){super(e),this.methodType=Xi.ACH,this.tokenizeInProgress=!1,this.wasFirstInteractionCalled=!1;try{!function(e){if(e&&e.length>0){var t;try{t=new URL(e)}catch(t){throw new mi("redirectURI",e,"Must be a valid URI")}if([...t.searchParams.values()].length>0)throw new mi("redirectURI",e,"URI must not contain query parameters");return!0}throw new mi("redirectURI","".concat(e),"Must be a valid URI")}(null==t?void 0:t.redirectURI)}catch(e){this.metricsHandler.logEvent("INVALID_REDIRECT_URI",e.message),console.warn(e.message)}try{!function(e){if(e&&e.length>0){if(e.length>50)throw new mi("transactionId",e,"String must be between 1 and 50 characters");return!0}throw new mi("transactionId","".concat(e),"String must be between 1 and 50 characters")}(null==t?void 0:t.transactionId)}catch(e){console.warn(e.message)}this.transactionId=(null==t?void 0:t.transactionId)||Ta()}initialize(){var e=this;return Rc((function*(){var t=e.dispatchPlaidEvent.bind(e);e.plaidNonceFlow=yield Ja(e.context,t),e.achAuthFlow=bc.build({context:e.context,env:Sn.env,onCanceled:e.dispatchCancelResult.bind(e),onError:e.dispatchError.bind(e),onSigned:e.dispatchSuccessfulTokenResult.bind(e),session:e.session,transactionId:e.transactionId})}))()}tokenize(e){var t=this;return Rc((function*(){try{if(t.throwIfDestroyed(),t.tokenizeInProgress)throw new Mi([ka]);if(!e||!e.accountHolderName.trim())throw new ei;var r=t.context.getFeatureFlagValues().can_use_ach_auth;if(!function(e,t){switch(t){case"NO_SUPPORT":return Dc(e);case"SUPPORTED":case"LEGACY":return!0;case"REQUIRED":return!Dc(e);default:return!1}}(e,r))throw new pi("Invalid parameter format for ACH tokenize");if(!t.hasEventListener(Bn.ON_TOKENIZATION)){var n="Add event listener for '".concat(Bn.ON_TOKENIZATION,"' before calling tokenize.");console.error("".concat(n," This will result in an error when using the Plaid OAuth flow."))}if(void 0===t.achAuthFlow||void 0===t.plaidNonceFlow)throw new Ui("Must call initialize() before tokenize() call");if(t.tokenizeInProgress=!0,t.handleFirstInteraction(),function(e){return Nc(e)&&"RECURRING_CHARGE"===e.intent}(e))return t.veil=yield Tc(),void(yield t.achAuthFlow.run({bankAccountId:e.bankAccountId,cadence:e.cadence,intent:e.intent,startDate:e.startDate,total:e.total}));if(function(e){return Nc(e)&&"CHARGE"===e.intent}(e)&&e.bankAccountId)return t.veil=yield Tc(),void(yield t.achAuthFlow.run({bankAccountId:e.bankAccountId,intent:e.intent,total:e.total}));Dc(e)?(t.context.metricsHandler.logEvent("ACH_LEGACY:START"),console.warn("You need to add two new parameters to ach.tokenize(), intent and total, before June 20, 2024 to continue processing ACH payments with the Web Payments SDK. Please complete these steps ASAP to prevent failed ACH payments: https://developer.squareup.com/docs/web-payments/add-ach#step-2-get-the-payment-token-from-the-ach-payment-method")):t.veil=yield Tc();var i=yield t.plaidNonceFlow.run(e);if(Dc(e)||"LEGACY"===r)switch(t.context.metricsHandler.logEvent("ACH_LEGACY:OK"),i.status){case Ji.OK:var o=t.buildSuccessfulTokenResult(i.bankNonce,i.accountDetails);return t.dispatchTokenizationEvent(o),t.resetFirstInteraction(),o;case Ji.CANCEL:var s=t.buildCancelTokenResult();return t.dispatchTokenizationEvent(s),s;default:throw new Ui("Unexpected tokenize flow status")}return void(yield t.runAchAuthFlowBasedOnPlaidResult(i,e))}catch(e){throw t.dispatchError(e),e}finally{t.tokenizeInProgress=!1,Cc(t.veil)}}))()}destroy(){var e;return this.status=wa.DESTROYED,this.metricsHandler.logEvent("DESTROYED"),null===(e=this.plaidNonceFlow)||void 0===e||e.destroy(),Promise.resolve(!0)}addEventListener(e,t){this.metricsHandler.logEvent("EVENT_LISTENER_ADDED",e),super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}runAchAuthFlowBasedOnPlaidResult(e,t){var r=this;return Rc((function*(){if(e.status===Ji.CANCEL)r.dispatchTokenizationEvent(r.buildCancelTokenResult());else switch(t.intent){case"CHARGE":yield r.achAuthFlow.run({bankAccountDetails:e.accountDetails,bankNonce:e.bankNonce,intent:t.intent,total:t.total});break;case"STORE":r.dispatchSuccessfulTokenResult(e.bankNonce,e.accountDetails);break;default:throw new pi("Unsupported intent ".concat(t.intent,". Must be one of: CHARGE, STORE, RECURRING_CHARGE"))}}))()}resetFirstInteraction(){this.wasFirstInteractionCalled=!1}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent("FIRST_INTERACTION:OK"))}buildCancelTokenResult(){return{status:Ji.CANCEL}}buildSuccessfulTokenResult(e,t){var r={status:Ji.OK,token:e};return t&&(r.details={bankAccount:t,method:Xi.ACH}),r}dispatchCancelResult(){this.dispatchTokenizationEvent(this.buildCancelTokenResult())}dispatchSuccessfulTokenResult(e,t){this.resetFirstInteraction();var r=this.buildSuccessfulTokenResult(e,t);this.dispatchTokenizationEvent(r)}dispatchError(e){this.dispatchEvent(Bn.ON_TOKENIZATION,{error:e})}dispatchPlaidEvent(e,t){this.dispatchEvent(e,t)}dispatchTokenizationEvent(e){this.dispatchEvent(Bn.ON_TOKENIZATION,{tokenResult:e})}}function Nc(e){return"intent"in e}function Dc(e){return!("intent"in e)}r(9529),r(1235);var Lc,xc,kc=[Di,Li,xi,ki,Ci,Ri,Ui],Mc=[wi,xi,Di,Li,ki],Uc=[Mi,wi],jc={buildIframeWithAttributes:function(e,t){var r=document.createElement("iframe");return new Promise(((n,i)=>{r.onerror=e=>{i(e)},r.onload=()=>{n(r)},Object.entries(e).forEach((e=>{var[t,n]=e;r.setAttribute(t,n)})),t?t.appendChild(r):document.body.appendChild(r)}))},removeIframe:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}};!function(e){e.CONFIGURE="configure",e.DESTROY="destroy",e.LOAD_CARDS_FORM="loadCardsForm",e.REQUEST_CARD_NONCE_IF_VALID_FORM="requestCardNonceIfValidForm",e.SET_FOCUS="setFocus",e.CLEAR="clear",e.SET_ERROR="setError"}(Lc||(Lc={})),function(e){e.CARD_BRAND_CHANGED="cardBrandChanged",e.ERROR_CLASS_ADDED="errorClassAdded",e.ERROR_CLASS_REMOVED="errorClassRemoved",e.FOCUS_CLASS_ADDED="focusClassAdded",e.FOCUS_CLASS_REMOVED="focusClassRemoved",e.POSTAL_CODE_CHANGED="postalCodeChanged",e.SET_POSTAL_COUNTRY="setPostalCountry",e.ESCAPE="escape",e.SUBMIT="submit"}(xc||(xc={}));var Hc=new Set(["DIV","SPAN"]),Fc=new Set(["DIV","SPAN"]),Bc=new Set(["DIV","SPAN","BUTTON"]);function qc(e,t){var r;if(function(e){return"string"==typeof e}(e)){var n=document.querySelector(e);if(!n)throw new ui(e);r=n}else{if(!(e instanceof HTMLElement))throw new Pi(e,t);if(r=e,!document.contains(r))throw new ui(r)}if(!t.has(r.nodeName))throw new Pi(r,t);return r}function Vc(e){return qc(e,Hc)}function Gc(e){return qc(e,Bc)}var zc=["top","right","bottom","left"],$c="sq-focus",Yc="sq-error",Wc=".".concat($c),Kc=".".concat(Yc),Xc=(r(8319),{ASPECT_RATIO:/^\d+\/\d+$/,HEX:/^#([\dA-Fa-f]{3}|[\dA-Fa-f]{6})$/,NEGATIVE_EM:/^-\d*\.?\d+em$/,NEGATIVE_PERCENT:/^\d*\.?\d+%$/,NEGATIVE_PT:/^-\d*\.?\d+pt$/,NEGATIVE_PX:/^-\d*\.?\d+px$/,POSITIVE_EM:/^\d*\.?\d+em$/,POSITIVE_PERCENT:/^\d*\.?\d+%$/,POSITIVE_PT:/^\d*\.?\d+pt$/,POSITIVE_PX:/^\d*\.?\d+px$/,POSITIVE_RESOLUTION:/^\d*\.?\d+(?:dpi|dpcm|dppx|x)$/,RGB:/^rgb\((\s*\d{1,3},){2}\s*\d{1,3}\)$/,RGBA:/^rgba\((\s*\d{1,3},){3}\s*(1|0*.\d*)\)$/}),Qc=/\s(?![^(]*\))/,Jc=new Set(["screen","all","print","speech"]),Zc=new Set(["and"]),eu=new Set(["not","only"]),tu=new Set(["portrait","landscape"]),ru=new Set(["xx-small","x-small","small","medium","large","x-large","xx-large"]),nu=new Set(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"]),iu=new Set([100,200,300,400,500,600,700,800,900]),ou=new Set(["100","200","300","400","500","600","700","800","900","normal","bold","bolder","lighter"]),su=new Set(["normal"]),au=new Set(["smaller","larger"]),cu=new Set(["andale mono","arial","arial black","arial narrow","arial rounded mt bold","avant garde","baskerville","big caslon","bodoni mt","book antiqua","brush script mt","calibri","calisto mt","cambria","candara","century gothic","charcoal","comic sans ms","consolas","copperplate","copperplate gothic light","courier","courier new","cursive","didot","fantasy","franklin gothic medium","futura","garamond","geneva","georgia","gill sans","goudy old style","helvetica","helvetica neue","hoefler text","impact","lucida bright","lucida console","lucida grande","lucida sans unicode","lucida sans typewriter","monaco","monospace","optima","palatino","palatino linotype","papyrus","perpetua","rockwell","rockwell extra bold","sans-serif","segoe ui","serif","square market","square sans text","tahoma","times","times new roman","trebuchet ms","verdana"]),uu=new Set(["none","antialiased","subpixel-antialiased"]),lu=new Set(["grayscale","auto"]),du=new Set(["none"]);function hu(e){return null!=e&&e.split(/, ?(?![^(]*\))/).every((e=>function(e){if(null==e)return!1;if("none"===e)return!0;var t=e.split(/ (?![^(]*\))/),r=0;if("inset"===t[0]&&(t.shift(),r++),"inset"===t[t.length-1]){if(r>0)return!1;t.pop()}for(var n=0;n<2;n++){var i=t.shift();if(void 0===i||!yu(i))return!1}switch(t.length){case 0:return!0;case 1:return Su(t[0])||_u(t[0]);case 2:return _u(t[0])&&(Su(t[1])||Eu(t[1]));case 3:return _u(t[0])&&Eu(t[1])&&Su(t[2]);default:return!1}}(e)))}function pu(e){return["border-box","content-box"].includes(e)}function fu(e){return e.split(" ").every((e=>function(e){return 0===Number(e)||Lu(e)||Mu(e)}(e)))}function gu(e){var t=e.split(" ");return!(0===t.length||t.length>4)&&t.every(mu)}function mu(e){return 0===Number(e)||Lu(e)||Mu(e)}function vu(e){return 0===Number(e)||Lu(e)||Mu(e)||xu(e)||Uu(e)}function yu(e){return 0===Number(e)||Du(e)||ku(e)}function Eu(e){return 0===Number(e)||Du(e)||ku(e)}function _u(e){return 0===Number(e)||Lu(e)||Mu(e)}function Su(e){return null!=e&&(function(e){return nu.has(e.toLowerCase())}(e)||function(e){return Xc.HEX.test(e)}(e)||function(e){return Xc.RGB.test(e)}(e)||function(e){return Xc.RGBA.test(e)}(e))}function Au(e){return null!=e&&(function(e){return ru.has(e.toLowerCase())}(e)||function(e){return au.has(e.toLowerCase())}(e)||Lu(e)||ju(e)||Mu(e)||Hu(e))}function Iu(e){return null!==e&&e.split(", ").every((e=>{return t=e.toLowerCase().trim().replace(/["']+/g,""),cu.has(t);var t}))}function Ou(e){var t=Number(e);return Number.isNaN(t)?ou.has(e.toLowerCase()):iu.has(t)}function bu(e){return"normal"===e||ku(e)||function(e){return ju(e)||function(e){return Xc.NEGATIVE_PT.test(e)}(e)}(e)||Du(e)}function Tu(e){var t=Number(e);return!Number.isNaN(t)&&t>=0||su.has(e)||Mu(e)||Lu(e)||ju(e)||Hu(e)}function Cu(e){return uu.has(e)}function wu(e){return lu.has(e)}function Ru(e){return du.has(e)}function Pu(e){if(null===e)return!1;var t=e.toString().split(" ");return!(t.length>4)&&t.every((e=>function(e){return Lu(e)||Mu(e)||Hu(e)||0===Number(e)}(e)))}function Nu(e){if(!e.startsWith("(")||!e.endsWith(")"))return!1;var t=e.slice(1,-1),[r,n]=t.split(/: */);switch(r){case"width":case"min-width":case"max-width":case"height":case"min-height":case"max-height":case"device-width":case"min-device-width":case"max-device-width":case"device-height":case"min-device-height":case"max-device-height":return Lu(n)||Mu(n)||Hu(n);case"resolution":case"min-resolution":case"max-resolution":return function(e){return Xc.POSITIVE_RESOLUTION.test(e)}(n);case"aspect-ratio":case"min-aspect-ratio":case"max-aspect-ratio":case"device-aspect-ratio":case"min-device-aspect-ratio":case"max-device-aspect-ratio":return function(e){return Xc.ASPECT_RATIO.test(e)}(n);case"color":case"color-index":case"monochrome":return void 0===n;case"min-color":case"max-color":case"min-color-index":case"max-color-index":case"min-monochrome":case"max-monochrome":return function(e){return Number(e)>=0}(n);case"orientation":return function(e){return tu.has(e)}(n);default:return!1}}function Du(e){return Lu(e)||xu(e)}function Lu(e){return Xc.POSITIVE_PX.test(e)}function xu(e){return Xc.NEGATIVE_PX.test(e)}function ku(e){return Mu(e)||Uu(e)}function Mu(e){return Xc.POSITIVE_EM.test(e)}function Uu(e){return Xc.NEGATIVE_EM.test(e)}function ju(e){return Xc.POSITIVE_PT.test(e)}function Hu(e){return Xc.POSITIVE_PERCENT.test(e)}var Fu={sanitizeDeclarationValue:function(e,t){var r=(e=>{switch(e){case"border-color":case"background-color":case"color":case"-webkit-text-fill-color":return Su;case"-webkit-box-shadow":case"box-shadow":return hu;case"box-sizing":return pu;case"font-family":return Iu;case"font-size":return Au;case"font-weight":return Ou;case"letter-spacing":return bu;case"line-height":return Tu;case"padding":return Pu;case"-webkit-font-smoothing":return Cu;case"-moz-osx-font-smoothing":return wu;case"display":return Ru;case"border-radius":return fu;case"border-width":return gu;case"top":case"bottom":case"left":case"right":return vu;case"width":return function(e){return e};default:return}})(e);return r&&r(t)||function(e){return["unset","inherit","revert","initial"].includes(e)}(t)?t:""},validateMediaQuery:function(e){return!!(t=e).startsWith("@media")&&t.slice(7,t.length).split(/, */).every((e=>{var t=e.split(Qc);if(0===t.length)return!1;var r=0;if(!t[0].startsWith("(")){var n=0;if(eu.has(t[0])&&(n=1),t.length===n+1)return Jc.has(t[n]);if(!Jc.has(t[n])||!Zc.has(t[n+1]))return!1;r=2+n}if((t.length-r)%2==0)return!1;for(var[i,o]of Object.entries(t.slice(r)))if(!(Number(i)%2==0?Nu(o):Zc.has(o)))return!1;return!0}));var t}};function Bu(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r.length>0&&!r.includes(e))throw new Di(e);var i=So.cssProperty(e),o=Fu.sanitizeDeclarationValue(i,t);if(0===o.length)throw new Li(e,t);return n&&(o+=" !important"),So.formatCSSKeyValuePair(i,o)}function qu(e,t,r){var n=[],i=[],o=new Set(e.excludeProperties||[]);for(var[s,a]of Object.entries(t))if(!o.has(s)){var c=a||"";try{n.push(Bu(s,c,r))}catch(e){i.push(e)}}if(i.length>0)throw new ki(i);return Object.fromEntries(e.toSelectors.map((function(e){return[e,n]})))}function Vu(e,t,r){var n={},i=[];if(e.forEach((function(e){var{property:o,setAsImportant:s,toProperty:a,toSelectors:c,transformPropertyValue:u}=e,l=t[o];if(l){var d=u?u(l):l;try{var h=Bu(null!=a?a:o,d,a?[...r,a]:r,s);c.forEach((e=>{n[e]||(n[e]=[]),n[e].push(h)}))}catch(e){i.push(e)}}})),i.length>0)throw new ki(i);return n}var Gu={borderChainToDirectionValue:function(e,t){var r=t.split(" ");switch(r.length){case 1:return r[0];case 2:switch(e){case"top":case"bottom":return r[0];default:return r[1]}case 3:switch(e){case"top":return r[0];case"bottom":return r[2];default:return r[1]}case 4:switch(e){case"top":return r[0];case"right":return r[1];case"bottom":return r[2];case"left":return r[3];default:return""}default:return""}},compileStyleString:function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[],s=[...Object.keys(r.selectorMappings),...Object.keys(r.selectorPropertyMappings||{})],a=new Set(s),c=new Set(Object.values(n));Object.keys(t).forEach((e=>{c.has(e)||function(e,t){return!t&&Fu.validateMediaQuery(e)}(e,i)||o.push(new xi(e))}));var u={};function l(e){for(var[t,r]of Object.entries(e))u[t]||(u[t]=[]),u[t].push(...r)}for(var d of a){var h,p=t[d],f=r.allowedAttributes[d]||[],g=r.selectorMappings[d]||[],m=(null==r||null===(h=r.selectorPropertyMappings)||void 0===h?void 0:h[d])||[];if(p){try{l(qu(g,p,f))}catch(e){e instanceof ki&&o.push(...e.errors)}try{l(Vu(m,p,f))}catch(e){e instanceof ki&&o.push(...e.errors)}}}if(Object.keys(t).filter((e=>!a.has(e)&&Fu.validateMediaQuery(e))).forEach((i=>{try{var s=e(t[i],r,n,!0);u[i]=[s]}catch(e){o.push(...e.errors)}})),o.length>0)throw new ki(o);return function(e){var t=[];for(var[r,n]of Object.entries(e))n&&n.length>0&&t.push("\n      ".concat(r," { ").concat(n.join(" ")," }\n      "));return t.join("")}(u)}},zu="sq-card-iframe-container",$u="sq-card-wrapper",Yu="sq-card-component",Wu="sq-card-message",Ku="sq-card-message-error",Xu="sq-card-message-no-error",Qu="sq-visible",Ju=".".concat($u),Zu=".".concat(Yu),el=".".concat(zu),tl="".concat(Ju).concat(Wc),rl="".concat(Ju).concat(Kc),nl="".concat(Ju," ").concat(Zu),il="".concat(Ju," ").concat(el),ol="".concat(tl," ").concat(el),sl="".concat(rl," ").concat(el),al=".sq-card-message-error",cl=".sq-card-message-error::before",ul=".sq-card-message-no-error",ll=".sq-card-message-no-error::before",dl="".concat(el).concat("::before"),hl=["borderWidth"];function pl(e){var t=["".concat(e).concat(Kc," ").concat(dl),"".concat(e).concat(Wc," ").concat(dl)];return zc.map((e=>{return{property:"borderWidth",toProperty:e,toSelectors:t,transformPropertyValue:(r=e,function(e){var t=Gu.borderChainToDirectionValue(r,e);return"0"===t[0]?t:"-".concat(t)})};var r}))}function fl(e,t){return Gu.compileStyleString(e,function(e){var t="#".concat(e);return{allowedAttributes:{[Mn.CARD_COMPONENT]:Zi,[Mn.CARD_COMPONENT_FOCUS]:eo,[Mn.CARD_COMPONENT_ERROR]:eo,[Mn.CARD_INPUT_HELPER_TEXT]:to,[Mn.CARD_INPUT_HELPER_ICON]:ro,[Mn.CARD_INPUT_ERROR_TEXT]:to,[Mn.CARD_INPUT_ERROR_ICON]:ro},selectorMappings:{[Mn.CARD_COMPONENT]:{toSelectors:["".concat(t).concat(il)]},[Mn.CARD_COMPONENT_FOCUS]:{excludeProperties:hl,toSelectors:["".concat(t).concat(ol)]},[Mn.CARD_COMPONENT_ERROR]:{excludeProperties:hl,toSelectors:["".concat(t).concat(sl)]},[Mn.CARD_INPUT_HELPER_TEXT]:{toSelectors:["".concat(t," ").concat(ul)]},[Mn.CARD_INPUT_HELPER_ICON]:{toSelectors:["".concat(t," ").concat(ll)]},[Mn.CARD_INPUT_ERROR_TEXT]:{toSelectors:["".concat(t," ").concat(al)]},[Mn.CARD_INPUT_ERROR_ICON]:{toSelectors:["".concat(t," ").concat(cl)]}},selectorPropertyMappings:{[Mn.CARD_INPUT]:[{property:"backgroundColor",toSelectors:["".concat(t).concat(il)]}],[Mn.CARD_COMPONENT]:[{property:"borderRadius",toSelectors:["".concat(t," ").concat(dl),"".concat(t).concat(nl)]},{property:"borderWidth",toProperty:"width",toSelectors:["".concat(t).concat(il)],transformPropertyValue:e=>function(e){var t=["left","right"].map((t=>{var r=Gu.borderChainToDirectionValue(t,e);return"0"===r&&(r="0px"),r})).join(" + ");return"calc(100% - (".concat(t,"))")}(e)},...pl(t)],[Mn.CARD_COMPONENT_ERROR]:[{property:"borderColor",toSelectors:["".concat(t).concat(Kc," ").concat(dl)]},{property:"borderWidth",toSelectors:["".concat(t).concat(Kc," ").concat(dl)]}],[Mn.CARD_COMPONENT_FOCUS]:[{property:"borderColor",toSelectors:["".concat(t).concat(Wc," ").concat(dl)]},{property:"borderWidth",toSelectors:["".concat(t).concat(Wc," ").concat(dl)]}],[Mn.CARD_INPUT_ERROR_ICON]:[{property:"color",toProperty:"backgroundColor",toSelectors:["".concat(t," ").concat(cl)]}],[Mn.CARD_INPUT_HELPER_ICON]:[{property:"color",toProperty:"backgroundColor",toSelectors:["".concat(t," ").concat(ll)]}]}}}(t),Mn)}var gl={addStyleElement:function(e,t,r,n){ml(e,t,document.head).then(r).catch(n)},addStyleElementToTarget:ml,hasExistingStyleElement:function(e){return Boolean(document.getElementById(e))}};function ml(e,t,r){return new Promise(((n,i)=>{if(gl.hasExistingStyleElement(t))n();else{var o=document.createElement("link");o.onload=()=>{n()},o.onerror=()=>{i(new Error("Failed to load stylesheet at ".concat(e,". The onerror callback was invoked.")))},o.href=e,o.rel="stylesheet",o.type="text/css",o.id=t,r.appendChild(o)}}))}var vl=gl;function yl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function El(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yl(Object(r),!0).forEach((function(t){_l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _l(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sl(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Al(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Sl(o,n,i,s,a,"next",e)}function a(e){Sl(o,n,i,s,a,"throw",e)}s(void 0)}))}}var Il="single-card-wrapper",Ol="emptyMessage",bl=[kn.CARD_NUMBER,kn.EXPIRATION_DATE,kn.CVV,kn.POSTAL_CODE];function Tl(e){return"".concat(Il,"-").concat(e)}function Cl(e,t){var r=function(e){return"".concat("sq-single-card-custom-styles","-").concat(e)}(t),n=document.getElementById(r);null===n&&((n=document.createElement("style")).id=r,document.head.appendChild(n)),n.innerHTML=fl(e,Tl(t))}var wl,Rl=class extends La{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.methodType=Xi.CARD,this.postalCountry=rs.US,this.onResize=this.onResize.bind(this),this.id=Ta(),this.iframeName="".concat("single-card","-").concat(this.id),this.paymentMessenger=new Ma(this.context),this.tokenizeInProcess=!1,this.inputLabelsIncluded=Boolean(t.includeInputLabels),this.initializeMessageBus(),this.errorList=new Set,this.updateCardDetailText=this.updateCardDetailText.bind(this),this.context.addLocaleChangedListener(this.updateCardDetailText),this.validateOptions(t),this.initialOptions=t,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t}))}configure(){var e=arguments,t=this;return Al((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:{};t.throwIfDestroyedOrNotAttached(),t.validateOptions(r),t.metricsHandler.logEvent("CONFIG_UPDATED",r),void 0!==r.includeInputLabels&&(t.inputLabelsIncluded=Boolean(r.includeInputLabels),t.onResize()),void 0!==r.style&&Cl(r.style,t.id);try{yield t.paymentMessenger.request(Lc.CONFIGURE,{includeInputLabels:t.inputLabelsIncluded,postalCode:r.postalCode,style:r.style,type:t.methodType})}catch(e){if(So.isInstanceOf(e,Mc))throw e;throw t.errorLogger.captureException(e),new Ui("configuring the Card Element")}}))()}attach(e){var t=this;return Al((function*(){var r;t.throwIfDestroyedOrAlreadyAttached(),t.status=wa.ATTACHED,t.metricsHandler.logEvent("ATTACH:START"),t.metricsHandler.logEvent("CONFIGURED",t.initialOptions);try{r=Vc(e)}catch(e){throw t.metricsHandler.logEvent("ATTACH:ERROR","good"),t.status===wa.ATTACHED&&(t.status=wa.DETACHED),e}try{t.attachPromise=t.buildElementOnIframe(r),yield t.attachPromise,t.attachPromise=void 0,t.throwIfDestroyed(),t.element=r,window.addEventListener("resize",t.onResize),t.showCardElement(),t.onResize(),t.metricsHandler.logEvent("ATTACH:OK","good")}catch(e){t.status===wa.ATTACHED&&(t.status=wa.DETACHED);var n=So.isInstanceOf(e,kc),i=n&&!(e instanceof Ui);if(t.metricsHandler.logEvent("ATTACH:ERROR",i?"good":"bad"),n)throw e;throw t.errorLogger.captureException(e),new Ui("attaching the Card Element")}}))()}detach(){return this.throwIfDestroyed(),this.detachElement(wa.DETACHED,"DETACHED")}destroy(){var e=this;return Al((function*(){if(e.status===wa.DESTROYED)return!1;var t=yield e.detachElement(wa.DESTROYED,"DESTROYED");return e.context.removeLocaleChangedListener(e.updateCardDetailText),t}))()}focus(e){var t=this;return Al((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(kn).includes(e))throw new fi(e);t.metricsHandler.logEvent("FOCUSED",e);try{return yield t.paymentMessenger.request(Lc.SET_FOCUS,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}clear(){var e=this;return Al((function*(){e.throwIfDestroyedOrNotAttached();try{return yield e.paymentMessenger.request(Lc.CLEAR)}catch(t){e.errorLogger.captureException(t)}return e.metricsHandler.logEvent("CLEAR"),!1}))()}addEventListener(e,t){this.throwIfDestroyed(),this.metricsHandler.logEvent("EVENT_LISTENER_ADDED",e),super.addEventListener(e,t)}removeEventListener(e,t){this.throwIfDestroyed(),super.removeEventListener(e,t)}tokenize(){var e=this;return Al((function*(){if(e.throwIfDestroyedOrNotAttached(),e.tokenizeInProcess)throw new Mi([ka]);e.tokenizeInProcess=!0,yield e.context.waitForAnalyticsAndProofOfWorkCompletion();try{var t=yield e.paymentMessenger.request(Lc.REQUEST_CARD_NONCE_IF_VALID_FORM,{type:e.methodType});return e.tokenizeInProcess=!1,e.context.setPaymentMethodTrackingId(t.paymentMethodTrackingId),function(e){var{card:t,billingContact:r,cardNonce:n}=e;return{details:{billing:r,card:t,method:Xi.CARD},status:Ji.OK,token:n}}(t)}catch(t){if(e.tokenizeInProcess=!1,t instanceof Ro)return{errors:t.errors,status:Ji.INVALID};throw So.isInstanceOf(t,Uc)?t:(e.errorLogger.captureException(t),Po())}}))()}recalculateSize(){this.throwIfDestroyedOrNotAttached(),this.metricsHandler.logEvent("RECALCULATED_SIZE"),this.onResize()}setError(e){var t=this;return Al((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(kn).includes(e))throw new fi(e);t.metricsHandler.logEvent("SET_ERROR",e);try{return yield t.paymentMessenger.request(Lc.SET_ERROR,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}buildElementOnIframe(e){var t=this;return Al((function*(){yield t.buildCardElement(e),yield t.paymentMessenger.request(Lc.LOAD_CARDS_FORM,{configuration:El(El({},t.initialOptions),{},{type:t.methodType}),iframeName:t.iframeName}),yield t.stylesLoadedPromise}))()}validateOptions(e){var t={includeInputLabels:e=>"boolean"==typeof e,postalCode:e=>"string"==typeof e,style:e=>"object"==typeof e};Object.entries(e).forEach((e=>{var[r,n]=e;if(void 0===t[r])throw new gi(r);if(t[r]&&!t[r](n))throw new mi(r,n)}))}buildErrorMessage(e){switch(e){case kn.CARD_NUMBER:return this.context.getLocaleString().paymentMethods.cards.errors.cardNumberError;case kn.CVV:return this.context.getLocaleString().paymentMethods.cards.errors.cvvError;case kn.EXPIRATION_DATE:return this.context.getLocaleString().paymentMethods.cards.errors.expirationDateError;case kn.POSTAL_CODE:return this.context.getLocaleString().paymentMethods.cards.errors.postalCodeErrors[this.postalCountry];default:return""}}buildHelperMessage(e){switch(e){case kn.CARD_NUMBER:return this.context.getLocaleString().paymentMethods.cards.helperText.cardNumber;case kn.CVV:return this.context.getLocaleString().paymentMethods.cards.helperText.cvv;case kn.EXPIRATION_DATE:return this.context.getLocaleString().paymentMethods.cards.helperText.expirationDate;case kn.POSTAL_CODE:return this.context.getLocaleString().paymentMethods.cards.helperText.postalCodes[this.postalCountry];default:return""}}updateCardDetailText(){var e,t,r;this.cardDetail&&(0===this.errorList.size?(e=null!==(r=this.focusedInput)&&void 0!==r?r:Ol,t=this.buildHelperMessage(e),this.cardDetail.classList.remove(Ku),this.cardDetail.classList.add(Xu)):(e=bl.find((e=>this.errorList.has(e)))||Ol,t=this.buildErrorMessage(e),this.cardDetail.classList.add(Ku),this.cardDetail.classList.remove(Xu)),this.cardDetail.textContent!==t&&(this.cardDetail.textContent=t),t.length>0?this.cardDetail.classList.add(Qu):this.cardDetail.classList.remove(Qu))}addErrorMessage(e){this.errorList.add(e),this.updateCardDetailText()}removeErrorMessage(e){this.errorList.has(e)&&(this.errorList.delete(e),this.updateCardDetailText())}addFocusMessage(e){this.focusedInput=e,this.updateCardDetailText()}removeFocusMessage(e){this.focusedInput===e&&(this.focusedInput=null),setTimeout((()=>{null===this.focusedInput&&this.updateCardDetailText()}),50)}removeFocusClass(){setTimeout((()=>{var e;this.focusedInput||null===(e=this.wrapperElement)||void 0===e||e.classList.remove($c)}),50)}removeErrorClass(){var e;0===this.errorList.size&&(null===(e=this.wrapperElement)||void 0===e||e.classList.remove(Yc))}handleInputEvent(e){var{data:t}=e,r=t.payload.body;switch(r.eventType){case xn.ERROR_CLASS_ADDED:var n;this.addErrorMessage(r.field),null===(n=this.wrapperElement)||void 0===n||n.classList.add(Yc);break;case xn.ERROR_CLASS_REMOVED:this.removeErrorMessage(r.field),this.removeErrorClass();break;case xn.FOCUS_CLASS_ADDED:var i;this.addFocusMessage(r.field),null===(i=this.wrapperElement)||void 0===i||i.classList.add($c);break;case xn.FOCUS_CLASS_REMOVED:this.removeFocusMessage(r.field),this.removeFocusClass()}super.dispatchEvent(r.eventType,r)}handleSetPostalCountry(e){var{data:t}=e;this.postalCountry=t.payload.body.postalCountry}initializeMessageBus(){var e=this.handleInputEvent.bind(this),t=this.handleSetPostalCountry.bind(this),r={[xc.SET_POSTAL_COUNTRY]:t,[xc.FOCUS_CLASS_ADDED]:e,[xc.FOCUS_CLASS_REMOVED]:e,[xc.ERROR_CLASS_ADDED]:e,[xc.ERROR_CLASS_REMOVED]:e,[xc.CARD_BRAND_CHANGED]:e,[xc.POSTAL_CODE_CHANGED]:e,[xc.SUBMIT]:e,[xc.ESCAPE]:e};this.paymentMessenger.initializeMessageBus(r)}buildCardIframe(e){return jc.buildIframeWithAttributes({frameborder:"0",height:"0px",name:this.iframeName,scrolling:"no",src:Sn.SINGLE_CARD_IFRAME,width:"100%"},e)}hideCardElement(){this.wrapperElement&&this.wrapperElement.setAttribute("style","display: none;")}showCardElement(){this.wrapperElement&&this.wrapperElement.removeAttribute("style")}buildCardElement(e){var t=this;return Al((function*(){var r;t.wrapperElement=document.createElement("div"),t.wrapperElement.id=Tl(t.id),t.wrapperElement.classList.add($u),t.hideCardElement(),t.cardDetail=document.createElement("span"),t.cardDetail.classList.add(Wu),e.appendChild(t.wrapperElement),t.iframeContainer=document.createElement("div"),t.iframeContainer.classList.add(zu),t.wrapperElement.appendChild(t.iframeContainer),t.iframe=yield t.buildCardIframe(t.iframeContainer),t.iframe.classList.add(Yu),t.wrapperElement.appendChild(t.cardDetail),vl.addStyleElement(Sn.SINGLE_CARD_WRAPPER_STYLES,"sq-single-card-styles",t.resolveStylePromise,t.rejectStylePromise),null!==(r=t.initialOptions)&&void 0!==r&&r.style&&Cl(t.initialOptions.style,t.id)}))()}onResize(e){if(this.iframe&&this.wrapperElement&&this.iframeContainer&&(this.lastResizeWidth=this.iframe.clientWidth,!this.currentResizeTimeout)){var t=e=>{if(this.wrapperElement&&this.iframe&&this.iframeContainer){var t=this.inputLabelsIncluded?62:48;e<=482&&(t=2*t+1),this.iframeContainer.style.height="".concat(Math.round(t),"px"),this.iframe.height="".concat(Math.round(t),"px")}};t(this.lastResizeWidth||0),this.currentResizeTimeout=window.setTimeout((()=>{t(this.lastResizeWidth||0),this.currentResizeTimeout=void 0}),100)}}detachElement(e,t){var r=this;return Al((function*(){var n=r.status;if(r.attachPromise)try{yield r.attachPromise}catch(e){}try{var i=yield r.paymentMessenger.request(Lc.DESTROY);return r.element&&(jc.removeIframe(r.element),window.removeEventListener("resize",r.onResize)),r.status=e,r.metricsHandler.logEvent(t),i}catch(e){throw r.status=n,e}}))()}},Pl=[Di,Li,xi,ki,Ci,Ui];function Nl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nl(Object(r),!0).forEach((function(t){Ll(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ll(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xl(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function kl(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){xl(o,n,i,s,a,"next",e)}function a(e){xl(o,n,i,s,a,"throw",e)}s(void 0)}))}}!function(e){e.CLEAR="giftCardClear",e.CONFIGURE="giftCardConfigure",e.DESTROY="giftCardDestroy",e.LOAD_GIFT_CARDS_FORM="loadGiftCardsForm",e.REQUEST_CARD_NONCE_IF_VALID_FORM="giftCardRequestCardNonceIfValidForm",e.SET_FOCUS="giftCardSetFocus",e.SET_ERROR="giftCardSetError"}(wl||(wl={}));var Ml,Ul="gift-card-wrapper",jl=[Un.GIFT_CARD_NUMBER];class Hl extends La{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.methodType=Xi.GIFT_CARD,this.onResize=this.onResize.bind(this),this.id=Ta(),this.iframeName="".concat("gift-card","-").concat(this.id),this.paymentMessenger=new Ma(this.context),this.tokenizeInProcess=!1,this.inputLabelsIncluded=Boolean(null==t?void 0:t.includeInputLabels),this.initializeMessageBus(),this.validateOptions(t),this.initialOptions=t||{},this.errorList=new Set,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t}))}attach(e){var t=this;return kl((function*(){var r;t.throwIfDestroyedOrAlreadyAttached(),t.status=wa.ATTACHED,t.metricsHandler.logEvent("ATTACH:START"),t.metricsHandler.logEvent("CONFIGURED",t.initialOptions);try{r=Vc(e)}catch(e){throw t.metricsHandler.logEvent("ATTACH:ERROR"),t.status===wa.ATTACHED&&(t.status=wa.DETACHED),e}try{t.attachPromise=t.buildElementOnIframe(r),yield t.attachPromise,t.attachPromise=void 0,t.throwIfDestroyed(),t.element=r,window.addEventListener("resize",t.onResize),t.showCardElement(),t.onResize(),t.metricsHandler.logEvent("ATTACH:OK")}catch(e){if(t.status===wa.ATTACHED&&(t.status=wa.DETACHED),t.metricsHandler.logEvent("ATTACH:ERROR"),So.isInstanceOf(e,Pl))throw e;throw t.errorLogger.captureException(e),new Ui("attaching the Gift Card Element")}}))()}detach(){return this.throwIfDestroyed(),this.detachElement(wa.DETACHED,"DETACHED")}destroy(){return this.status===wa.DESTROYED?Promise.resolve(!1):this.detachElement(wa.DESTROYED,"DESTROYED")}configure(e){var t=this;return kl((function*(){t.throwIfDestroyedOrNotAttached(),t.validateOptions(e),void 0!==(null==e?void 0:e.includeInputLabels)&&(t.inputLabelsIncluded=Boolean(null==e?void 0:e.includeInputLabels),t.onResize()),void 0!==e.style&&Bl(e.style,t.id),t.metricsHandler.logEvent("CONFIG_UPDATED",e);try{yield t.paymentMessenger.request(wl.CONFIGURE,{includeInputLabels:t.inputLabelsIncluded,style:e.style,type:t.methodType})}catch(e){if(So.isInstanceOf(e,Mc))throw e;throw t.errorLogger.captureException(e),new Ui("configuring the Gift Card Element")}}))()}focus(e){var t=this;return kl((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(Un).includes(e))throw new fi(e);t.metricsHandler.logEvent("FOCUSED",e);try{return yield t.paymentMessenger.request(wl.SET_FOCUS,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}clear(){var e=this;return kl((function*(){e.throwIfDestroyedOrNotAttached();try{return yield e.paymentMessenger.request(wl.CLEAR)}catch(t){e.errorLogger.captureException(t)}return e.metricsHandler.logEvent("CLEAR"),!1}))()}addEventListener(e,t){this.throwIfDestroyed(),this.metricsHandler.logEvent("EVENT_LISTENER_ADDED",e),super.addEventListener(e,t)}removeEventListener(e,t){this.throwIfDestroyed(),super.removeEventListener(e,t)}tokenize(){var e=this;return kl((function*(){if(e.throwIfDestroyedOrNotAttached(),e.tokenizeInProcess)throw new Mi([ka]);e.tokenizeInProcess=!0,yield e.context.waitForAnalyticsAndProofOfWorkCompletion();try{var t=yield e.paymentMessenger.request(wl.REQUEST_CARD_NONCE_IF_VALID_FORM,{type:e.methodType});return e.tokenizeInProcess=!1,e.context.setPaymentMethodTrackingId(t.paymentMethodTrackingId),function(e){var{card:t,cardNonce:r}=e;return{details:{giftCard:t,method:Xi.GIFT_CARD},status:Ji.OK,token:r}}(t)}catch(t){if(e.tokenizeInProcess=!1,t instanceof Ro)return{errors:t.errors,status:Ji.INVALID};throw So.isInstanceOf(t,Uc)?t:(e.errorLogger.captureException(t),Po())}}))()}setError(e){var t=this;return kl((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(Un).includes(e))throw new fi(e);t.metricsHandler.logEvent("SET_ERROR",e);try{return yield t.paymentMessenger.request(wl.SET_ERROR,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}buildElementOnIframe(e){var t=this;return kl((function*(){yield t.buildCardElement(e),yield t.paymentMessenger.request(wl.LOAD_GIFT_CARDS_FORM,{configuration:Dl(Dl({},t.initialOptions),{},{type:t.methodType}),iframeName:t.iframeName}),yield t.stylesLoadedPromise}))()}validateOptions(e){var t={includeInputLabels:e=>"boolean"==typeof e,style:e=>"object"==typeof e};Object.entries(e).forEach((e=>{var[r,n]=e;if(void 0===t[r])throw new gi(r);if(t[r]&&!t[r](n))throw new mi(r,n)}))}buildCardElement(e){var t=this;return kl((function*(){var r;t.wrapperElement=document.createElement("div"),t.wrapperElement.id=Fl(t.id),t.wrapperElement.classList.add($u),t.hideCardElement(),t.cardDetail=document.createElement("span"),t.cardDetail.classList.add(Wu),e.appendChild(t.wrapperElement),t.iframeContainer=document.createElement("div"),t.iframeContainer.classList.add(zu),t.wrapperElement.appendChild(t.iframeContainer),t.iframe=yield t.buildCardIframe(t.iframeContainer),t.iframe.classList.add(Yu),t.wrapperElement.appendChild(t.cardDetail),vl.addStyleElement(Sn.SINGLE_CARD_WRAPPER_STYLES,"sq-single-card-styles",t.resolveStylePromise,t.rejectStylePromise),null!==(r=t.initialOptions)&&void 0!==r&&r.style&&Bl(t.initialOptions.style,t.id)}))()}buildCardIframe(e){return jc.buildIframeWithAttributes({frameborder:"0",height:"0px",name:this.iframeName,scrolling:"no",src:Sn.GIFT_CARD_IFRAME,width:"100%"},e)}hideCardElement(){this.wrapperElement&&this.wrapperElement.setAttribute("style","display: none;")}showCardElement(){this.wrapperElement&&this.wrapperElement.removeAttribute("style")}onResize(e){if(this.iframe&&this.wrapperElement&&this.iframeContainer&&!this.currentResizeTimeout){var t=()=>{if(this.wrapperElement&&this.iframe&&this.iframeContainer){var e=this.inputLabelsIncluded?62:48;e+=2,this.iframe.style.height="".concat(e,"px"),this.iframeContainer.style.height="".concat(Math.round(e),"px")}};t(),this.currentResizeTimeout=window.setTimeout((()=>{t(),this.currentResizeTimeout=void 0}),100)}}updateCardDetailText(){var e,t,r;this.cardDetail&&(0===this.errorList.size?(e=null!==(r=this.focusedInput)&&void 0!==r?r:"emptyMessage",t=this.buildHelperMessage(e),this.cardDetail.classList.remove(Ku),this.cardDetail.classList.add(Xu)):(e=jl.find((e=>this.errorList.has(e)))||jl[0],t=this.buildErrorMessage(e),this.cardDetail.classList.add(Ku),this.cardDetail.classList.remove(Xu)),this.cardDetail.textContent!==t&&(this.cardDetail.textContent=t),t.length>0?this.cardDetail.classList.add(Qu):this.cardDetail.classList.remove(Qu))}addErrorMessage(e){this.errorList.add(e),this.updateCardDetailText()}removeErrorMessage(e){this.errorList.has(e)&&(this.errorList.delete(e),this.updateCardDetailText())}addFocusMessage(e){this.focusedInput=e,this.updateCardDetailText()}removeFocusMessage(e){this.focusedInput===e&&(this.focusedInput=null),setTimeout((()=>{null===this.focusedInput&&this.updateCardDetailText()}),50)}handleInputEvent(e){var{data:t}=e,r=t.payload.body;switch(r.eventType){case jn.ERROR_CLASS_ADDED:var n;this.addErrorMessage(r.field),null===(n=this.wrapperElement)||void 0===n||n.classList.add(Yc);break;case jn.ERROR_CLASS_REMOVED:this.removeErrorMessage(r.field),this.removeErrorClass();break;case jn.FOCUS_CLASS_ADDED:var i;this.addFocusMessage(r.field),null===(i=this.wrapperElement)||void 0===i||i.classList.add($c);break;case jn.FOCUS_CLASS_REMOVED:this.removeFocusMessage(r.field),this.removeFocusClass()}super.dispatchEvent(r.eventType,r)}removeFocusClass(){setTimeout((()=>{var e;this.focusedInput||null===(e=this.wrapperElement)||void 0===e||e.classList.remove($c)}),50)}removeErrorClass(){var e;0===this.errorList.size&&(null===(e=this.wrapperElement)||void 0===e||e.classList.remove(Yc))}initializeMessageBus(){var e=this.handleInputEvent.bind(this),t={[xc.FOCUS_CLASS_ADDED]:e,[xc.FOCUS_CLASS_REMOVED]:e,[xc.ERROR_CLASS_ADDED]:e,[xc.ERROR_CLASS_REMOVED]:e,[xc.CARD_BRAND_CHANGED]:e,[xc.SUBMIT]:e,[xc.ESCAPE]:e};this.paymentMessenger.initializeMessageBus(t)}buildErrorMessage(e){return e===Un.GIFT_CARD_NUMBER?this.context.getLocaleString().paymentMethods.giftCards.errors.giftCardNumberError:""}buildHelperMessage(e){return e===Un.GIFT_CARD_NUMBER?this.context.getLocaleString().paymentMethods.giftCards.helperText.giftCardNumber:""}detachElement(e,t){var r=this;return kl((function*(){var n=r.status;if(r.attachPromise)try{yield r.attachPromise}catch(e){}try{var i=yield r.paymentMessenger.request(wl.DESTROY);return r.element&&(jc.removeIframe(r.element),window.removeEventListener("resize",r.onResize)),r.status=e,r.metricsHandler.logEvent(t),i}catch(e){throw r.status=n,e}}))()}}function Fl(e){return"".concat(Ul,"-").concat(e)}function Bl(e,t){var r=function(e){return"".concat("sq-gift-card-custom-styles","-").concat(e)}(t),n=document.getElementById(r);null===n&&((n=document.createElement("style")).id=r,document.head.appendChild(n)),n.innerHTML=fl(e,Fl(t))}r(3105),function(e){e.REQUEST_GOOGLE_PAY_CARD_NONCE="REQUEST_GOOGLE_PAY_CARD_NONCE",e.GENERATE_GOOGLE_PAY_AUTH_TOKEN="GENERATE_GOOGLE_PAY_AUTH_TOKEN"}(Ml||(Ml={}));class ql extends Xn{constructor(e){super("The event listener for ".concat(e," timed out (30 seconds). If you've returned a promise, ensure it is resolving")),this.name="EventListenerTimeoutError",Object.setPrototypeOf(this,ql.prototype)}}function Vl(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}class Gl extends ba{constructor(){super(),this.listeners={},this.listeners={}}dispatchEvent(e,t,r){var n,i=this;return(n=function*(){if(e in i.listeners)for(var n=new no(e,t),o=[...i.listeners[e]],s=function*(){var t,i;try{t=o[a](n)}catch(t){throw new hi(e,t.message)}if(t instanceof Promise)try{i=yield In((()=>t),3e4,new ql(e))}catch(t){if(t instanceof ql)throw t;throw new hi(e,t.message)}else i=t;r&&r(i)},a=0,c=o.length;a<c;a++)yield*s()},function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function s(e){Vl(o,r,i,s,a,"next",e)}function a(e){Vl(o,r,i,s,a,"throw",e)}s(void 0)}))})()}}function zl(e,t){if("object"!=typeof e)return{isValid:!1,missingFields:[]};var r=[];return{isValid:Object.entries(t).map((n=>{var[i,o]=n;if("object"==typeof o){var{isValid:s,missingFields:a}=zl("object"==typeof e[i]?e[i]:{},t[i]);return a.forEach((e=>{var[t,n]=e;r.push(["".concat(i,".").concat(t),n])})),s}return i in e&&typeof e[i]===o||(r.push([i,o]),!1)})).every(Boolean),missingFields:r}}function $l(e,t,r){if(!Array.isArray(e))return{isValid:!1,missingFields:[[t,"Array"]]};var n=e.reduce(((e,n)=>{var i=zl({[t]:n},{[t]:r}),o=Object.fromEntries(i.missingFields);return{isValid:e.isValid&&i.isValid,missingFieldsMap:Object.assign({},e.missingFieldsMap,o)}}),{isValid:!0,missingFieldsMap:{}});return{isValid:n.isValid,missingFields:Object.entries(n.missingFieldsMap)}}var Yl,Wl,Kl,Xl,Ql,Jl,Zl,ed,td={amount:"string",label:"string"},rd={amount:"string",id:"string",label:"string"},nd={amount:"string",label:"string"},id={};function od(e,t){var{lineItems:r,taxLineItems:n,discounts:i,shippingLineItems:o}=e,s=!1,a=[],c=r,u=n,l=o,d=sd(i);return void 0===t||void 0===r&&void 0===n&&void 0===o&&void 0===d||(c||(c=t.lineItems),u||(u=t.taxLineItems),d||(d=sd(t.discounts)),l||(l=t.shippingLineItems)),[c,u,d,l].forEach((e=>{void 0!==e&&(s=!0,a.push(...e))})),s?a:void 0}function sd(e){return void 0===e?e:e.map((e=>Object.assign({},e,{amount:"-".concat(e.amount)})))}function ad(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function cd(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){ad(o,n,i,s,a,"next",e)}function a(e){ad(o,n,i,s,a,"throw",e)}s(void 0)}))}}function ud(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ld(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.UPDATE="update"}(Yl||(Yl={}));class dd{constructor(e,t,r){this.eventTarget=new Gl,this.metricsBuffer=[],this.localeStrings=t,this._requestBillingContact=Boolean(e.requestBillingContact),this._requestShippingContact=Boolean(e.requestShippingContact),this._countryCode=e.countryCode,this._currencyCode=e.currencyCode,this._lineItems=e.lineItems,this._shippingLineItems=e.shippingLineItems,this._taxLineItems=e.taxLineItems,this._discounts=e.discounts,this._total=e.total,this._shippingOptions=e.shippingOptions,this._shippingContact=e.shippingContact,this._pickupContact=e.pickupContact,this.updateLock=r;var{isValid:n,missingFields:i}=pd(this);if(!n)throw new li(i)}get requestBillingContact(){return this._requestBillingContact}get requestShippingContact(){return this._requestShippingContact}get countryCode(){return this._countryCode}get currencyCode(){return this._currencyCode}get lineItems(){return this._lineItems}get pickupContact(){return this._pickupContact}get shippingLineItems(){return this._shippingLineItems}get taxLineItems(){return this._taxLineItems}get discounts(){return this._discounts}get total(){return this._total}get shippingOptions(){return this._shippingOptions}get shippingContact(){return this._shippingContact}update(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ud(Object(r),!0).forEach((function(t){ld(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ud(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({countryCode:this.countryCode,currencyCode:this.currencyCode,discounts:this.discounts,lineItems:this.lineItems,pickupContact:this.pickupContact,requestBillingContact:this.requestBillingContact,requestShippingContact:this.requestShippingContact,shippingContact:this.shippingContact,shippingLineItems:this.shippingLineItems,shippingOptions:this.shippingOptions,taxLineItems:this.taxLineItems,total:this.total},e),r=new dd(t,this.localeStrings,this.updateLock),{isValid:n,missingFields:i}=pd(r);if(!n)throw new li(i);return!this.updateLock.isLocked&&(void 0!==e.requestBillingContact&&(this._requestBillingContact=Boolean(e.requestBillingContact)),void 0!==e.requestShippingContact&&(this._requestShippingContact=Boolean(e.requestShippingContact)),e.countryCode&&(this._countryCode=e.countryCode),e.currencyCode&&(this._currencyCode=e.currencyCode),e.lineItems&&(this._lineItems=e.lineItems),e.shippingLineItems&&(this._shippingLineItems=e.shippingLineItems),e.taxLineItems&&(this._taxLineItems=e.taxLineItems),e.discounts&&(this._discounts=e.discounts),e.total&&(this._total=e.total),e.pickupContact&&(this._pickupContact=e.pickupContact),e.shippingOptions&&(this._shippingOptions=e.shippingOptions),e.shippingContact&&(this._shippingContact=e.shippingContact),this.eventTarget.dispatchEvent(Yl.UPDATE,r),this.logMetrics("CONFIG_UPDATED",t),!0)}addEventListener(e,t){switch(So.enumValues(Qi).includes(e)&&this.logMetrics("EVENT_LISTENER_ADDED",e),e){case Qi.SHIPPING_CONTACT_CHANGED:this.shippingContactEventListener(t);break;case Qi.SHIPPING_OPTION_CHANGED:this.shippingOptionEventListener(t);break;case Yl.UPDATE:this.updateEventListener(t);break;case Kn.AFTERPAY_SHIPPING_ADDRESS_CHANGED:this.afterpayShippingContactEventListener(t);break;case Kn.AFTERPAY_SHIPPING_OPTION_CHANGED:this.afterpayShippingOptionEventListener(t);break;default:throw new Ia("PaymentRequest.addEventListener","event","PaymentRequestEvent")}}dispatchEvent(e,t,r){return this.eventTarget.dispatchEvent(e,t,(t=>{if(So.enumValues(Kn).includes(e)){var n=function(e){if(void 0!==e.error)return{isValid:!0,missingFields:[]};if(void 0!==e.shippingErrors)return{isValid:!0,missingFields:[]};if(void 0===e.shippingOptions)return{isValid:!1,missingFields:[["paymentRequestUpdate.shippingOptions","array"]]};var t=$l(e.shippingOptions,"shippingOptions",{amount:"string",id:"string",label:"string",total:"object"});if(!t.isValid)return t;for(var r of e.shippingOptions){if(!(t=zl({"shippingOptions.total":r.total},{"shippingOptions.total":nd})).isValid)return t;if(void 0!==r.taxLineItems&&!(t=$l(r.taxLineItems,"shippingOptions.taxLineItems",td)).isValid)return t}return{isValid:!0,missingFields:[]}}(t);if(!n.isValid)throw new di(n.missingFields);r(t)}else{var i=function(e){var{lineItems:t,discounts:r,taxLineItems:n,shippingLineItems:i,shippingErrors:o,shippingOptions:s,error:a,total:c}=e;if(t){var u=$l(t,"lineItem",td);if(!u.isValid)return u}if(r){var l=$l(r,"discounts",td);if(!l.isValid)return l}if(n){var d=$l(n,"taxLineItems",td);if(!d.isValid)return d}if(i){var h=$l(i,"shippingLineItems",td);if(!h.isValid)return h}if(s){var p=$l(s,"shippingOption",rd);if(!p.isValid)return p}if(c){var f=zl({total:c},{total:nd});if(!f.isValid)return f}if(a&&"string"!=typeof a)return{isValid:!1,missingFields:[["error","string"]]};if(o){var g=zl(o,id);if(!g.isValid)return g}return{isValid:!0,missingFields:[]}}(t);if(!i.isValid)throw new di(i.missingFields);r(t)}}))}hasEventListener(e){return this.eventTarget.hasEventListener(e)}setMetricsHandler(e){this.metricsHandler=e,this.metricsBuffer.length>0&&(this.metricsBuffer.forEach((t=>{var[r,n]=t;e.logEvent(r,n)})),this.metricsBuffer=[])}shippingContactEventListener(e){var t=this;this.eventTarget.addEventListener(Qi.SHIPPING_CONTACT_CHANGED,function(){var r=cd((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return console.error("ShippingContactUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.contactError}}}));return function(e){return r.apply(this,arguments)}}())}shippingOptionEventListener(e){var t=this;this.eventTarget.addEventListener(Qi.SHIPPING_OPTION_CHANGED,function(){var r=cd((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return console.error("ShippingOptionUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return r.apply(this,arguments)}}())}afterpayShippingContactEventListener(e){var t=this;this.eventTarget.addEventListener(Kn.AFTERPAY_SHIPPING_ADDRESS_CHANGED,function(){var r=cd((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return console.error("AfterpayShippingContactUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return r.apply(this,arguments)}}())}afterpayShippingOptionEventListener(e){this.eventTarget.addEventListener(Kn.AFTERPAY_SHIPPING_OPTION_CHANGED,(t=>{e(t.detail.contactOrOption)}))}updateEventListener(e){this.eventTarget.addEventListener(Yl.UPDATE,(t=>{e(t.detail)}))}logMetrics(e,t){this.metricsHandler?this.metricsHandler.logEvent(e,t):this.metricsBuffer.push([e,t])}}function hd(e){return Boolean(e.shippingOptions&&e.shippingOptions.length>0)}function pd(e){return zl(e,{countryCode:"string",currencyCode:"string",total:{amount:"string",label:"string"}})}function fd(e,t){return Intl.NumberFormat(s.windowNavigationLanguage,{currency:t,style:"currency"}).format(Number.parseFloat(e))}!function(e){e.Final="FINAL",e.Estimated="ESTIMATED",e.Unknown="NOT_CURRENTLY_KNOWN"}(Wl||(Wl={})),function(e){e.INITIALIZE="INITIALIZE",e.PAYMENT_AUTHORIZATION="PAYMENT_AUTHORIZATION",e.SHIPPING_ADDRESS="SHIPPING_ADDRESS",e.SHIPPING_OPTION="SHIPPING_OPTION"}(Kl||(Kl={})),function(e){e.FULL="FULL",e.MIN="MIN"}(Xl||(Xl={})),function(e){e.CARD="CARD"}(Ql||(Ql={})),function(e){e.PAYMENT_GATEWAY="PAYMENT_GATEWAY"}(Jl||(Jl={})),function(e){e.SUCCESS="SUCCESS"}(Zl||(Zl={})),function(e){e.TEST="TEST",e.PRODUCTION="PRODUCTION"}(ed||(ed={}));var gd=["PAN_ONLY","CRYPTOGRAM_3DS"],md=["AMEX","DISCOVER","JCB","MASTERCARD","VISA"],vd="LINE_ITEM";function yd(e){return{label:e.label,price:e.amount,status:e.pending?Wl.Estimated:Wl.Final,type:vd}}function Ed(e,t){var r=null!=t?t:e;return r?r.map((e=>yd(e))):[]}function _d(e,t){return t.map((t=>function(e,t){return{description:fd(t.amount,e),id:t.id,label:t.label}}(e,t)))}function Sd(e,t,r,n){var i=null!=n?n:r;if(i&&i.length>0){var o={shippingOptions:_d(e,i)};return i.some((e=>(null==e?void 0:e.id)===t))&&(o.defaultSelectedOptionId=t),o}}function Ad(e,t){return null==t?void 0:t.find((t=>t.id===e))}function Id(e,t,r,n,i,o){var{countryCode:s,currencyCode:a,total:c,lineItems:u,taxLineItems:l,discounts:d,requestBillingContact:h,requestShippingContact:p,shippingOptions:f}=t,g=hd(t),m=Boolean(p||g),v=Object.assign({},e,{emailRequired:Boolean(h),merchantInfo:i,shippingAddressRequired:m,shippingOptionRequired:g,transactionInfo:{countryCode:s,currencyCode:a,totalPrice:c.amount,totalPriceLabel:c.label,totalPriceStatus:n}});if(u&&u.length>0&&(v.transactionInfo.displayItems=Ed([],od({discounts:d,lineItems:u,taxLineItems:l},t))),m&&(v.shippingAddressParameters={phoneNumberRequired:!0}),g){var y=Sd(a,o,[],f);y&&(v.shippingOptionParameters=y)}return r.length>0&&(v.callbackIntents=r),v}function Od(e,t){var r=[];return e.error&&r.push({intent:t,message:e.error,reason:Ki.SHIPPING_ADDRESS_UNSERVICEABLE}),e.shippingErrors&&Object.entries(e.shippingErrors).forEach((e=>{var[n,i]=e;r.push({intent:t,message:"".concat(n,": ").concat(i),reason:Ki.SHIPPING_ADDRESS_INVALID})})),r}function bd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Td(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bd(Object(r),!0).forEach((function(t){Cd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Cd(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wd(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Rd(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){wd(o,n,i,s,a,"next",e)}function a(e){wd(o,n,i,s,a,"throw",e)}s(void 0)}))}}var Pd=["#google"];class Nd extends La{constructor(e,t,r,n,i){var o;super(r),this.methodType=Xi.GOOGLE_PAY,this.shippingOptions=void 0,this.wasFirstInteractionCalled=!1,this.validateConfiguration(),this.paymentRequestLockController=i,this.req=t,this.merchantInfo=n,this.element=null,this.paymentMethodMessenger=new Ma(r),hd(this.req)&&(this.shippingOptions=this.req.shippingOptions,this.selectedShippingOptionId=null===(o=this.req.shippingOptions)||void 0===o?void 0:o[0].id),this.callbackIntents=function(e,t){var r=[],n=hd(e)&&t.includes(Qi.SHIPPING_OPTION_CHANGED),i=e.requestShippingContact&&t.includes(Qi.SHIPPING_CONTACT_CHANGED);return n?r.push(Kl.SHIPPING_ADDRESS,Kl.SHIPPING_OPTION):i&&r.push(Kl.SHIPPING_ADDRESS),(!s.isAndroid()||n||i)&&r.push(Kl.PAYMENT_AUTHORIZATION),r}(this.req,this.handlers);var a,c,u,l,d=function(e,t,r,n){var i=ed.TEST;Sn.env!==En.production||e.isTestMerchant||(i=ed.PRODUCTION);var o={environment:i,merchantInfo:n},a=t.includes(Kl.SHIPPING_OPTION)||t.includes(Kl.SHIPPING_ADDRESS);if(!s.isAndroid()||a){var c={onPaymentAuthorized:()=>({transactionState:Zl.SUCCESS})};a&&(c.onPaymentDataChanged=r),o.paymentDataCallbacks=c}return o}(r,this.callbackIntents,this.onPaymentDataChanged.bind(this),this.merchantInfo);this.googlePayClient=new e.api.PaymentsClient(d),this.isReadyToPayRequest=(a=this.session.applicationId,c=this.req.requestBillingContact,u=this.context.featureFlagActive("can_use_interac"),l=[...md],u&&l.push("INTERAC"),{allowedPaymentMethods:[{parameters:{allowedAuthMethods:gd,allowedCardNetworks:l,billingAddressParameters:{format:c?Xl.FULL:Xl.MIN,phoneNumberRequired:Boolean(c)},billingAddressRequired:!0},tokenizationSpecification:{parameters:{gateway:"square",gatewayMerchantId:a},type:Jl.PAYMENT_GATEWAY},type:Ql.CARD}],apiVersion:2,apiVersionMinor:0})}get handlers(){var e=[];return this.req.hasEventListener(Qi.SHIPPING_OPTION_CHANGED)&&e.push(Qi.SHIPPING_OPTION_CHANGED),this.req.hasEventListener(Qi.SHIPPING_CONTACT_CHANGED)&&e.push(Qi.SHIPPING_CONTACT_CHANGED),e}attach(e,t){var r=this;return Rd((function*(){var n,i,o;r.throwIfDestroyedOrAlreadyAttached(),r.status=wa.ATTACHED;var s=null!==(n=null==t?void 0:t.buttonColor)&&void 0!==n?n:$i.DEFAULT,a=null!==(i=null==t?void 0:t.buttonSizeMode)&&void 0!==i?i:Yi.STATIC,c=null!==(o=null==t?void 0:t.buttonType)&&void 0!==o?o:Wi.LONG;r.metricsHandler.logEvent("ATTACH:START"),r.metricsHandler.logEvent("CONFIGURED",t);try{r.element=Gc(e)}catch(e){throw r.status===wa.ATTACHED&&(r.status=wa.DETACHED),r.metricsHandler.logEvent("ATTACH:ERROR"),e}r.isReadyToPay=yield r.checkIfReadyToPay("ATTACH:ERROR");try{var u=r.googlePayClient.createButton({buttonColor:s,buttonSizeMode:a,buttonType:c,onClick:()=>{}});r.element.appendChild(u),r.metricsHandler.logEvent("ATTACH:OK")}catch(e){throw r.status===wa.ATTACHED&&(r.status=wa.DETACHED),r.metricsHandler.logEvent("ATTACH:ERROR"),r.processGoogleClientError(e,"createButton"),r.status=wa.DETACHED,new Ti(Sa,e)}}))()}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(wa.DETACHED,"DETACHED"),Promise.resolve(!0)}destroy(){return this.status===wa.DESTROYED?Promise.resolve(!1):(this.detachElement(wa.DESTROYED,"DESTROYED"),Promise.resolve(!0))}tokenize(){var e=this;return Rd((function*(){var t;e.throwIfDestroyed(),e.handleFirstInteraction(),e.metricsHandler.logEvent("EXTERNAL_SESSION:START"),e.isReadyToPay=e.isReadyToPay||(yield e.checkIfReadyToPay("EXTERNAL_SESSION:ERROR")),e.paymentRequestLockController.lock(e);try{t=yield e.loadPaymentData(),delete e.googlePayTokenDeferred,e.metricsHandler.logEvent("EXTERNAL_SESSION:OK")}catch(t){if(delete e.googlePayTokenDeferred,e.paymentRequestLockController.unlock(e),"CANCELED"===t.statusCode)return e.metricsHandler.logEvent("EXTERNAL_SESSION:CANCEL"),{status:Ji.CANCEL};throw e.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR"),e.processGoogleClientError(t,"loadPaymentData")}var{token:r,details:n}=yield e.requestGooglePayCardNonce(t);return{details:n,status:Ji.OK,token:r}}))()}validateConfiguration(){var e=Pd.join(", ");if(document.querySelectorAll(e).length>0)throw new Ni(this.methodType,e)}checkIfReadyToPay(e){var t=this;return Rd((function*(){var r=!1;try{var{result:n}=yield t.googlePayClient.isReadyToPay(t.isReadyToPayRequest);(r=n)||t.metricsHandler.logEvent(e)}catch(r){t.metricsHandler.logEvent(e),t.processGoogleClientError(r,"isReadyToPay")}if(r){var i=t.callbackIntents.length>0?Wl.Unknown:Wl.Final;try{return t.googlePayClient.prefetchPaymentData(Id(t.isReadyToPayRequest,t.req,t.callbackIntents,i,t.merchantInfo,t.selectedShippingOptionId)),r}catch(r){t.metricsHandler.logEvent(e),t.processGoogleClientError(r,"prefetchPaymentData")}}throw new Ti(va)}))()}loadPaymentData(){return this.googlePayTokenDeferred||(this.googlePayTokenDeferred=this.googlePayClient.loadPaymentData(Id(this.isReadyToPayRequest,this.req,this.callbackIntents,Wl.Final,this.merchantInfo,this.selectedShippingOptionId))),this.googlePayTokenDeferred}onPaymentDataChanged(e){switch(e.callbackTrigger){case Kl.INITIALIZE:case Kl.SHIPPING_ADDRESS:return this.onPaymentDataChangedShippingAddress(e);case Kl.SHIPPING_OPTION:return this.onPaymentDataChangedShippingOption(e);default:return this.errorLogger.captureException(new Ho("Unknown callbackTrigger: ".concat(e.callbackTrigger),Xi.GOOGLE_PAY)),Promise.resolve({})}}onPaymentDataChangedShippingOption(e){var t=this;return Rd((function*(){var r;t.selectedShippingOptionId=null===(r=e.shippingOptionData)||void 0===r?void 0:r.id;var{updatedOptionRequest:n,optionErrors:i}=yield t.dispatchShippingOptionChanged(t.selectedShippingOptionId,t.shippingOptions);return t.paymentDataChangedComplete(n,i)}))()}dispatchShippingOptionChanged(e,t){var r=this,n={optionErrors:[],updatedOptionRequest:{}};if(!this.handlers.includes(Qi.SHIPPING_OPTION_CHANGED))return Promise.resolve(n);var i=Ad(e,t);return i?this.status===wa.DESTROYED?Promise.resolve({optionErrors:[{intent:Kl.SHIPPING_OPTION,message:"An error occurred when attempting to submit payment, please close this window and try again.",reason:Ki.PAYMENT_METHOD_DESTROYED}],updatedOptionRequest:{}}):new Promise((e=>{this.req.dispatchEvent(Qi.SHIPPING_OPTION_CHANGED,{contactOrOption:i},(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.metricsHandler.logEvent("EVENT_LISTENER_ON_COMPLETE_RESPONSE",Td(Td({},t),{},{eventName:Qi.SHIPPING_OPTION_CHANGED})),r.metricsHandler.logEvent("SHIPPING_OPTION_CHANGE:OK"),e({optionErrors:Od(t,Kl.SHIPPING_OPTION),updatedOptionRequest:t})}))})):Promise.resolve(n)}onPaymentDataChangedShippingAddress(e){var t=this;return Rd((function*(){var{updatedContactRequest:r,contactErrors:n}=yield t.dispatchShippingContactChanged(e);if(void 0===t.req.shippingOptions||0===t.req.shippingOptions.length)return t.paymentDataChangedComplete(r,n);var i,o=t.shippingOptions;r.shippingOptions?(o=r.shippingOptions,t.selectedShippingOptionId=r.shippingOptions[0].id):t.selectedShippingOptionId=null===(i=t.shippingOptions)||void 0===i?void 0:i[0].id;var{updatedOptionRequest:s,optionErrors:a}=yield t.dispatchShippingOptionChanged(t.selectedShippingOptionId,o),c=Object.assign({},r,s),u=[...n,...a];return t.paymentDataChangedComplete(c,u)}))()}dispatchShippingContactChanged(e){var t=this,r={contactErrors:[],updatedContactRequest:{}};return new Promise((n=>{var i;void 0!==e.shippingAddress&&this.handlers.includes(Qi.SHIPPING_CONTACT_CHANGED)?this.status!==wa.DESTROYED?this.req.dispatchEvent(Qi.SHIPPING_CONTACT_CHANGED,{contactOrOption:(i=e.shippingAddress,{city:i.locality,countryCode:i.countryCode,postalCode:i.postalCode,state:i.administrativeArea})},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.metricsHandler.logEvent("EVENT_LISTENER_ON_COMPLETE_RESPONSE",Td(Td({},e),{},{eventName:Qi.SHIPPING_CONTACT_CHANGED})),t.metricsHandler.logEvent("SHIPPING_ADDRESS_CHANGE:OK"),n({contactErrors:Od(e,Kl.SHIPPING_ADDRESS),updatedContactRequest:e})})):n({contactErrors:[{intent:Kl.SHIPPING_ADDRESS,message:"An error occurred when attempting to submit payment, please close this window and try again.",reason:Ki.PAYMENT_METHOD_DESTROYED}],updatedContactRequest:{}}):n(r)}))}paymentDataChangedComplete(e,t){e.shippingOptions&&e.shippingOptions.length>0&&(this.shippingOptions=e.shippingOptions);var r=function(e,t,r,n){var i,{total:o,countryCode:s,currencyCode:a}=t,c=r,u=yd(null!==(i=e.total)&&void 0!==i?i:o),l={totalPrice:u.price,totalPriceLabel:u.label,totalPriceStatus:u.status},d=Object.assign({},{countryCode:s,currencyCode:a},l),h=Ed(od(t),od(e,t));h.length>0&&(d.displayItems=h);var p={newTransactionInfo:d},f=Sd(a,n,c,e.shippingOptions);return f&&(p.newShippingOptionParameters=f),p}(e,this.req,this.shippingOptions,this.selectedShippingOptionId);return t.length>0&&(r.error=t[0]),r}requestGooglePayCardNonce(e){var t=this;return Rd((function*(){var r=Ad(t.selectedShippingOptionId,t.shippingOptions);yield t.context.waitForAnalyticsAndProofOfWorkCompletion();try{var n=yield t.paymentMethodMessenger.request(Ml.REQUEST_GOOGLE_PAY_CARD_NONCE,e);return t.context.setPaymentMethodTrackingId(n.paymentMethodTrackingId),t.wasFirstInteractionCalled=!1,t.paymentRequestLockController.unlock(t),function(e,t){var{card:r,cardNonce:n,shippingContact:i,billingContact:o}=e,s={details:{card:r,method:Xi.GOOGLE_PAY},token:n};return i&&(s.details.shipping={contact:i},t&&(s.details.shipping.option=t)),o&&(s.details.card&&(s.details.card.billing=o),s.details.billing=o),s}(n,r)}catch(e){throw t.paymentRequestLockController.unlock(t),e instanceof Mi||t.errorLogger.captureException(e),e}}))()}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent("FIRST_INTERACTION:OK"))}detachElement(e,t){this.element&&(this.element.innerHTML=""),this.status=e,this.metricsHandler.logEvent(t)}processGoogleClientError(e,t){if(e instanceof Error){if("SecurityError"===e.name)throw e;return this.errorLogger.captureException(e,{context:t}),e}var r=e;if("DEVELOPER_ERROR"===r.statusCode&&r.statusMessage.includes("secure context"))throw new Ti(ya);return this.errorLogger.captureException(new Ho(JSON.stringify(e),this.methodType),{context:t}),new Ui("tokenizing Google Pay.")}}function Dd(){return Dd=Rd((function*(e,t){return{authJwt:(yield e.request(Ml.GENERATE_GOOGLE_PAY_AUTH_TOKEN,{session:t})).token,merchantId:"05498866192997955200",merchantName:t.merchantName}})),Dd.apply(this,arguments)}var Ld,xd=function(e){var t=function(e,t){return Dd.apply(this,arguments)}(e.messenger,e.getSession()),r=Ka.load("google-link",{src:"https://pay.google.com/gp/p/js/pay.js"},"google.payments",e.errorLogger);return Promise.all([r,t])};class kd{constructor(){this.lockSet=new Set}get isLocked(){return this.lockSet.size>0}lock(e){this.lockSet.add(e)}unlock(e){this.lockSet.delete(e)}}!function(e){e.REQUEST_HYDRATION="REQUEST_HYDRATION"}(Ld||(Ld={}));class Md{constructor(e){var{applePayMerchantIdentifier:t,cashAppPayMerchantIdentifier:r,merchantName:n,applicationId:i,avt:o,hostname:s,locationId:a,instanceId:c,sessionId:u,sourceUrl:l,locale:d}=e;this.applicationId=i,this.locationId=a,this._sessionId=u,this.instanceId=c,this.applePayMerchantIdentifier=t,this.cashAppPayMerchantIdentifier=r,this.merchantName=n,this.hostname=s,this.sourceUrl=l,this._locale=d,this.avt=o}get analyticsToken(){return this._analyticsToken}get sessionId(){return this._sessionId}get powCounter(){return this._powCounter}setSessionId(e){this._sessionId=e,this._serialized=void 0}setTranslationOverrides(e){this._translationOverrides=e,this._serialized=void 0}setLocale(e){this._locale=e,this._serialized=void 0}setAnalyticsToken(e){this._analyticsToken=e,this._serialized=void 0}setPowCounter(e){this._powCounter=e,this._serialized=void 0}serializationHasChanged(){return void 0===this._serialized}serialize(){return this._serialized||(this._serialized={applePayMerchantIdentifier:this.applePayMerchantIdentifier||"",applicationId:this.applicationId,avt:this.avt,cashAppPayMerchantIdentifier:this.cashAppPayMerchantIdentifier||"",hostname:this.hostname,instanceId:this.instanceId,locale:this._locale,locationId:this.locationId,merchantName:this.merchantName,sessionId:this._sessionId,sourceUrl:this.sourceUrl},this._analyticsToken&&(this._serialized.analyticsToken=this._analyticsToken),this._translationOverrides&&(this._serialized.translationOverrides=this._translationOverrides),this._powCounter&&(this._serialized.powCounter=this._powCounter)),this._serialized}}function Ud(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}var jd=new Error("did not get load event in time");function Hd(){var e;return e=function*(e,t){if(e)return Fd(e,t);var r=new Promise(((e,t)=>{var r=setTimeout((function(){window.removeEventListener("message",n),t(jd)}),5e3),n=function t(n){"main-iframe:loaded"===n.data&&n.origin===Sn.ASSET_BASE_URL&&(clearTimeout(r),window.removeEventListener("message",t),e())};window.addEventListener("message",n)})),n=Fd(e,t),[i,o]=yield Promise.all([n,r]);return i},Hd=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Ud(o,n,i,s,a,"next",e)}function a(e){Ud(o,n,i,s,a,"throw",e)}s(void 0)}))},Hd.apply(this,arguments)}function Fd(e,t){var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new URL(Sn.IFRAME_SRC(e));return Object.entries(t).forEach((e=>{var[t,n]=e;r.searchParams.set(t,n)})),r.toString()}(e,t);return jc.buildIframeWithAttributes({frameborder:"0",height:"0",scrolling:"no",src:r,style:"border: none !important; display: block !important; visibility: hidden !important",width:"0"})}jd.name="JsLoadTimeoutError";var Bd={build:function(e,t){return Hd.apply(this,arguments)}},qd=function(e){var t=new(Yo[e.name]||Xn);return t.fromSerializedError(e),t},Vd=function(e){return{_isSerializedError:!0,errors:e.errors,message:e.message,name:e.name}};class Gd extends vc{constructor(e){super({errorSerializer:{deserialize:e=>e instanceof Error?e:qd(e),serialize:e=>e instanceof Xn?Vd(e):e},name:e})}setErrorLogger(e,t){this.setErrorHandler((function(r,n){var i,o,s,a;void 0!==n&&(i=null===(s=n.data.payload)||void 0===s||null===(s=s.session)||void 0===s?void 0:s.instanceId,o=null===(a=n.data.payload)||void 0===a||null===(a=a.session)||void 0===a?void 0:a.sessionId),r instanceof cc?t.logEvent({errorMessage:r.message,event:"IFRAME_MESSENGER_TIMEOUT_ERROR",eventSource:Jo.App},i,o):e.captureException(r)}))}}function zd(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function $d(){var e;return e=function*(e,t,r,n,i){var o=new Gd(i);return o.setErrorLogger(t,r),o.connect({origin:Sn.ASSET_URL,window:e.contentWindow},e.id),yield o.sendMessage("INITIALIZE",n),o},$d=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){zd(o,n,i,s,a,"next",e)}function a(e){zd(o,n,i,s,a,"throw",e)}s(void 0)}))},$d.apply(this,arguments)}var Yd={build:function(e,t,r,n,i){return $d.apply(this,arguments)}},Wd={can_use_ach_auth:"NO_SUPPORT",can_use_interac:"false",can_use_override_strings:"false",client_log_level:"NONE",client_side_encryption:"NO",main_iframe_inline_experiment:"CONTROL",record_error_metrics:"false",staging_cashapp_setup:"SANDBOX"};function Kd(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Xd(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Kd(o,n,i,s,a,"next",e)}function a(e){Kd(o,n,i,s,a,"throw",e)}s(void 0)}))}}function Qd(e){return Jd.apply(this,arguments)}function Jd(){return Jd=Xd((function*(e){var t,r;if(null!==(t=crypto.subtle)&&void 0!==t&&t.digest){var n=(new TextEncoder).encode(e),i=yield crypto.subtle.digest("SHA-256",n);r=new Uint8Array(i)}else{var o=new(yield Ga({id:"square-sha256",src:"".concat(Sn.ASSET_URL,"/sha256.js")},(()=>{var e;return null===(e=window.Square)||void 0===e?void 0:e._utils.Sha256})));o.update(e),r=yield o.digest()}return Array.from(r).map((e=>e.toString(16).padStart(2,"0"))).join("")})),Jd.apply(this,arguments)}function Zd(){return(Zd=Xd((function*(e,t,r){var n=0,i="",o=r.join(",");do{n++;var s="".concat(e,":").concat(n,":").concat(o);i=yield Qd(s)}while(!i.startsWith(t));return n}))).apply(this,arguments)}r(2994),r(5734),r(3675),r(8857),r(5688),r(315),r(556);var eh={compute:function(e,t,r){return Zd.apply(this,arguments)}};function th(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?th(Object(r),!0).forEach((function(t){nh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):th(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nh(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ih(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function oh(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){ih(o,n,i,s,a,"next",e)}function a(e){ih(o,n,i,s,a,"throw",e)}s(void 0)}))}}function sh(){return sh=oh((function*(e,t,r,n){var{applicationId:i,locationId:o,hostname:s,sourceUrl:a}=e;t.logEvent({event:"INITIALIZATION:START",eventSource:Jo.App});var c,u=n.getCurrentLocale();try{c=yield ch(!0,i,o,s,u,t,r)}catch(e){if(t.logEvent({event:"INITIALIZATION:ERROR",eventSource:Jo.App,sloStatus:"bad"}),r.captureException(e),zo(e))throw new Ui("initializing the payment method");throw e}try{var{avt:l,sessionId:d,applePartnerInternalMerchantIdentifier:h,cashAppPayMerchantIdentifier:p,merchantName:f,instanceId:g,paymentMethodSupportDetail:m,featureFlagValues:v,isTestMerchant:y,powPrefix:E}=yield c.request(Ld.REQUEST_HYDRATION,{body:{applicationId:i,hostname:s,locationId:o}}),_=rh(rh({},Wd),v);"TREATMENT_1"===_.main_iframe_inline_experiment&&(c=yield ch(!1,i,o,s,u,t,r)),t.setAvt(l);var S=new Md({applePayMerchantIdentifier:h,applicationId:i,avt:l,cashAppPayMerchantIdentifier:p,hostname:s,instanceId:g,locale:u,locationId:o,merchantName:f,sessionId:d,sourceUrl:a}),A=Promise.resolve(void 0);return E&&(A=function(e,t,r,n,i,o,s){return ah.apply(this,arguments)}(i,o,d,g,E,t,r)),t.setFeatureFlagValues(_),t.logEvent({event:"INITIALIZATION:OK",eventSource:Jo.App,sloStatus:"good"},g,d),{featureFlagValues:_,isTestMerchant:y,localeStrings:n,messenger:c,paymentMethodSupportDetail:m,proofOfWorkComputePromise:A,session:S}}catch(e){if(t.logEvent({event:"INITIALIZATION:ERROR",eventSource:Jo.App,sloStatus:"bad"}),zo(e))throw new Ui("initializing the payment method");throw e}})),sh.apply(this,arguments)}function ah(){return(ah=oh((function*(e,t,r,n,i,o,s){o.logEvent({event:"PROOF_OF_WORK:START",eventSource:Jo.App},n,r);var a=[e,t||"",n];try{var c=yield eh.compute(r,i,a);return o.logEvent({event:"PROOF_OF_WORK:OK",eventSource:Jo.App},n,r),c}catch(e){s.captureException(e),o.logEvent({event:"PROOF_OF_WORK:ERROR",eventSource:Jo.App},n,r)}}))).apply(this,arguments)}function ch(e,t,r,n,i,o,s){return uh.apply(this,arguments)}function uh(){return(uh=oh((function*(e,t,r,n,i,o,s){var a=yield Bd.build(e,{applicationId:t,hostname:n});return yield Yd.build(a,s,o,{applicationId:t,hostname:n,locale:i,locationId:r})}))).apply(this,arguments)}var lh,dh,hh={initializePayment:function(e,t,r,n){return sh.apply(this,arguments)},validateVerificationDetails:function(e,t){var r=[];return e.billingContact&&"object"==typeof e.billingContact||r.push(new Ia(t,"details.billingContact","object")),e.intent&&"string"==typeof e.intent&&["CHARGE","STORE","CHARGE_AND_STORE"].includes(e.intent)||r.push(new Ia(t,"details.intent","string")),"CHARGE"!==e.intent&&"CHARGE_AND_STORE"!==e.intent||(e.amount&&"string"==typeof e.amount||r.push(new Ia(t,"details.amount","string")),e.currencyCode&&"string"==typeof e.currencyCode||r.push(new Ia(t,"details.currencyCode","string"))),r}};!function(e){e.REQUEST_APPLE_PAY_CARD_NONCE="REQUEST_APPLE_PAY_CARD_NONCE",e.REQUEST_APPLE_PAY_MERCHANT_VALIDITY="REQUEST_APPLE_PAY_MERCHANT_VALIDITY"}(lh||(lh={})),function(e){e.SUCCESS="SUCCESS",e.CANCEL="CANCEL"}(dh||(dh={}));var ph,fh={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua And Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"Finland",AZ:"Azerbaijan",BA:"Bosnia And Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria (rep.)",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthelemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia",BQ:"Bonaire, Sint Eustatius, And Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (keeling) Islands",CD:"Congo (dem. Rep.)",CF:"Central African Republic",CG:"Congo (rep.)",CH:"Switzerland",CI:"Cote D'ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CV:"Cape Verde",CW:"Curacao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Rep.",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Rep.",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (malvinas)",FM:"Micronesia (federated State Of)",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada (west Indies)",GE:"Georgia",GF:"French Guiana",GG:"Channel Islands",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia",GT:"Guatemala",GU:"Guam",GW:"Guinea-bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard And Mcdonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary (rep.)",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle Of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran",IS:"Iceland",IT:"Italy",JE:"Channel Islands",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts And Nevis",KR:"South Korea",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao (people's Dem. Rep.)",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Rep. Moldova",ME:"Montenegro",MF:"Saint Martin",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru Central Pacific",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama (rep.)",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"St. Pierre And Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestinian Territory",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Reunion",RO:"Romania",RS:"Republic Of Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SE:"Sweden",SG:"Rep. Of Singapore",SH:"Saint Helena",SI:"Slovenia",SJ:"Svalbard And Jan Mayen Islands",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome And Principe",SV:"El Salvador",SX:"Sint Maarten",SZ:"Swaziland",TC:"Turks And Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad And Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania (united Rep.)",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Vatican",VC:"Saint Vincent And The Grenadines (antilles)",VE:"Venezuela",VG:"Virgin Islands (british)",VI:"Virgin Islands (u.s.)",VN:"Viet Nam",VU:"Vanuatu",WF:"Wallis And Futuna Islands",WS:"Samoa",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"};function gh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gh(Object(r),!0).forEach((function(t){vh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function vh(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.PENDING="pending",e.FINAL="final"}(ph||(ph={}));var yh,Eh,_h,Sh,Ah={addressLines:"addressLines",city:"locality",country:"countryCode",postalCode:"postalCode",state:"administrativeArea"},Ih=["visa","masterCard","jcb","discover","amex"];function Oh(e){return{amount:e.amount,label:e.label,type:e.pending?ph.PENDING:ph.FINAL}}function bh(e){return{amount:e.amount,detail:"",identifier:e.id,label:e.label}}function Th(e,t){return t?Oh(t):e}function Ch(e,t){return t?t.map(Oh):e}function wh(e,t){return t?t.map(bh):e}function Rh(){for(var e=3;e>0&&!window.ApplePaySession.supportsVersion(e);)e--;return e}function Ph(e){var{addressLines:t,locality:r,administrativeArea:n,postalCode:i,countryCode:o,givenName:s,familyName:a,emailAddress:c,phoneNumber:u}=e;return{addressLines:t,city:r,countryCode:o&&o.toUpperCase(),email:c,familyName:a,givenName:s,phone:u,postalCode:i,state:n}}function Nh(e){var{amount:t,identifier:r,label:n}=e;return{amount:t,id:r,label:n}}function Dh(e,t,r){return{errors:(n=e,i=[],n.error&&i.push(new window.ApplePayError("addressUnserviceable","postalAddress",n.error)),n.shippingErrors&&Object.entries(n.shippingErrors).forEach((e=>{var[t,r]=e,n=Ah[t]||"postalAddress";i.push(new window.ApplePayError("shippingContactInvalid",n,r))})),i),newLineItems:Ch(t.lineItems,od(e,r)),newShippingMethods:wh(t.shippingMethods,e.shippingOptions),newTotal:Th(t.total,e.total)};var n,i}function Lh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lh(Object(r),!0).forEach((function(t){kh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kh(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mh(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Uh(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Mh(o,n,i,s,a,"next",e)}function a(e){Mh(o,n,i,s,a,"throw",e)}s(void 0)}))}}class jh extends La{constructor(e,t,r){if(super(t),this.methodType=Xi.APPLE_PAY,this.sessionInProgress=!1,this.wasFirstInteractionCalled=!1,this.paymentMethodMessenger=new Ma(this.context),this.paymentRequestLockController=r,this.req=e,void 0===window.ApplePaySession)throw new Ti(ga);if(!window.ApplePaySession.canMakePayments())throw new Ti(ma);this.validateConfiguration()}tokenize(){var e=this;return Uh((function*(){var t=La.withErrorCapture(e.tokenizeWrapped.bind(e),e.errorLogger,"Apple Pay");return yield t()}))()}tokenizeWrapped(){var e=this;return Uh((function*(){if(e.handleFirstInteraction(),e.throwIfDestroyed(),e.sessionInProgress)throw new Mi([ka]);var t=!1;e.applePayPaymentRequest=function(e,t){var r=[...Ih];t&&r.push("interac");var n,i={countryCode:e.countryCode,currencyCode:e.currencyCode,lineItems:Ch([],od(e)),merchantCapabilities:["supports3DS"],requiredBillingContactFields:["postalAddress"],shippingMethods:wh([],e.shippingOptions),supportedNetworks:r,total:Oh(e.total)};return e.shippingContact&&(i.shippingContact={addressLines:(n=e.shippingContact).addressLines,administrativeArea:n.state,country:fh[n.countryCode],countryCode:n.countryCode,emailAddress:n.email,familyName:n.familyName,givenName:n.givenName,locality:n.city,phoneNumber:n.phone,postalCode:n.postalCode}),e.requestBillingContact&&(i.requiredShippingContactFields=["email","name","phone"]),e.requestShippingContact&&(i.requiredShippingContactFields=["postalAddress","name","email","phone"]),i}(e.req,e.context.featureFlagActive("can_use_interac")),e.errorLogger.addBreadcrumb({message:"Creating Apple Pay session"}),e.sessionHandler=new window.ApplePaySession(Rh(),e.applePayPaymentRequest);var r=e.shippingContactChanged.bind(e);e.getApplePaySession("onshippingcontactselected").onshippingcontactselected=t=>{r(t.shippingContact,e.applePayPaymentRequest)};var n=e.shippingOptionChanged.bind(e);e.getApplePaySession("onshippingmethodselected").onshippingmethodselected=t=>{n(t.shippingMethod,e.applePayPaymentRequest)};var i=new Promise((r=>{e.getApplePaySession("oncancel").oncancel=()=>{e.metricsHandler.logEvent("EXTERNAL_SESSION:CANCEL"),t=!0,r({status:dh.CANCEL})}})),o=new Promise(((t,r)=>{e.getApplePaySession("onvalidatemerchant").onvalidatemerchant=function(){var n=Uh((function*(n){try{var i=yield e.requestApplePayMerchantValidity(n.validationURL,e.applePayPaymentRequest);t(i)}catch(e){r(e)}}));return function(e){return n.apply(this,arguments)}}()})),s=new Promise(((t,r)=>{e.getApplePaySession("onpaymentauthorized").onpaymentauthorized=function(){var n=Uh((function*(n){try{var i=yield e.requestApplePayCardNonce(n);t(i)}catch(e){r(e)}}));return function(e){return n.apply(this,arguments)}}()}));e.errorLogger.addBreadcrumb({message:"Marking Apple Pay session as in progress"}),e.sessionInProgress=!0,e.paymentRequestLockController.lock(e),e.metricsHandler.logEvent("EXTERNAL_SESSION:START"),e.getApplePaySession("begin").begin();try{var a=yield o;if(t)return{status:Ji.CANCEL};e.getApplePaySession("completeMerchantValidation").completeMerchantValidation(a);var{status:c,token:u,details:l}=yield Promise.race([s,i]);return e.metricsHandler.logEvent("EXTERNAL_SESSION:OK"),c===dh.SUCCESS?{details:l,status:Ji.OK,token:u}:{status:Ji.CANCEL}}catch(t){throw e.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR"),t}finally{e.deleteApplePaySession("cleaning up session")}}))()}destroy(){return this.sessionHandler&&(this.sessionHandler.abort(),this.deleteApplePaySession("destroy")),this.status=wa.DESTROYED,this.metricsHandler.logEvent("DESTROYED"),Promise.resolve(!0)}validateConfiguration(){var e=this.session;if(!e.applePayMerchantIdentifier)throw new Ti(Ea,"applePayMerchantIdentifier");if(!e.locationId)throw new Ti(Ea,"locationId")}requestApplePayCardNonce(e){var t=this;return Uh((function*(){yield t.context.waitForAnalyticsAndProofOfWorkCompletion();var r={applepayData:e.payment},n=t.selectedShippingMethod||t.getDefaultShippingMethod();try{var i=yield t.paymentMethodMessenger.request(lh.REQUEST_APPLE_PAY_CARD_NONCE,r);return t.getApplePaySession("completePayment").completePayment(window.ApplePaySession.STATUS_SUCCESS),t.context.setPaymentMethodTrackingId(i.paymentMethodTrackingId),t.wasFirstInteractionCalled=!1,function(e,t){var{card:r,cardNonce:n,shippingContact:i,billingContact:o}=e,s={details:{card:r,method:Xi.APPLE_PAY},status:dh.SUCCESS,token:n};if(i){var a={contact:i};t&&(a.option=Nh(t)),s.details.shipping=a}return o&&(s.details.card&&(s.details.card.billing=o),s.details.billing=o),s}(i,n)}catch(e){throw t.getApplePaySession("completePayment upon status failure").completePayment(window.ApplePaySession.STATUS_FAILURE),e}}))()}requestApplePayMerchantValidity(e,t){var r=this;return Uh((function*(){var n,i=t&&t.total?t.total.label:null,o=r.session,s={clientId:o.applicationId,locationId:o.locationId,merchantName:i,sourceUrl:o.sourceUrl,validationUrl:e};try{n=yield r.paymentMethodMessenger.request(lh.REQUEST_APPLE_PAY_MERCHANT_VALIDITY,s)}catch(e){throw r.getApplePaySession("abort").abort(),e}try{return JSON.parse(n.session)}catch(e){throw r.getApplePaySession("error parsing validate merchant payload").abort(),e}}))()}shippingContactChanged(e,t){var r=Rh()>=3?this.updateApplePayShippingContactV3(t):this.updateApplePayShippingContactLegacy(t);this.req.hasEventListener(Qi.SHIPPING_CONTACT_CHANGED)?this.req.dispatchEvent(Qi.SHIPPING_CONTACT_CHANGED,{contactOrOption:Ph(e)},(e=>{this.metricsHandler.logEvent("EVENT_LISTENER_ON_COMPLETE_RESPONSE",xh(xh({},e),{},{eventName:Qi.SHIPPING_CONTACT_CHANGED})),this.handleShippingContactUpdate(r,e)})):this.handleShippingContactUpdate(r)}handleShippingContactUpdate(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null===(t=r.shippingOptions)||void 0===t?void 0:t[0],i=this.getDefaultShippingMethod();void 0===n&&null!==i&&(n=Nh(i)),void 0!==n&&this.req.hasEventListener(Qi.SHIPPING_OPTION_CHANGED)?(this.selectedShippingMethod=bh(n),this.req.dispatchEvent(Qi.SHIPPING_OPTION_CHANGED,{contactOrOption:n},(t=>{this.metricsHandler.logEvent("EVENT_LISTENER_ON_COMPLETE_RESPONSE",xh(xh({},t),{},{eventName:Qi.SHIPPING_OPTION_CHANGED})),e(Object.assign({},r,t))}))):e(r)}shippingOptionChanged(e,t){this.selectedShippingMethod=e;var r=Rh()>=3?this.updateApplePayShippingMethodV3(t):this.updateApplePayShippingMethodLegacy(t);this.req.hasEventListener(Qi.SHIPPING_OPTION_CHANGED)?this.req.dispatchEvent(Qi.SHIPPING_OPTION_CHANGED,{contactOrOption:Nh(e)},r):r()}updateApplePayPaymentRequest(e){e.newTotal&&(this.applePayPaymentRequest.total=e.newTotal),e.newLineItems&&(this.applePayPaymentRequest.lineItems=e.newLineItems),e.newShippingMethods&&(this.applePayPaymentRequest.shippingMethods=e.newShippingMethods)}updateApplePayShippingContactV3(e){var t=this;return function(){var r=Dh(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e,t.req);t.updateApplePayPaymentRequest(r),t.metricsHandler.logEvent("SHIPPING_ADDRESS_CHANGE:OK"),t.getApplePaySession("completeShippingContactSelection").completeShippingContactSelection(r)}}updateApplePayShippingContactLegacy(e){var t=this;return function(){var r,n,i,o,s=(r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e,i=t.req,o=Dh(r,n,i),mh({status:window.ApplePaySession.STATUS_SUCCESS},o));t.updateApplePayPaymentRequest(s),t.metricsHandler.logEvent("SHIPPING_ADDRESS_CHANGE:OK"),t.getApplePaySession("completeShippingContactSelection").completeShippingContactSelection(s.status,s.newShippingMethods,s.newTotal,s.newLineItems)}}updateApplePayShippingMethodV3(e){var t=this;return function(){var r,n,i,o=(r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e,i=t.req,{newLineItems:Ch(n.lineItems,od(r,i)),newTotal:Th(n.total,r.total)});t.updateApplePayPaymentRequest(o),t.metricsHandler.logEvent("SHIPPING_OPTION_CHANGE:OK"),t.getApplePaySession("completeShippingMethodSelection").completeShippingMethodSelection(o)}}updateApplePayShippingMethodLegacy(e){var t=this;return function(){var r,n,i,o,s=(r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e,i=t.req,o=Dh(r,n,i),mh({status:window.ApplePaySession.STATUS_SUCCESS},o));t.updateApplePayPaymentRequest(s),t.metricsHandler.logEvent("SHIPPING_OPTION_CHANGE:OK"),t.getApplePaySession("completeShippingMethodSelection").completeShippingMethodSelection(s.status,s.newTotal,s.newLineItems)}}getDefaultShippingMethod(){var e=this.applePayPaymentRequest.shippingMethods;return e&&e.length>0?this.applePayPaymentRequest.shippingMethods[0]:null}deleteApplePaySession(e){this.errorLogger.addBreadcrumb({data:{context:e},message:"Deleting Apple Pay session"}),delete this.sessionHandler,this.paymentRequestLockController.unlock(this),this.sessionInProgress=!1}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.metricsHandler.logEvent("FIRST_INTERACTION:OK"),this.wasFirstInteractionCalled=!0)}getSessionHandler(){return this.sessionHandler}getApplePaySession(e){this.errorLogger.addBreadcrumb({data:{context:e},message:"Retrieving Apple Pay session"});var t=this.getSessionHandler();if(void 0===t){var r="getting Apple Pay Session: context ".concat(e);throw new Ui(r)}return t}}!function(e){e.SHIPPING_ADDRESS_UNRECOGNIZED="SHIPPING_ADDRESS_UNRECOGNIZED",e.SHIPPING_ADDRESS_UNSUPPORTED="SHIPPING_ADDRESS_UNSUPPORTED",e.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE"}(yh||(yh={})),function(e){e.BADGE="badge",e.LOCKUP="lockup"}(Eh||(Eh={})),function(e){e.BLACK="black",e.WHITE="white",e.MINT="mint"}(_h||(_h={})),function(e){e.REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN="REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN",e.REQUEST_AFTERPAY_CHECKOUT_HANDLER="REQUEST_AFTERPAY_CHECKOUT_HANDLER"}(Sh||(Sh={}));var Hh="".concat(Sn.ASSET_URL,"/afterpay.css"),Fh="sq-afterpay-styles",Bh={[qn.BLACK]:{[Vn.CheckoutWithAfterpay]:"afterpay-buttons/Afterpay_Checkout_Button_Black-White.svg",[Vn.BuyNowWithAfterpay]:"afterpay-buttons/Afterpay_BuyNow_Button_Black-White.svg",[Vn.PlaceOrderWithAfterpay]:"afterpay-buttons/Afterpay_PlaceOrder_Button_Black-White.svg"},[qn.MINT]:{[Vn.CheckoutWithAfterpay]:"afterpay-buttons/Afterpay_Checkout_Button_Mint-Black.svg",[Vn.BuyNowWithAfterpay]:"afterpay-buttons/Afterpay_BuyNow_Button_Mint-Black.svg",[Vn.PlaceOrderWithAfterpay]:"afterpay-buttons/Afterpay_PlaceOrder_Button_Mint-Black.svg"}},qh={[qn.BLACK]:{[Vn.CheckoutWithAfterpay]:"afterpay-buttons/Clearpay_Checkout_Button_Black-White.svg",[Vn.BuyNowWithAfterpay]:"afterpay-buttons/Clearpay_BuyNow_Button_Black-White.svg",[Vn.PlaceOrderWithAfterpay]:"afterpay-buttons/Clearpay_PlaceOrder_Button_Black-White.svg"},[qn.MINT]:{[Vn.CheckoutWithAfterpay]:"afterpay-buttons/Clearpay_Checkout_Button_Mint-Black.svg",[Vn.BuyNowWithAfterpay]:"afterpay-buttons/Clearpay_BuyNow_Button_Mint-Black.svg",[Vn.PlaceOrderWithAfterpay]:"afterpay-buttons/Clearpay_PlaceOrder_Button_Mint-Black.svg"}},Vh=new Set(["US","CA","AU","NZ"]);function Gh(e,t){var r=0;return e.forEach((e=>{r+=So.paymentRequestAmountToMoneyAmount(e,t)})),So.moneyAmountToPaymentRequestAmount(r,t)}function zh(e,t){return Gh(e.map((e=>e.amount)),t)}var $h=function(e){return{area1:e.city,countryCode:e.countryCode,line1:e.addressLines[0],line2:e.addressLines[1],name:"".concat(e.givenName," ").concat(e.familyName),phoneNumber:e.phone,postcode:e.postalCode,region:e.state}},Yh=function(e,t){return e.map((e=>({amount:{amount:e.amount,currency:t},displayName:e.label})))},Wh=function(e,t){return e.map((e=>({imageUrl:e.imageUrl,name:e.label,pageUrl:e.productUrl,price:{amount:e.amount,currency:t},quantity:1,sku:e.id})))},Kh=function(e,t){return e.shippingOptions.map((e=>({description:"",id:e.id,name:e.label,orderAmount:{amount:e.total.amount,currency:t.currencyCode},shippingAmount:{amount:e.amount,currency:t.currencyCode},taxAmount:{amount:zh(e.taxLineItems||[],t.currencyCode),currency:t.currencyCode}})))},Xh=function(e){if(e.requestShippingContact&&void 0!==e.lineItems&&e.lineItems.length>0){var t=zh(e.lineItems,e.currencyCode);if(e.discounts)t=Gh([t,(r=e.discounts,n=e.currencyCode,"-".concat(zh(r,n)))],e.currencyCode);return{amount:t,currency:e.currencyCode}}var r,n;return{amount:Gh([e.total.amount],e.currencyCode),currency:e.currencyCode}},Qh=function(e){var t,r,n=[];return[e.address1,e.address2].forEach((e=>{void 0!==e&&n.push(e)})),e.name&&([t,r]=e.name.split(/\s(?=\S+$)/)),{addressLines:n,city:e.suburb,countryCode:e.countryCode,familyName:r,givenName:t,phone:e.phoneNumber,postalCode:e.postcode,state:e.state}},Jh=function(e){return{amount:e.shippingAmount.amount,id:e.id,label:e.name}};function Zh(e,t){return zl({[t]:e},{[t]:{addressLines:"object",city:"string",countryCode:"string",familyName:"string",givenName:"string",postalCode:"string",state:"string"}})}var ep=function(e){return Zh(e,"shippingContact")};function tp(e){var t=e.split("-")[1];return Vh.has(t)}var rp=function(e,t){return tp(t)?Bh[e]:qh[e]},np=function(e){return tp(e)?"afterpay-brand.svg":"clearpay-brand.svg"},ip=[Mi],op=[ni,ii,oi,si];function sp(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}var ap=[25,50,75,100];class cp{constructor(e,t){this.attached=!1,this.req=e,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t})),this.context=t,this.locale=this.context.getSession().locale,this.currencyCode=this.req.currencyCode;var r=this.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.weeks;this.PERIOD_TEXT=[this.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.today,"2 ".concat(r),"4 ".concat(r),"6 ".concat(r)],t.addLocaleChangedListener((()=>{this.locale=this.context.getSession().locale,this.update()})),e.addEventListener(Yl.UPDATE,(()=>{this.update()}))}attach(e,t){var r,n=this;return(r=function*(){n.element=e,vl.addStyleElement(Hh,Fh,n.resolveStylePromise,n.rejectStylePromise);try{yield n.stylesLoadedPromise}catch(e){throw new Ui("attaching the Afterpay Checkout Widget")}var r=n.buildAmounts().map((e=>So.moneyAmountToInternationalizedCurrency(e,n.currencyCode,n.locale))),i=!1;t&&t.includeBranding&&(i=!0);var o=np(n.locale),s='\n      <div class="sq-ap__checkout-widget-container">\n        '.concat(i?'<div class="sq-ap__wordmark">\n                <img id="ap-wordmark-image" src="'.concat(Sn.STATIC_ASSET(o),'"/>\n              </div>'):"",'\n        <p class="sq-ap__checkout-title">').concat(n.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.title,'</p>\n        <div class="sq-ap__payment-container">\n          ').concat(r.map(((e,t)=>'\n              <div id="ap-payment-container-'.concat(t,'" class="sq-ap__individual-payment">\n                <div class="sq-ap__harvey-ball-container">\n                  ').concat(function(e){var t=12,r=2*Math.PI*6,n=r*ap[e]/100;return'\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '.concat(24," ").concat(24,'" class="sq-ap__harvey-ball">\n        <circle\n          r="').concat(t,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="white"\n        />\n        <circle\n          r="').concat(6,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="none"\n          stroke="').concat("#B2FCE4",'"\n          stroke-width="').concat(t,'"\n          stroke-dasharray="').concat(n," ").concat(r,'"\n          transform="rotate(-90) translate(-').concat(24,')"\n        />\n        <circle\n          r="').concat(t,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="none"\n          stroke-width="2"\n          stroke="black"\n       />\n      </svg>\n    ')}(t),'\n                </div>\n                <p id="ap-payment-amount-').concat(t,'" class="sq-ap__amount">').concat(e,'</p>\n                <p class="sq-ap__period">').concat(n.PERIOD_TEXT[t],"</p>\n              </div>\n            "))).join(""),"\n        </div>\n      </div>\n    ");n.element.insertAdjacentHTML("afterbegin",s),n.attached=!0},function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function s(e){sp(o,n,i,s,a,"next",e)}function a(e){sp(o,n,i,s,a,"throw",e)}s(void 0)}))})()}update(){if(this.attached&&this.element){var e=document.getElementById("ap-wordmark-image");if(e){var t=np(this.locale);e.src=Sn.STATIC_ASSET(t)}this.buildAmounts().map((e=>So.moneyAmountToInternationalizedCurrency(e,this.currencyCode,this.locale))).forEach(((e,t)=>{var r,n=null===(r=this.element)||void 0===r?void 0:r.querySelector("#ap-payment-amount-".concat(t));n&&(n.innerHTML=e)}))}}buildAmounts(){var e=So.paymentRequestAmountToMoneyAmount(this.req.total.amount,this.req.currencyCode),t=e/4;switch(e%4){case 0:return up(t,0);case 1:return up(t,1);case 2:return up(t,-2);case 3:return up(t,-1);default:return[]}}}function up(e,t){var r=Array.from({length:3}).fill(Math.round(e));return r.push(e+t),r}function lp(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function dp(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){lp(o,n,i,s,a,"next",e)}function a(e){lp(o,n,i,s,a,"throw",e)}s(void 0)}))}}var hp=new Set(["en_US","en_CA","fr_CA","en_AU","en_NZ","en_GB","fr_FR","es_ES","it_IT"]),pp=new Set(["AUD","GBP","USD","CAD","EUR"]),fp={[qn.BLACK]:"#000",[qn.MINT]:"#b2fce4"};class gp extends La{constructor(e,t,r,n,i){if(super(n),this.methodType=Xi.AFTERPAY_CLEARPAY,this.onTokenizeCallbacks=[],this.tokenizationBuffer=[],this.wasFirstInteractionCalled=!1,this.onTokenizeHandlerAdded=!1,this.transferOptions={},this.buyNowOption=!1,this.afterpayLibrary=e,this.afterpayMessagingLibrary=t,this.req=r,this.paymentRequestLockController=i,this.paymentMessenger=new Ma(this.context),this.total=this.totalMoney(),!this.session.locationId)throw new Ti(Ea,"locationId");this.locationID=this.session.locationId,this.req.addEventListener("update",(()=>{delete this.checkoutTokenResponse,this.element&&this.initializeAfterpayPopup(this.element),this.total=this.totalMoney()}))}attach(e,t){var r=this;return dp((function*(){var n,i;r.throwIfDestroyedOrAlreadyAttached(),r.status=wa.ATTACHED,r.metricsHandler.logEvent("ATTACH:START"),r.metricsHandler.logEvent("CONFIGURED",t);try{n=Gc(e)}catch(e){throw r.metricsHandler.logEvent("ATTACH:ERROR"),r.status===wa.ATTACHED&&(r.status=wa.DETACHED),e}if(!t||!t.useCustomButton){var o=document.createElement("div");n.appendChild(o);var s=o.attachShadow({mode:"open"});try{yield vl.addStyleElementToTarget(Hh,Fh,s)}catch(e){throw r.status===wa.ATTACHED&&(r.status=wa.DETACHED),new Ui("attaching Afterpay")}var a=(null==t?void 0:t.buttonColor)||qn.BLACK,c=(null==t?void 0:t.buttonType)||Vn.BuyNowWithAfterpay,u=rp(a,r.session.locale);if(!u)throw r.status===wa.ATTACHED&&(r.status=wa.DETACHED),new mi("buttonColor",a);var l=u[c];if(!l)throw r.status===wa.ATTACHED&&(r.status=wa.DETACHED),new mi("buttonType",c);var d=document.createElement("button");d.setAttribute("type","button"),d.setAttribute("class","sq-ap__button"),d.setAttribute("style","background-color: ".concat(fp[a],"; background-image: url(").concat(Sn.STATIC_ASSET(l),");")),s.append(d)}r.buyNowOption=(null==t?void 0:t.finalCtaButtonType)===Gn.BUY_NOW,r.initializeAfterpayPopup(n),r.metricsHandler.logEvent("ATTACH:OK"),r.element=n,r.onTokenizeHandlerAdded&&(null===(i=r.element)||void 0===i||i.addEventListener("click",dp((function*(){yield r.openPaymentModal()}))))}))()}attachMessaging(e,t){return this.throwIfDestroyed(),function(e){qc(e,Fc)}(e),this.afterpayMessagingLibrary.createPlacements({attributes:{amount:Number(this.req.total.amount),badgeTheme:null==t?void 0:t.badgeTheme,currency:this.req.currencyCode,locale:this.session.locale,modalLinkStyle:null==t?void 0:t.modalLinkStyle,modalTheme:null==t?void 0:t.modalTheme,size:null==t?void 0:t.size},targetSelector:e}),Promise.resolve()}attachCheckoutWidget(e,t){var r=this;return dp((function*(){if(!pp.has(r.req.currencyCode))throw new ai("Currency is not supported by Afterpay. Valid currencies are: ".concat([...pp].join(", ")));var n=new cp(r.req,r.context),i=Gc(e);yield n.attach(i,t)}))()}displayInformationModal(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=So.convertLocaleToUnderscore(this.session.locale);hp.has(t)||(t="en_US"),this.afterpayMessagingLibrary.launchModal(Object.assign({},e,{locale:t}))}onTokenize(e){var t,r=this;this.throwIfDestroyed(),this.onTokenizeCallbacks.push(e),1===this.onTokenizeCallbacks.length&&(this.tokenizationBuffer.forEach((e=>{var{result:t,error:r}=e;this.emitTokenizationResult(t,r)})),this.tokenizationBuffer=[]),this.onTokenizeHandlerAdded||void 0===this.element||null===(t=this.element)||void 0===t||t.addEventListener("click",dp((function*(){yield r.openPaymentModal()}))),this.onTokenizeHandlerAdded=!0}tokenize(){var e=this;return dp((function*(){if(e.throwIfDestroyedOrNotAttached(),e.onTokenizeHandlerAdded)throw new ti;var t,r,n=new Promise(((e,n)=>{t=e,r=n}));return e.onTokenizeCallbacks=[function(e,n){void 0===n?void 0!==e?t(e):r(new Mi([Oo.UNKNOWN])):r(n)}],yield e.openPaymentModal(),n}))()}destroy(){return this.status===wa.DESTROYED?Promise.resolve(!1):(this.detachElement(wa.DESTROYED,"DESTROYED"),Promise.resolve(!0))}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(wa.DETACHED,"DETACHED"),Promise.resolve(!0)}internalSetCheckoutToken(){var e=this;return dp((function*(){try{var t=yield e.paymentMessenger.request(Sh.REQUEST_AFTERPAY_CHECKOUT_HANDLER,e.buildCheckoutPayload());return e.checkoutTokenResponse=t,e.checkoutTokenResponse.token}catch(t){var r=t;throw So.isInstanceOf(t,[...op,Ai,li,ai])||(e.errorLogger.captureException(t),r=new Ui("tokenizing with Afterpay")),r}}))()}commenceCheckout(e){var t=this;return dp((function*(){if(t.wasFirstInteractionCalled||(t.wasFirstInteractionCalled=!0,t.metricsHandler.logEvent("FIRST_INTERACTION:OK")),t.metricsHandler.logEvent("EXTERNAL_SESSION:START"),t.paymentRequestLockController.lock(t),void 0!==t.checkoutTokenResponse&&new Date(t.checkoutTokenResponse.expires)>new Date)e.resolve(t.checkoutTokenResponse.token);else try{var r=yield t.internalSetCheckoutToken();e.resolve(r)}catch(r){t.paymentRequestLockController.unlock(t),t.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR"),t.emitTokenizationResult(void 0,r),e.reject(r.message)}}))()}completeCheckout(e){var t=this;return dp((function*(){try{if(function(e){return"SUCCESS"===e.status&&void 0!==e.orderToken}(e)){var r;yield t.context.waitForAnalyticsAndProofOfWorkCompletion();var n=yield t.paymentMessenger.request(Sh.REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN,t.buildInstantWalletTokenPayload(e.orderToken,t.total));t.metricsHandler.logEvent("EXTERNAL_SESSION:OK");var i={details:{method:Xi.AFTERPAY_CLEARPAY,shipping:{contact:{email:null==n||null===(r=n.afterpayData)||void 0===r?void 0:r.email}}},status:Ji.OK,token:n.token};null!=n&&n.billingContact&&(i.details.billing=null==n?void 0:n.billingContact),null!=n&&n.shippingContact&&(i.details.shipping={contact:null==n?void 0:n.shippingContact}),delete t.checkoutTokenResponse,t.emitTokenizationResult(i)}else t.metricsHandler.logEvent("EXTERNAL_SESSION:CANCEL"),t.emitTokenizationResult({status:Ji.CANCEL})}catch(e){var o=e;t.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR"),So.isInstanceOf(e,ip)||(t.errorLogger.captureException(e),o=new Ui("tokenizing Afterpay")),t.emitTokenizationResult(void 0,o)}t.paymentRequestLockController.unlock(t)}))()}onShippingOptionChange(e){this.metricsHandler.logEvent("SHIPPING_OPTION_CHANGE:OK"),this.total.amount=So.paymentRequestAmountToMoneyAmount(e.orderAmount.amount,this.req.currencyCode),this.req.dispatchEvent(Kn.AFTERPAY_SHIPPING_OPTION_CHANGED,{contactOrOption:Jh(e)},(e=>{}))}onShippingAddressChange(e,t){if(!this.req.hasEventListener(Kn.AFTERPAY_SHIPPING_ADDRESS_CHANGED))return this.emitTokenizationResult(void 0,new ri("PaymentRequest",Kn.AFTERPAY_SHIPPING_ADDRESS_CHANGED)),t.reject(yh.SERVICE_UNAVAILABLE),void this.afterpayLibrary.close();var r=this.req;this.metricsHandler.logEvent("SHIPPING_ADDRESS_CHANGE:OK"),this.req.dispatchEvent(Kn.AFTERPAY_SHIPPING_ADDRESS_CHANGED,{contactOrOption:Qh(e)},(e=>{if(e.error)t.reject(yh.SHIPPING_ADDRESS_UNSUPPORTED);else if(e.shippingErrors)t.reject(yh.SHIPPING_ADDRESS_UNRECOGNIZED);else{var n=Kh(e,r);t.resolve(n)}}))}emitTokenizationResult(e,t){0===this.onTokenizeCallbacks.length?this.tokenizationBuffer.push({error:t,result:e}):this.onTokenizeCallbacks.forEach((r=>{r(e,t)}))}buildInstantWalletTokenPayload(e,t){return{afterpayData:{afterpayToken:e,buyerAmount:t},analyticsToken:this.session.analyticsToken,clientID:this.session.applicationId,instanceID:this.session.instanceId,locationID:this.locationID,paymentMethodTrackingID:this.context.getPaymentMethodTrackingId(),requestBillingContact:this.req.requestBillingContact,requestShippingContact:this.req.requestShippingContact,sessionID:this.session.sessionId,websdkVersion:Sn.VERSION,websiteURL:this.session.sourceUrl}}buildCheckoutPayload(){var e,t={amount:Xh(this.req),applicationID:this.session.applicationId,discounts:[],locationID:this.locationID,popupOriginUrl:this.session.sourceUrl};if(this.req.lineItems&&(t.items=Wh(this.req.lineItems,this.req.currencyCode)),this.req.discounts&&(t.discounts=Yh(this.req.discounts,this.req.currencyCode)),this.req.requestShippingContact?e=this.req.shippingContact:this.req.pickupContact&&(e=this.req.pickupContact),void 0!==e){var r=ep(e);if(!r.isValid)throw new li(r.missingFields);t.shipping=$h(e)}return t}totalMoney(){return{amount:So.paymentRequestAmountToMoneyAmount(this.req.total.amount,this.req.currencyCode),currency:this.req.currencyCode}}openPaymentModal(){var e=this;return dp((function*(){e.afterpayLibrary.open();var t=yield new Promise(((t,r)=>{e.commenceCheckout({reject:r,resolve:t})}));e.afterpayLibrary.transfer(Object.assign({token:t},e.transferOptions))}))()}initializeAfterpayPopup(e){var t=this.commenceCheckout.bind(this),r=this.completeCheckout.bind(this),n=document.createElement("div");n.id="sq-afterpay-dummy-element-".concat(Ta()),n.style.visibility="hidden",e.appendChild(n),this.transferOptions={buyNow:this.buyNowOption,shippingOptionRequired:this.req.requestShippingContact},this.req.requestShippingContact||this.req.pickupContact||(this.transferOptions.addressMode="NO_ADDRESS");var i,o,s={addressMode:this.transferOptions.addressMode,countryCode:this.req.countryCode,onCommenceCheckout:(o=dp((function*(e){yield t(e)})),function(e){return o.apply(this,arguments)}),onComplete:(i=dp((function*(e){var{data:t}=e;yield r(t)})),function(e){return i.apply(this,arguments)}),shippingOptionRequired:this.req.requestShippingContact,target:"#".concat(n.id)};this.req.requestShippingContact?(s.onShippingAddressChange=this.onShippingAddressChange.bind(this),s.onShippingOptionChange=this.onShippingOptionChange.bind(this)):this.req.pickupContact&&(this.transferOptions.pickup=!0),this.afterpayLibrary.initializeForPopup(s),e.removeChild(n)}detachElement(e,t){this.afterpayLibrary.close(),this.element&&(this.element.innerHTML=""),this.element=null,this.tokenizationBuffer=[],this.onTokenizeCallbacks=[],this.status=e,this.metricsHandler.logEvent(t)}}var mp,vp,yp=function(e){var t="b8a38183b2e5959390488e48f9b109f6a73fd53c",r="https://portal.sandbox.afterpay.com/afterpay.js?merchant_key=".concat(t);return Sn.env===En.staging&&(r="https://portal.stage.afterpay-beta.com/afterpay.js?merchant_key=".concat(t)),Sn.env!==En.production||e.isTestMerchant||(r="https://portal.afterpay.com/afterpay.js?merchant_key=".concat(t)),Promise.all([Ka.load("afterpay",{src:r},"AfterPay",e.errorLogger),Ka.load("afterpay-messaging",{src:"https://js.afterpay.com/afterpay-1.x.js"},"Afterpay",e.errorLogger)])};!function(e){e.CUSTOMER_INTERACTION="CUSTOMER_INTERACTION",e.CUSTOMER_DISMISSED="CUSTOMER_DISMISSED",e.CUSTOMER_REQUEST_APPROVED="CUSTOMER_REQUEST_APPROVED",e.CUSTOMER_REQUEST_DECLINED="CUSTOMER_REQUEST_DECLINED",e.CUSTOMER_REQUEST_FAILED="CUSTOMER_REQUEST_FAILED"}(mp||(mp={})),function(e){e.REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN="REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN"}(vp||(vp={}));class Ep extends Xn{constructor(){super("A grant was not returned from CashApp and is required for tokenization"),this.name="CashAppPayGrantIsUndefinedError",Object.setPrototypeOf(this,Ep.prototype)}}function _p(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Sp(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){_p(o,n,i,s,a,"next",e)}function a(e){_p(o,n,i,s,a,"throw",e)}s(void 0)}))}}function Ap(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ip(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ap(Object(r),!0).forEach((function(t){Op(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ap(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Op(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bp=new Set(["USD"]),Tp="cash_app_pay_v1_element";class Cp extends La{constructor(e,t,r,n,i){if(super(n),this.methodType=Xi.CASH_APP_PAY,this.wasFirstInteractionCalled=!1,this.isMobile=!1,this.CashAppPayInstance=e,this.req=t,this.context=n,this.paymentRequestLockController=i,this.paymentMessenger=new Ma(this.context),this.tokenizeValidator=function(){return Promise.resolve(!0)},this.clickEventHandler=()=>{this.beginAuthorizationFlow()},!this.session.locationId)throw new Ti(Ea,"locationId");if(!this.session.cashAppPayMerchantIdentifier)throw new Ti(Ea,"merchantId");if(!bp.has(this.req.currencyCode))throw new Ei("".concat(this.req.currencyCode," is not supported by CashAppPay. Valid currencies are: ").concat([...bp].join(", ")));var o=So.paymentRequestAmountToMoneyAmount(this.req.total.amount,this.req.currencyCode);if(o<1)throw new Ei("".concat(this.req.total.amount," is an invalid payment amount. Total amount should be greater than 0"));if(!r.redirectURL)throw new _i;var s=Ip({actions:{payment:{amount:{currency:this.req.currencyCode,value:o},scopeId:this.session.cashAppPayMerchantIdentifier}}},r);e.customerRequest(s).catch((e=>{this.errorLogger.captureException(e),this.customerRequestFailedEvent()})),this.cashAppEventHandler={[mp.CUSTOMER_INTERACTION]:e=>this.registerExternalEventStart(e),[mp.CUSTOMER_DISMISSED]:()=>{this.dispatchEvent("customerDismissed",null)},[mp.CUSTOMER_REQUEST_APPROVED]:e=>this.customerRequestApprovedEvent(e),[mp.CUSTOMER_REQUEST_DECLINED]:()=>this.customerRequestDeclinedEvent(),[mp.CUSTOMER_REQUEST_FAILED]:()=>this.customerRequestFailedEvent()},Object.keys(mp).forEach((e=>this.CashAppPayInstance.addEventListener(e,this.cashAppEventHandler[e]))),this.paymentRequestLockController.lock(this)}attach(e,t,r){var n=this;return Sp((function*(){n.throwIfDestroyedOrAlreadyAttached();var i=t,o=!1===i;i&&i.values&&(i.theme||(i.theme=i.values));var s=function(e){if(void 0===e||!1===e)return{isValid:!0,missingFields:[]};var t={};return Object.keys(e).forEach((function(e){Ss.has(e)&&(t[e]="string")})),zl(e,t)}(i);if(!s.isValid)throw new vi(s.missingFields);var a=function(e){var t=[],r=!0;if(void 0===e||!1===e)return{isValid:r,missingFields:t};var n={shape:Ls,size:Ds,theme:xs,width:ks},i=JSON.parse(Hs(e));return Object.entries(i).forEach((function(e){var[i,o]=e;o===hs&&(r=!1,t.push([i,[...n[i]].join(",")]))})),{isValid:r,missingFields:t}}(i);if(!a.isValid)throw new yi(a.missingFields);if(r&&(n.tokenizeValidator=r),"function"!=typeof n.tokenizeValidator)throw new Si;n.metricsHandler.logEvent("ATTACH:START"),i&&n.metricsHandler.logEvent("CONFIGURED",i),n.status=wa.ATTACHED,n.element=o?Gc(e):Vc(e);try{var c=document.createElement("div");c.id=Tp,o?n.element.before(c):n.element.appendChild(c);var u="#".concat(Tp);n.renderController=yield n.CashAppPayInstance.render(u,{button:i,manage:!1}),n.element.addEventListener("click",n.clickEventHandler),n.metricsHandler.logEvent("ATTACH:OK")}catch(e){throw n.metricsHandler.logEvent("ATTACH:ERROR"),n.status===wa.ATTACHED&&(n.status=wa.DETACHED),e}}))()}destroy(){return this.status===wa.DESTROYED?Promise.resolve(!1):(this.detachElement(wa.DESTROYED,"DESTROYED"),this.paymentRequestLockController.unlock(this),this.CashAppPayInstance.restart(),Object.keys(mp).forEach((e=>this.CashAppPayInstance.removeEventListener(e,this.cashAppEventHandler[e]))),Promise.resolve(!0))}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(wa.DETACHED,"DETACHED"),Promise.resolve(!0)}addEventListener(e,t){this.metricsHandler.logEvent("EVENT_LISTENER_ADDED",e),super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}customerRequestApprovedEvent(e){var t=this;return Sp((function*(){var r=yield t.createNonce(e);t.dispatchEvent("ontokenization",{tokenResult:r})}))()}customerRequestDeclinedEvent(){var e={status:Ji.CANCEL};this.metricsHandler.logEvent("EXTERNAL_SESSION:CANCEL"),this.dispatchEvent("ontokenization",{tokenResult:e})}customerRequestFailedEvent(){var e={errors:[new Ui("tokenizing Cash App Pay")],status:Ji.ERROR};this.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR"),this.dispatchEvent("ontokenization",{tokenResult:e})}createNonce(e){var t=this;return Sp((function*(){var{customerProfile:r,grants:n,referenceId:i}=e,o=r.cashtag,s=n.payment,a=t.req.total.amount,c=t.req.currencyCode;try{if(!s)throw new Ep;yield t.context.waitForAnalyticsAndProofOfWorkCompletion();var u=yield t.paymentMessenger.request(vp.REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN,{analyticsToken:t.session.analyticsToken,applicationId:t.session.applicationId,cashAppPayData:{cashtag:o,grantId:s.grantId,isMobile:t.isMobile,referenceId:i,totalAmount:{amount:a,currency:c}},clientID:t.session.applicationId,instanceID:t.session.instanceId,locationID:t.session.locationId,paymentMethodTrackingID:t.context.getPaymentMethodTrackingId(),requestBillingContact:t.req.requestBillingContact,requestShippingContact:t.req.requestShippingContact,sessionID:t.session.sessionId,websdkVersion:Sn.VERSION,websiteURL:t.session.sourceUrl});return t.metricsHandler.logEvent("EXTERNAL_SESSION:OK"),{details:{cashAppPay:{cashtag:o,referenceId:i},method:Xi.CASH_APP_PAY},status:Ji.OK,token:u.token}}catch(e){var l=e;return t.metricsHandler.logEvent("EXTERNAL_SESSION:ERROR"),So.isInstanceOf(e,[Mi])||(t.errorLogger.captureException(e),l=new Ui("tokenizing CashAppPay")),{errors:[l],status:Ji.ERROR}}}))()}beginAuthorizationFlow(){var e=this;return Sp((function*(){if(e.throwIfDestroyedOrNotAttached(),!e.renderController)throw new Ui("Could not begin Cash App Pay authorization flow");e.metricsHandler.logEvent("CASH_APP_PAY_CLICK:VALIDATING");try{(yield e.tokenizeValidator())?(e.renderController.begin(),e.metricsHandler.logEvent("CASH_APP_PAY_AUTH:START")):e.metricsHandler.logEvent("CASH_APP_PAY_CLICK:INVALID")}catch(t){throw e.metricsHandler.logEvent("CASH_APP_PAY_CLICK:ERROR"),t}}))()}registerExternalEventStart(e){this.metricsHandler.logEvent("EXTERNAL_SESSION:START"),this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent("FIRST_INTERACTION:OK")),this.isMobile=e.isMobile,this.dispatchEvent("customerInteraction",Ip({},e))}detachElement(e,t){this.renderController&&this.renderController.destroy();var r=document.getElementById(Tp);r&&r.remove(),this.element&&this.element.removeEventListener("click",this.clickEventHandler),this.status=e,this.metricsHandler.logEvent(t)}}function wp(){return(wp=Sp((function*(e){var t="https://sandbox.kit.cash.app/v1/pay.js",r=Sn.env!==En.sandbox&&Sn.env!==En.production&&"STAGING"===e.getFeatureFlagValues().staging_cashapp_setup;r&&(t="https://kit.cashstaging.app/v1/pay.js"),Sn.env!==En.production||e.isTestMerchant||(t="https://kit.cash.app/v1/pay.js");var n=yield Ka.load("cash-app-pay",{src:t},"CashApp",e.errorLogger),i="CAS-CI_SQ_SELLER_STAGING";return Sn.env===En.sandbox||Sn.env===En.production&&e.isTestMerchant?i="CAS-CI_SQ_SELLER_SANDBOX":Sn.env===En.production?i="CA-CI_SQ_SELLER":r&&(i="SQ_SELLER"),n.pay({clientId:i})}))).apply(this,arguments)}var Rp={initialize:function(e){return wp.apply(this,arguments)}},Pp=function(e,t,r,n,i){return new gp(e,t,r,n,i)},Np=function(e,t,r){return new jh(e,t,r)},Dp=function(e,t,r,n,i){return new Cp(e,t,r,n,i)},Lp=function(e,t,r,n,i){return new Nd(e,t,r,n,i)};function xp(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}var kp={build(e,t){var r,n,i;function o(){r=e.generateFreshToken().catch((e=>("UnexpectedAnalyticsClientError"!==e.name&&t.captureException(e),void 0!==n&&(clearInterval(n),n=void 0),i)))}function s(){var e;return e=function*(){return void 0===r?null:i=yield r},s=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){xp(o,n,i,s,a,"next",e)}function a(e){xp(o,n,i,s,a,"throw",e)}s(void 0)}))},s.apply(this,arguments)}return Object.freeze({beginGenerateToken:o,retrieveCurrentToken:function(){return s.apply(this,arguments)},setupAutoRefresh:function(){void 0===n&&(n=setInterval((()=>{o()}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ra))},verifyBuyer:function(t,r){return e.verifyBuyer(t,r)}})}};class Mp extends Error{constructor(e="Unknown error",t){super(e),void 0!==t&&(this.token=t),this.name="AnalyticsError"}}class Up extends Mp{constructor(){super("Three ds method timed out while waiting for a response"),this.name="ThreeDSMethodTimeoutError"}}class jp extends Mp{constructor(){super("Form is no longer connected"),this.name="ThreeDSMethodFormError"}}class Hp extends Mp{constructor(){super("Three ds method failed with unexpected error"),this.name="ThreeDSMethodError"}}class Fp extends Mp{constructor(e,t){super(`Received 3DS method response with transaction ID ${e}, expected ${t}`),this.name="ThreeDSMethodTransactionIdError"}}class Bp extends Mp{constructor(){super("Form is no longer connected"),this.name="ChallengeFlowFormError"}}class qp extends Mp{constructor(){super("Challenge flow failed with unknown error"),this.name="ChallengeFlowError"}}class Vp extends Mp{constructor(e,t){super(`Received Challenge response with transaction ID ${e}, expected ${t}`),this.name="ChallengeResponseTransactionIdError"}}class Gp extends Mp{constructor(e){super(`The verification was not successful: ${e}`,e),this.name="VerificationError"}}class zp extends Mp{constructor(){super("A verification request is already in progress"),this.name="VerificationInProgressError"}}class $p extends Mp{constructor(e){super(`The time to complete the verification has expired: ${e}`),this.name="VerificationTimeoutError"}}function Yp(e,t,r){const n=new Error(void 0!==r?`${e}\nSee: ${r}`:e);return n.name=t,n}const Wp={analyticsParametersRequiredError:function(){return Yp("The Analytics library must be initialized with analyticsParameters to call verifyBuyer.","AnalyticsParametersRequiredError")},buildError:Yp,invalidArgumentError:function(e,t){return Yp(`The Analytics '${e}' argument must be of type '${t}'`,"InvalidArgumentError")},invalidElementTypeError:function(e,t){return Yp(`An element with selector ${e} must be of type '${t}'`,"InvalidElementTypeError")},invalidFunctionArgumentError:function(e,t,r){return Yp(`The '${e}' function '${t}' argument must be of type '${r}'.`,"InvalidFunctionArgumentError")},invalidFunctionCallbackError:function(e,t){return Yp(`The '${e}' '${t}' callback must be a function.`,"InvalidFunctionCallbackError")},missingArgumentError:function(e){return Yp(`The Analytics '${e}' argument is required.`,"MissingArgumentError")},missingChargeVerificationArgumentError:function(e,t){return Yp(`The '${e}' '${t}' is required when verificationDetails.intent is 'CHARGE'.`,"MissingChargeVerificationArgumentError")},missingElementAttributeError:function(e,t){return Yp(`An element with selector '${e}' attribute '${t}' is required`,"MissingElementAttributeError")},missingElementError:function(e){return Yp(`An element with selector '${e}' cannot be found.`,"MissingElementError")},missingFunctionArgumentError:function(e,t){return Yp(`The '${e}' '${t}' argument is required.`,"MissingFunctionArgumentError")},missingFunctionCallbackError:function(e,t){return Yp(`The '${e}' '${t}' callback is required.`,"MissingFunctionCallbackError")},noIdsError:function(){return Yp("One of analyticsParameters.locationId or analyticsParameters.accountId must be specified.","NoIdsError")},outOfRangeArgumentError:function(e,t,r,n,i=!1){return Yp(`The '${e}' function '${t}' argument must be within range: ${r} and ${n} (${(i?"inclusive":"exclusive")+" of upper limit"}).`,"OutOfRangeArgumentError")},tooManyIdsError:function(){return Yp("Only one of analyticsParameters.locationId or analyticsParameters.accountId can be specified.","TooManyIdsError")},unexpectedAnalyticsClientError:function(){return Yp("An unknown error has occurred","UnexpectedAnalyticsClientError")}},Kp={get documentVisibilityState(){return document.visibilityState},windowLocationHref:()=>window.location.href,get windowLocationOrigin(){return window.location.origin},get windowNavigationBeacon(){return window.navigator.sendBeacon.bind(window.navigator)}};let Xp;const Qp=[],Jp={};let Zp,ef=e=>{Qp.push(e)};function tf(e){if(e.origin!==Xp)return;const t=e.data;if("object"==typeof t&&"string"==typeof t.instanceId){const e=Jp[t.instanceId];"function"==typeof e&&e(t)}}function rf(e){Zp?.contentWindow&&Zp.contentWindow.postMessage(e,Xp)}function nf(){let e;for(window.addEventListener("message",tf,!1);e=Qp.shift();)rf(e);ef=rf}function of(){Zp=document.createElement("iframe"),Zp.setAttribute("width","0"),Zp.setAttribute("height","0"),Zp.setAttribute("src",`${Xp}/payments/data/frame.html?referer=${encodeURIComponent(Kp.windowLocationHref())}`),Zp.setAttribute("style","border: none !important; display: block !important; visibility: hidden !important"),Zp.setAttribute("sandbox","allow-scripts allow-same-origin"),Zp.addEventListener("load",nf),document.body.appendChild(Zp)}var sf,af,cf={init(e){Xp=e,void 0===Zp&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",of):of())},listenFor(e,t){Jp[e]=t},reset(){Zp&&(window.removeEventListener("message",tf),Zp.removeEventListener("load",nf),Zp.remove(),Zp=void 0),Qp.length=0;for(const e in Jp)delete Jp[e];document.removeEventListener("DOMContentLoaded",of)},send(e){ef(e)}};!function(e){e.AUTHENTICATED="Y",e.AUTHENTICATION_ATTEMPTED="A",e.CHALLENGE_REQUIRED="C",e.DECOUPLED_CHALLENGE_REQUIRED="D",e.NOT_AUTHENTICATED="N",e.AUTHENTICATION_COULD_NOT_BE_PERFORMED="U",e.INFORMATIONAL_ONLY="I",e.REJECTED="R"}(sf||(sf={})),function(e){e._250X400="01",e._390X400="02",e._500X600="03",e._600X400="04",e.FULL_SCREEN="05"}(af||(af={}));class uf{constructor(e){this.iframeInputs=e,this.eventListenerReference=this.handleResponse.bind(this)}async handle(){const e=new Promise(((e,t)=>{this.threeDSPromiseResolve=e,this.threeDSPromiseReject=t}));return this.build(),this.submit(),e}build(){void 0!==this.iframeInputs.iframeSelector&&document.querySelector(this.iframeInputs.iframeSelector)?this.iframe=document.querySelector(this.iframeInputs.iframeSelector):this.buildDefault();const e=`${this.iframeInputs.baseID}-form`;if(document.getElementById(e))this.form=document.getElementById(e);else{this.form=document.createElement("form"),this.form.setAttribute("id",e),this.form.setAttribute("name",`${this.iframeInputs.baseName}Form`),this.form.setAttribute("method","POST"),this.form.setAttribute("action",this.iframeInputs.notificationURL),this.form.setAttribute("target",this.iframe.name);const t=document.createElement("input");t.setAttribute("name",this.iframeInputs.notificationData.name),t.setAttribute("value",this.iframeInputs.notificationData.data),t.setAttribute("type","hidden"),this.form.appendChild(t),document.body.appendChild(this.form)}window.addEventListener("message",this.eventListenerReference)}buildDefault(){const e=`${this.iframeInputs.baseID}-modal`;document.getElementById(e)?this.modal=document.getElementById(e):(this.modal=document.createElement("div"),this.modal.id=e,this.modal.classList.add("square_threeds_modal"),document.body.appendChild(this.modal));const t=`${this.iframeInputs.baseID}-iframe`,r=document.getElementById(t);r&&this.modal.contains(r)?this.iframe=document.getElementById(t):(this.iframe=document.createElement("iframe"),this.iframe.id=t,this.iframe.name=`${this.iframeInputs.baseName}Iframe`,this.iframe.setAttribute("frameBorder","0"),this.iframe.setAttribute("width",this.iframeInputs.width),this.iframe.setAttribute("height",this.iframeInputs.height),this.iframe.setAttribute("sandbox","allow-forms allow-scripts allow-same-origin allow-pointer-lock"),this.iframe.setAttribute("style","visibility: hidden"),this.iframe.setAttribute("allowpaymentrequest","false"),this.iframe.setAttribute("allowfullscreen","false"),this.iframe.setAttribute("allow","payment *;publickey-credentials-get *"),this.iframe.classList.add("square_threeds_iframe"),this.modal.appendChild(this.iframe))}handleResponse(e){const t=e.data;if("object"==typeof t&&t.type===this.iframeInputs.listenerMessageType){this.destroy();try{this.iframeInputs.validateMessage(t),this.threeDSPromiseResolve(t)}catch(e){this.threeDSPromiseReject(e)}}}submit(){this.form.isConnected?(this.form.submit(),void 0!==this.iframeInputs.onShow&&this.iframeInputs.onShow(this.iframe,this.modal),void 0!==this.iframeInputs.timeoutSeconds&&(this.timeoutID=window.setTimeout(this.timedOut.bind(this),1e3*this.iframeInputs.timeoutSeconds))):(this.destroy(),this.threeDSPromiseReject(this.iframeInputs.getErrorMessage("SQUARE_3DS_IFRAME_FORM_DISCONNECTED")))}timedOut(){this.destroy(),this.threeDSPromiseReject(this.iframeInputs.getErrorMessage("SQUARE_3DS_IFRAME_TIMEOUT"))}destroy(){void 0!==this.timeoutID&&window.clearTimeout(this.timeoutID),window.removeEventListener("message",this.eventListenerReference),void 0!==this.iframeInputs.onDestroy&&this.iframeInputs.onDestroy(this.iframe),this.form.isConnected&&this.form.remove(),void 0!==this.modal&&this.modal.isConnected&&(this.iframe.isConnected&&this.iframe.remove(),this.modal.remove())}}function lf(e){switch(e){case"SQUARE_3DS_IFRAME_TIMEOUT":return new Up;case"SQUARE_3DS_IFRAME_FORM_DISCONNECTED":return new jp;default:return new Hp}}class df{constructor(e){if(void 0===e.threeDsMethodUrl||void 0===e.threeDsMethodNotificationUrl)throw new Error(`Cannot complete 3DS method flow, one or more of threeDSMethodUrl and threeDSMethodNotificationUrl are undefined. Transaction data: ${JSON.stringify(e)}`);this.threeDsMethodUrl=e.threeDsMethodUrl,this.threeDSMethodData={threeDSMethodNotificationURL:e.threeDsMethodNotificationUrl,threeDSServerTransID:e.threeDSServerTransId},this.square3DSMethodIframe=new uf({baseID:"sq-threeds-3ds-method",baseName:"3DSMethod",getErrorMessage:lf,height:"10",listenerMessageType:"threeDsMethodResponse",notificationData:{data:btoa(JSON.stringify(this.threeDSMethodData)),name:"threeDSMethodData"},notificationURL:this.threeDsMethodUrl,timeoutSeconds:11,validateMessage:this.validateMessage.bind(this),width:"10"})}async handle3DSMethod(){return this.square3DSMethodIframe.handle()}validateMessage(e){if(e.threeDsServerTransId!==this.threeDSMethodData.threeDSServerTransID)throw new Fp(e.threeDsServerTransId,this.threeDSMethodData.threeDSServerTransID)}}const hf="data-challenge-displayed",pf="VISIBLE";function ff(e){return"SQUARE_3DS_IFRAME_FORM_DISCONNECTED"===e?new Bp:new qp}class gf{constructor(e,t,r,n){if(this.errorLogger=t,this.esLogger=r,void 0===e.acsUrl||void 0===e.encodedCReq)throw new Error(`Cannot complete Challenge flow, acsUrl or encodedCReq is undefined. Transaction data: ${JSON.stringify(e)}`);this.acsUrl=e.acsUrl,this.challengeFlowData={encodedCReq:e.encodedCReq,threeDSServerTransID:e.threeDSServerTransId};const i=this.decodeChallengeWindowSize();void 0!==n&&({challengeDisplayedCallback:this.challengeDisplayedCallback,challengeHiddenCallback:this.challengeHiddenCallback,elementSelector:this.iframeSelector}=n);const o={baseID:"sq-threeds-challenge-flow",baseName:"3DSChallengeFlow",getErrorMessage:ff,height:`${i.height}`,listenerMessageType:"challengeResponse",notificationData:{data:this.challengeFlowData.encodedCReq,name:"creq"},notificationURL:this.acsUrl,onDestroy:this.onDestroy.bind(this),onShow:this.onShow.bind(this),timeoutSeconds:610,validateMessage:this.validateMessage.bind(this),width:`${i.width}`};void 0!==this.iframeSelector&&(o.iframeSelector=this.iframeSelector),this.squareChallengeFlowIframe=new uf(o)}async handleChallengeFlow(){const e=this.decodeCReq(this.challengeFlowData.encodedCReq);return e&&this.esLogger.trackTdsEvent({catalog_name:"tds_analyticsjs_c_req",tds_analyticsjs_c_req_message_version:e.messageVersion,tds_base_three_ds_server_trans_id:e.threeDsServerTransId||this.challengeFlowData.threeDSServerTransID}),this.squareChallengeFlowIframe.handle().then((e=>(this.esLogger.trackTdsEvent({catalog_name:"tds_analyticsjs_c_res",tds_analyticsjs_c_res_message_version:e.messageVersion,tds_analyticsjs_c_res_trans_status:e.transStatus,tds_base_three_ds_server_trans_id:e.threeDsServerTransId}),e)))}onShow(e,t){e.setAttribute(hf,pf),e.setAttribute("style","visibility: visible"),void 0!==this.challengeDisplayedCallback&&this.challengeDisplayedCallback(),t&&t.classList.add("square_threeds_modal__show")}onDestroy(e){const t=e.getAttribute(hf)===pf;e.setAttribute(hf,"REMOVED"),void 0!==this.challengeHiddenCallback&&t&&this.challengeHiddenCallback()}validateMessage(e){if(e.threeDsServerTransId!==this.challengeFlowData.threeDSServerTransID)throw new Vp(e.threeDsServerTransId,this.challengeFlowData.threeDSServerTransID)}decodeChallengeWindowSize(){let e=af._250X400;try{const t=JSON.parse(atob(this.challengeFlowData.encodedCReq));null!==t&&"object"==typeof t&&"challengeWindowSize"in t&&(e=t.challengeWindowSize)}catch(e){this.errorLogger.captureException(e,{captureContext:{tags:{action:"nonFatal-challenge"}}})}switch(e){case af._390X400:return{height:400,width:390};case af._500X600:return{height:600,width:500};case af._600X400:return{height:400,width:600};case af.FULL_SCREEN:return{height:document.documentElement.clientHeight,width:document.documentElement.clientWidth};case af._250X400:default:return{height:400,width:250}}}decodeCReq(e){try{return JSON.parse(atob(e))}catch(t){return this.errorLogger.addBreadcrumb({data:{encodedCReq:e},message:"Unable to parse JSON for challenge request message",type:"error"}),this.errorLogger.captureException(t,{captureContext:{tags:{action:"nonFatal-challenge"}}}),null}}}var mf;!function(e){e.COMPLETED="COMPLETED",e.ERROR="ERROR"}(mf||(mf={}));class vf{constructor(e,t){this.userChallenged=!1,this.esLogger=e,this.errorLogger=t}async execute3dsAuthentication(e,t){this.configuration=e,this.threeDsTransactionData=t,await this.handle3DSMethodFlow();try{const e=await this.authenticate();await this.handleAuthenticateResponse(e)}catch(e){this.handleError(e)}}async handle3DSMethodFlow(){if(void 0!==this.threeDsTransactionData?.threeDsMethodUrl)try{const e=new df(this.threeDsTransactionData);await e.handle3DSMethod()}catch(e){this.errorLogger.captureException(e,{captureContext:{tags:{action:"nonFatal-challenge"}}})}}async handleChallengeFlow(e){this.esLogger.trackAnalyticsEvent({analyticsjs_event:"buyer_challenged",analyticsjsverification_challenge_type:"3DS",analyticsjsverification_id:this.threeDsTransactionData.verificationId,analyticsjsverification_user_challenged:!0,analyticsjsverification_verification_token:this.threeDsTransactionData.verificationToken});const t={threeDSServerTransId:e.three_ds_server_trans_id};return void 0!==e.encoded_creq&&(t.encodedCReq=e.encoded_creq),void 0!==e.challenge_acs_url&&(t.acsUrl=e.challenge_acs_url),new gf(t,this.errorLogger,this.esLogger,this.configuration.verifyBuyerCustomElement).handleChallengeFlow()}authenticate(){const e={browser_info:{color_depth:window.screen.colorDepth,java_enabled:window.navigator.javaEnabled(),screen_height:window.innerHeight,screen_width:window.innerWidth},client_id:"",token:this.threeDsTransactionData.verificationToken};return this.configuration.callbacks.postAuthenticate(e)}async handleAuthenticateResponse(e){if(void 0===e.errors)if(e.three_ds_trans_status===sf.CHALLENGE_REQUIRED)try{this.userChallenged=!0,await this.handleChallengeFlow(e),this.configuration.callbacks.onComplete({status:mf.COMPLETED,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:!0})}catch(e){this.handleError(e)}else this.configuration.callbacks.onComplete({status:mf.COMPLETED,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:this.userChallenged});else this.configuration.callbacks.onComplete({status:mf.ERROR,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:this.userChallenged})}handleError(e){this.errorLogger.captureException(e,{captureContext:{tags:{action:"nonFatal-challenge"}}}),this.configuration.callbacks.onComplete({status:mf.ERROR,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:this.userChallenged})}}class yf{constructor(e,t,r){this.callback=e,this.onError=r,this.called=!1,this.callback=e,this.timeout=window.setTimeout((()=>this.timedOut()),t),this.onError=r}invoke(...e){this.called?this.callback(...this.onError):(clearTimeout(this.timeout),this.called=!0,this.callback(...e))}timedOut(){this.invoke(...this.onError)}}function Ef(e){return e instanceof Mp}class _f{constructor(e,t,r,n,i){this.instanceId=e,this.applicationId=t,this.analyticsParameters=r,this.esLogger=n,this.errorLogger=i,this.challengeUpdatesQueue=[],this.verificationUpdatePending=!1,this.userChallenged=!1,(()=>{this.pendingVerifyBuyerCall&&this.verifyBuyer(this.pendingVerifyBuyerCall.verificationId,this.pendingVerifyBuyerCall.source,this.pendingVerifyBuyerCall.details,this.pendingVerifyBuyerCall.callback,this.pendingVerifyBuyerCall.verifyBuyerCustomElement)})()}verifyBuyer(e,t,r,n,i){void 0===this.verifyBuyerCallback?(this.squareThreeds=new vf(this.esLogger,this.errorLogger),this.verifyBuyerCallback=new yf(((e,t)=>{n(e,t),delete this.verifyBuyerCallback}),9e5,[new $p(e)]),this.getVerification(e,t,r)):n(new zp,null)}updateVerification(e,t){const r=t.some((e=>{if("SQUARE_THREEDS"===e.type){const t=e.square_threeds_verification?.status;return function(e){return"CANCELED"===e||"REJECTED"===e||"AUTHENTICATED"===e||"COMPLETED"===e}(t)||"ERROR"===t}return!1})),n={challengeUpdates:t,token:this.token},i={analyticsParameters:this.analyticsParameters,applicationId:this.applicationId,data:n,instanceId:this.instanceId,type:"requestVerificationUpdate",verificationId:e,version:2};!this.verificationUpdatePending||r?(cf.send(i),this.verificationUpdatePending=!r):this.challengeUpdatesQueue.push(t)}handleThreeDsAuthenticate(e,t){Ef(t)?this.threeDsAuthenticatePromiseReject(t):this.threeDsAuthenticatePromiseResolve(t)}handleChallenges(e,t){if(void 0===this.verifyBuyerCallback)return;const r=this.challengeUpdatesQueue.shift();if(void 0!==r?this.updateVerification(e,r):this.verificationUpdatePending=!1,Ef(t))return void this.verifyBuyerCallback.invoke(t,null);this.token=t.token;const n={token:this.token,userChallenged:this.userChallenged};switch(t.status){case"COMPLETED":this.verifyBuyerCallback.invoke(null,n);break;case"CANCELED":this.verifyBuyerCallback.invoke(new Gp(t.token),null);break;case"PENDING":for(const r of t.challenges)if("SQUARE_THREEDS"===r.type){if(this.squareThreedsConfiguration={callbacks:{onComplete:t=>{this.handleSquareThreeDsComplete(t,e)},postAuthenticate:t=>this.handlePostAuthenticate(t,e)}},!this.isValidSquareThreeDsChallenge(r))return;this.squareThreeDsTransactionData={directoryServerId:r.square_three_ds_verification.directory_server_id,messageVersion:r.square_three_ds_verification.message_version,threeDSServerTransId:r.square_three_ds_verification.three_ds_server_transaction_id,threeDsMethodNotificationUrl:r.square_three_ds_verification?.three_ds_method_notification_url,threeDsMethodUrl:r.square_three_ds_verification?.three_ds_method_url,verificationId:e,verificationToken:this.token},this.squareThreeds.execute3dsAuthentication(this.squareThreedsConfiguration,this.squareThreeDsTransactionData)}break;default:this.errorLogger.captureException(new Mp(`Invalid verification response status: ${t.status}`),{captureContext:{tags:{action:"nonFatal-verify"}}})}}isValidSquareThreeDsChallenge(e){return void 0!==e.square_three_ds_verification?.three_ds_server_transaction_id}getVerification(e,t,r){const n={analyticsParameters:this.analyticsParameters,applicationId:this.applicationId,data:{source:t,verificationDetails:r},instanceId:this.instanceId,type:"requestVerification",verificationId:e,version:2};cf.send(n)}handleSquareThreeDsComplete(e,t){this.userChallenged=e.userChallenged;const r={square_threeds_verification:{directory_server_id:this.squareThreeDsTransactionData.directoryServerId,message_version:this.squareThreeDsTransactionData.messageVersion,status:e.status===mf.COMPLETED?mf.COMPLETED:mf.ERROR,three_ds_server_transaction_id:e.threeDsServerTransId},type:"SQUARE_THREEDS"};this.updateVerification(t,[r])}handlePostAuthenticate(e,t){const r=new Promise(((e,t)=>{this.threeDsAuthenticatePromiseResolve=e,this.threeDsAuthenticatePromiseReject=t}));return cf.send({analyticsParameters:this.analyticsParameters,applicationId:this.applicationId,data:{...e,client_id:this.applicationId},instanceId:this.instanceId,type:"requestThreeDsAuthenticate",verificationId:t,version:3}),r}}function Sf(e,t){if(!e)throw Wp.missingFunctionCallbackError("IframeCustomElement",t);if("function"!=typeof e)throw Wp.invalidFunctionCallbackError("IframeCustomElement",t)}function Af(e){if("object"!=typeof e||!e)return"";const t=[];return"string"==typeof e.familyName&&e.familyName&&t.push("familyName"),"string"==typeof e.givenName&&e.givenName&&t.push("givenName"),"string"==typeof e.email&&e.email&&t.push("email"),"string"==typeof e.country&&e.country&&t.push("country"),"string"==typeof e.countryName&&e.countryName&&t.push("countryName"),"string"==typeof e.region&&e.region&&t.push("region"),"string"==typeof e.city&&e.city&&t.push("city"),"object"==typeof e.addressLines&&e.addressLines.join()&&t.push("addressLines"),"string"==typeof e.postalCode&&e.postalCode&&t.push("postalCode"),"string"==typeof e.phone&&e.phone&&t.push("phone"),t.join(",")}class If{constructor(e,t,r,n){this.applicationId=e,this.esLogger=t,this.errorLogger=r,this.instanceId=`sq-analytics-${(new Date).getMilliseconds()}-${1e5*Math.random()}`,function(e,t){if(!e)throw Wp.missingArgumentError("applicationId");if("string"!=typeof e)throw Wp.invalidArgumentError("applicationId","string");if(t){const e="locationId"in t,r="accountId"in t;if(!e&&!r)throw Wp.noIdsError();if(e&&r)throw Wp.tooManyIdsError();if(e&&"string"!=typeof t.locationId)throw Wp.invalidArgumentError("analyticsParameters.locationId","string");if(r&&"string"!=typeof t.accountId)throw Wp.invalidArgumentError("analyticsParameters.accountId","string")}}(e,n),cf.listenFor(this.instanceId,this.messageReceived.bind(this)),n&&(this.verifier=new _f(this.instanceId,this.applicationId,n,this.esLogger,this.errorLogger),this.analyticsParameters=n)}async getToken(){return new Promise(((e,t)=>{try{this._getToken((t=>e(t)))}catch(e){t(e)}}))}async verifyBuyer(e,t,r){return new Promise(((n,i)=>{this._verifyBuyer(e,t,((e,t)=>{e?i(e):n(t)}),r)}))}messageReceived(e){if("receiveToken"===e.type&&"function"==typeof this.tokenCallback)this.tokenCallback(e.token),delete this.tokenCallback;else if("receiveVerification"===e.type||"receiveVerificationUpdate"===e.type){const t="receiveVerification"===e.type?"receive_verification":"receive_verification_update";this.esLogger.trackAnalyticsEvent({analyticsjs_event:t,analyticsjsverification_id:e.verificationId,analyticsjsverification_verification_token:e.response.token}),this.verifier.handleChallenges(e.verificationId,e.response)}else"receiveThreeDsAuthenticate"===e.type&&(this.esLogger.trackAnalyticsEvent({analyticsjs_event:"receive_three_ds_authenticate",analyticsjsverification_id:e.verificationId,analyticsjsverification_verification_token:e.token}),this.verifier.handleThreeDsAuthenticate(e.verificationId,e.response))}_getToken(e){try{if(void 0!==this.tokenCallback)return;this.tokenCallback=e;const t={applicationId:this.applicationId,instanceId:this.instanceId,type:"requestToken",version:1};cf.send(t)}catch(e){throw this.errorLogger.captureException(e,{captureContext:{tags:{action:"getToken"}}}),Wp.unexpectedAnalyticsClientError()}}_verifyBuyer(e,t,r,n){const i=t,o=`verify-buyer-${(new Date).getMilliseconds()}-${1e5*Math.random()}`;try{this.esLogger.trackAnalyticsEvent({analyticsjs_event:"verify_buyer_invoked",analyticsjsverification_amount:i.amount,analyticsjsverification_contact_fields:Af(i.billingContact),analyticsjsverification_currency:i.currencyCode,analyticsjsverification_custom_score:null===i.customScore?void 0:i.customScore,analyticsjsverification_id:o,analyticsjsverification_intent:i.intent,analyticsjsverification_source:e,analyticsjsverification_source_prefix:e.substr(0,5),analyticsjsverification_square_product:i.squareProduct})}catch(e){throw this.errorLogger.captureException(e,{captureContext:{tags:{action:"verifyBuyer"}}}),Wp.unexpectedAnalyticsClientError()}try{!function(e,t,r,n,i){const o="verifyBuyer";if(!e)throw Wp.analyticsParametersRequiredError();if(void 0===t)throw Wp.missingFunctionArgumentError(o,"source");if("string"!=typeof t)throw Wp.invalidFunctionArgumentError(o,"source","string");if(!r)throw Wp.missingFunctionArgumentError(o,"verificationDetails");if("object"!=typeof r)throw Wp.invalidFunctionArgumentError(o,"verificationDetails","object");if(function(e,t){const r="verificationDetails";if("object"!=typeof t.billingContact)throw Wp.invalidFunctionArgumentError(e,`${r}.billingContact`,"object");const{customScore:n}=t;if(null!=n){if("number"!=typeof n||Number.isNaN(n))throw Wp.invalidFunctionArgumentError(e,`${r}.customScore`,"integer");if(n<0||n>1e3)throw Wp.outOfRangeArgumentError(e,`${r}.customScore`,0,1e3,!0)}if("string"!=typeof t.intent)throw Wp.invalidFunctionArgumentError(e,`${r}.intent`,"string");if("CHARGE"===t.intent||"CHARGE_AND_STORE"===t.intent){if(!t.currencyCode)throw Wp.missingChargeVerificationArgumentError(e,`${r}.currencyCode`);if("string"!=typeof t.currencyCode)throw Wp.invalidFunctionArgumentError(e,`${r}.currencyCode`,"string");if(!t.amount)throw Wp.missingChargeVerificationArgumentError(e,`${r}.amount`);if("string"!=typeof t.amount)throw Wp.invalidFunctionArgumentError(e,`${r}.amount`,"string")}}(o,r),!n)throw Wp.missingFunctionCallbackError(o,"verifyBuyerCallback");if("function"!=typeof n)throw Wp.invalidFunctionCallbackError(o,"verifyBuyerCallback");void 0!==i&&(function(e){if("string"!=typeof e)throw Wp.invalidArgumentError("iframeElementSelector","string");const t=document.querySelector(e);if(null===t)throw Wp.missingElementError(e);if(null===t.getAttribute("name"))throw Wp.missingElementAttributeError(e,"name");if("iframe"!==t.tagName.toLowerCase()||null===t.contentDocument&&null===t.contentWindow)throw Wp.invalidElementTypeError(e,"IFrameElement")}(i.elementSelector),Sf(i.challengeDisplayedCallback,"elementVisibleCallback"),Sf(i.challengeHiddenCallback,"elementRemovedCallback"))}(this.analyticsParameters,e,i,r,n)}catch(t){throw this.esLogger.trackAnalyticsEvent({analyticsjs_event:"verify_buyer_completed",analyticsjsverification_error:t.message,analyticsjsverification_id:o,analyticsjsverification_source:e}),t}try{this.verifier.verifyBuyer(o,e,i,((t,n)=>{const i={analyticsjs_event:"verify_buyer_completed",analyticsjsverification_id:o,analyticsjsverification_source:e};t&&(i.analyticsjsverification_error=t.message),n&&(i.analyticsjsverification_user_challenged=n.userChallenged,i.analyticsjsverification_verification_token=n.token),this.esLogger.trackAnalyticsEvent(i),r(t,n)}),n)}catch(e){throw this.errorLogger.captureException(e,{captureContext:{tags:{action:"verifyBuyer"}}}),Wp.unexpectedAnalyticsClientError()}}}const Of=(e,t,r,n)=>new If(e,t,r,n),bf=/^https?:\/\//;function Tf(e){if(!e)return"";if(!bf.test(e))return"[Not Parsable]";const t=new URL(e);return`${t.protocol}//${t.host}`}const Cf={buyer_challenged:"analyticsjsverification",receive_three_ds_authenticate:"analyticsjsverification",receive_verification:"analyticsjsverification",receive_verification_update:"analyticsjsverification",verify_buyer_completed:"analyticsjsverification",verify_buyer_invoked:"analyticsjsverification"};function wf(e){const t=document.cookie.split(";");for(const r of t){const[t,n]=r.split("=");if(void 0!==t&&t.trim()===e&&void 0!==n)return decodeURIComponent(n)}return null}class Rf{constructor(e,t,r,n){const{locationId:i,avt:o}=r;this.es=e,this.errorLogger=n,this.telemetryStarts={},this.baseEvent=function(e,t,r){return"accountId"in r?{anonymous_user_token:t,oauth_credential_account_id:r.accountId,oauth_credential_client_id:e}:{anonymous_user_token:t,oauth_credential_client_id:e,oauth_credential_location_id:r.locationId}}(t,o,{locationId:i??""})}trackAnalyticsEvent(e){try{const t={catalog_name:Cf[e.analyticsjs_event],...this.baseEvent,analyticsjsverification_duration:this.getAnalyticsEventDuration(e),browser_height:window.innerHeight,browser_width:window.innerWidth,device_screen_height:window.screen.height,device_screen_width:window.screen.width,subject_anonymous_token:wf("_savt"),webpage_base_url:Kp.windowLocationOrigin,webpage_full_url:Tf(Kp.windowLocationHref()),webpage_path:"",webpage_referrer:Tf(window.document.referrer),webpage_referrer_path:"",webpage_referrer_search:"",webpage_search:"",webpage_title:window.document.title,...e};this.es.trackV2(t)}catch(t){this.errorLogger.addBreadcrumb({data:{event:e},message:"Eventstream Track Error",type:"error"}),this.errorLogger.captureException(t,{captureContext:{tags:{action:"nonFatal-es2"}}})}}trackTdsEvent(e){try{this.es.trackV2(e)}catch(t){this.errorLogger.addBreadcrumb({data:{event:e},message:"Eventstream TrackTdsEvent Error",type:"error"}),this.errorLogger.captureException(t,{captureContext:{tags:{action:"nonFatal-es2"}}})}}getAnalyticsEventDuration(e){const t=e.analyticsjs_event,r=e.analyticsjsverification_id;if("verify_buyer_invoked"===t)return this.telemetryStarts[r]=Date.now(),null;if("verify_buyer_completed"===t){const e=this.telemetryStarts[r];return void 0===e?null:(delete this.telemetryStarts[r],Date.now()-e)}return null}}class Pf{constructor(e){this.metricsBatchUrl=`${e.pciConnectApiUrl}/v2/analytics/aux`,this.errorLogger=e.errorLogger,this.analyticsClientVersion=e.analyticsClientVersion,this.metricsBuffer=[],this.disableBeacon=!1}trackV2(e){const t={u_library_name:"analytics-client",u_library_version:this.analyticsClientVersion,...e};this.postMetricsEvent(t,!1)}postMetricsEvent(e,t=!1){this.disableBeacon?Dn(this.metricsBatchUrl,{body:{analytics:[e]}}).catch((t=>{this.errorLogger.addBreadcrumb({data:{event:e},message:"Unable to HTTP Post analytics event",type:"error"}),this.errorLogger.captureException(t,{captureContext:{tags:{action:"nonFatal-es2"}}})})):(this.metricsBuffer.push(e),t&&this.buildAndSendBeacon(),void 0===this.currentInterval&&(document.addEventListener("visibilitychange",(()=>{"hidden"===Kp.documentVisibilityState&&(this.buildAndSendBeacon(),clearInterval(this.currentInterval),this.currentInterval=void 0)})),this.currentInterval=setInterval((()=>{this.buildAndSendBeacon()}),1e3)))}buildAndSendBeacon(){if(0!==this.metricsBuffer.length){try{const e=new Blob([JSON.stringify({analytics:this.metricsBuffer})],{type:"text/plain;charset=UTF-8"});Kp.windowNavigationBeacon(this.metricsBatchUrl,e)}catch(e){this.errorLogger.addBreadcrumb({data:{events:this.metricsBuffer},message:"Unable to send beacons for analytics events",type:"error"}),this.errorLogger.captureException(e,{captureContext:{tags:{action:"nonFatal-es2"}}}),this.disableBeacon=!0,void 0!==this.currentInterval&&(clearInterval(this.currentInterval),this.currentInterval=void 0),Dn(this.metricsBatchUrl,{body:{analytics:this.metricsBuffer}}).catch((e=>{this.errorLogger.addBreadcrumb({data:{events:this.metricsBuffer},message:"Unable to send HTTP request for analytics events",type:"error"}),this.errorLogger.captureException(e,{captureContext:{tags:{action:"nonFatal-es2"}}})}))}this.metricsBuffer=[]}}}const Nf={setupClient(e,t){const{connectApiUrl:r,environment:n,hostname:i,locationId:o,pciConnectApiUrl:s,clientVersion:a,webSdkVersion:c}=t;cf.init(r);const u=void 0===a||""===a?`web-payments-sdk@${c}`:`analytics-client@${a}`,l=new yn({dsn:"https://4197e265423545aba2d849d023e8cd33@o160250.ingest.sentry.io/1516559",environment:n,initialScope:{tags:{applicationId:e,applicationUrl:i,source:"analytics-client",webSdkVersion:c}},release:u}),d=new Pf({analyticsClientVersion:u,errorLogger:l,pciConnectApiUrl:s}),h=new Rf(d,e,t,l);return void 0===o?Of(e,h,l):Of(e,h,l,{locationId:o})}};function Df(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Df(Object(r),!0).forEach((function(t){xf(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Df(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xf(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kf(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}var Mf="".concat(Sn.ASSET_URL,"/square-threeds-modal.css");class Uf{constructor(e,t,r){this.applicationId=e,this.locationId=t&&t.length>0?t:void 0,this.activeTokenPromise=null,this.avt=r}generateFreshToken(){var e,t=this;return(e=function*(){var e=t.getAnalyticsClient();t.activeTokenPromise||(t.activeTokenPromise=e.getToken());var r=yield t.activeTokenPromise;return t.activeTokenPromise=null,r},function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){kf(o,n,i,s,a,"next",e)}function a(e){kf(o,n,i,s,a,"throw",e)}s(void 0)}))})()}verifyBuyer(e,t){var r,n=this.getAnalyticsClient(),i=Lf(Lf({},t),{},{billingContact:(r=t.billingContact,function(e){return"region"in e||"country"in e||"countryName"in e}(r)?r:{addressLines:r.addressLines,city:r.city,country:r.countryCode,email:r.email,familyName:r.familyName,givenName:r.givenName,phone:r.phone,postalCode:r.postalCode,region:r.state})});return n.verifyBuyer(e,i)}getAnalyticsClient(){if(this.analyticsClient)return this.analyticsClient;vl.addStyleElement(Mf,"sq-threeds-modal-styles");var e=Nf.setupClient(this.applicationId,{avt:this.avt,clientVersion:Sn.ANALYTICS_CLIENT_VERSION,connectApiUrl:Sn.CONNECT_API_URL,environment:Sn.env,hostname:s.windowLocation.origin,locationId:this.locationId,pciConnectApiUrl:Sn.API_URL,webSdkVersion:Sn.VERSION});return this.analyticsClient=e,e}}function jf(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Hf(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){jf(o,n,i,s,a,"next",e)}function a(e){jf(o,n,i,s,a,"throw",e)}s(void 0)}))}}function Ff(e,t){var{paymentMethodSupportDetail:r,metricsHandler:n}=t,i=t.getSession();if(!i.locationId||0===i.locationId.length)throw new Ti(Ea,"locationId");if(r&&r[e]&&!r[e].IsSupported){var{UnsupportedReasonType:o}=r[e],s=Sa;throw o&&o in fa&&(s=Aa[o]),n.logEvent("BUILD:ERROR"),new Ti(s)}}function Bf(e,t){if(!(e instanceof dd))throw t.metricsHandler.logEvent("BUILD:ERROR"),new li([["paymentRequest","PaymentRequest"]])}class qf{constructor(e,t,r){this.localeStrings=new ds(navigator.language),this.paymentOptions=e,this.metrics=t,this.errorLogger=r,this.paymentRequestLockMap=new WeakMap}overrideStrings(e){var t=this;return Hf((function*(){try{var r=yield t.getPaymentContext(Jo.App);if(!r.featureFlagActive("can_use_override_strings"))throw new Ii("overrideStrings");r.metricsHandler.logEvent("OVERRIDE_STRINGS",e),r.setTranslationOverrides(e)}catch(e){if(zo(e))throw t.errorLogger.captureException(e),new Ui("overriding the strings");throw e}}))()}setLocale(e){var t=this;return Hf((function*(){try{var r=yield t.getPaymentContext(Jo.App);return r.metricsHandler.logEvent("SET_LOCALE",e),r.setLocale(e)}catch(e){if(zo(e))throw t.errorLogger.captureException(e),new Ui("setting the locale");throw e}}))()}verifyBuyer(e,t){var r=this;return Hf((function*(){var n=[];if(r.paymentOptions.locationId&&0!==r.paymentOptions.locationId.length||n.push(new Ia("verifyBuyer","locationId","string")),e&&"string"==typeof e&&0!==e.length||n.push(new Ia("verifyBuyer","source","string")),t&&"object"==typeof t?n.push(...hh.validateVerificationDetails(t,"verifyBuyer")):n.push(new Ia("verifyBuyer","details","object")),n.length>0)throw new Oa(n);var i=yield r.getPaymentContext(Jo.App,!1);try{i.metricsHandler.logEvent("VERIFICATION:START");var o=yield i.analyticsManager.verifyBuyer(e,t);return i.metricsHandler.logEvent("VERIFICATION:OK"),o}catch(e){if(i.metricsHandler.logEvent("VERIFICATION:ERROR"),"UnexpectedAnalyticsClientError"===e.name)throw new Ui("verifying buyer");throw new ci(e)}}))()}card(e){var t=this;return Hf((function*(){var r=yield t.getPaymentContext(Jo.Card);r.metricsHandler.logEvent("BUILD:START");try{var n=new Rl(r,e);return r.metricsHandler.logEvent("BUILD:OK","good"),n}catch(e){var i=e instanceof gi||e instanceof mi;if(r.metricsHandler.logEvent("BUILD:ERROR",i?"good":"bad"),i)throw e;throw r.errorLogger.captureException(e),new Ui("initializing card")}}))()}paymentRequest(e){var t=new kd,r=new dd(e,this.localeStrings,t);return this.paymentRequestLockMap.set(r,t),this.getPaymentContext(Jo.PaymentRequest).then((t=>{var{metricsHandler:n}=t;r.setMetricsHandler(n),n.logEvent("CONFIGURED",e)})),r}googlePay(e){var t=this;return Hf((function*(){var r=yield t.getPaymentContext(Jo.GooglePay);r.metricsHandler.logEvent("BUILD:START"),Ff(ea.GOOGLE_PAY,r),function(e){if("undefined"==typeof ShadowRoot)throw e.metricsHandler.logEvent("BUILD:ERROR"),new Ti(va)}(r),Bf(e,r);try{var n=t.getPaymentRequestLock(e),[i,o]=yield xd(r),s=Lp(i,e,r,o,n);return r.metricsHandler.logEvent("BUILD:OK"),s}catch(e){throw r.metricsHandler.logEvent("BUILD:ERROR"),e}}))()}applePay(e){var t=this;return Hf((function*(){var r=yield t.getPaymentContext(Jo.ApplePay);r.metricsHandler.logEvent("BUILD:START"),Ff(ea.APPLE_PAY,r),Bf(e,r);try{var n=t.getPaymentRequestLock(e),i=Np(e,r,n);return r.metricsHandler.logEvent("BUILD:OK"),i}catch(e){throw r.metricsHandler.logEvent("BUILD:ERROR"),e}}))()}ach(e){var t=this;return Hf((function*(){var r=yield t.getPaymentContext(Jo.Ach);r.metricsHandler.logEvent("BUILD:START"),Ff(ea.ACH,r);try{var n=new Pc(r,e);return yield n.initialize(),r.metricsHandler.logEvent("BUILD:OK"),n}catch(e){throw r.metricsHandler.logEvent("BUILD:ERROR"),e}}))()}giftCard(e){var t=this;return Hf((function*(){var r=yield t.getPaymentContext(Jo.GiftCard);r.metricsHandler.logEvent("BUILD:START");try{var n=new Hl(r,e);return r.metricsHandler.logEvent("BUILD:OK"),n}catch(e){throw r.metricsHandler.logEvent("BUILD:ERROR"),e}}))()}afterpayClearpay(e){var t=this;return Hf((function*(){var r=yield t.getPaymentContext(Jo.Afterpay);r.metricsHandler.logEvent("BUILD:START"),Ff(ea.AFTERPAY,r),Bf(e,r);try{var n=t.getPaymentRequestLock(e),[i,o]=yield yp(r),s=Pp(i,o,e,r,n);return yield s.internalSetCheckoutToken(),r.metricsHandler.logEvent("BUILD:OK"),s}catch(e){throw r.metricsHandler.logEvent("BUILD:ERROR"),e}}))()}cashAppPay(e,t){var r=this;return Hf((function*(){var n=yield r.getPaymentContext(Jo.CashAppPayV1);n.metricsHandler.logEvent("BUILD:START"),Ff(ea.CASH_APP_PAY_V1,n),Bf(e,n);try{var i=r.getPaymentRequestLock(e),o=yield Rp.initialize(n),s=Dp(o,e,t,n,i);return n.metricsHandler.logEvent("BUILD:OK"),s}catch(e){throw n.metricsHandler.logEvent("BUILD:ERROR"),e}}))()}getPaymentContext(e){var t=arguments,r=this;return Hf((function*(){var n=!(t.length>1&&void 0!==t[1])||t[1],{featureFlagValues:i,messenger:o,session:s,paymentMethodSupportDetail:a,proofOfWorkComputePromise:c,isTestMerchant:u}=yield r.initializePaymentMethod(),l={instanceId:s.instanceId,sessionId:s.sessionId};s.avt&&(r.errorLogger.setUser(s.avt),l.avt=s.avt),r.errorLogger.setCustomTags(l);var d=Ta(),h=new Ca(r.metrics,s,e,d);if(r.contextEventTarget||(r.contextEventTarget=new ba),void 0===r.analyticsManager){var p,f=new Uf(s.applicationId,s.locationId,null!==(p=s.avt)&&void 0!==p?p:"");r.analyticsManager=kp.build(f,r.errorLogger),r.analyticsManager.setupAutoRefresh(Ra)}var g=new pa(r.errorLogger,o,h,s,a,r.localeStrings,r.contextEventTarget,i,u,r.analyticsManager,c);return n&&r.analyticsManager.beginGenerateToken(),r.errorLogger.setRecordErrorMetrics(g.featureFlagActive("record_error_metrics")),g}))()}initializePaymentMethod(){return this.initializePaymentParamPromise||(this.initializePaymentParamPromise=hh.initializePayment(this.paymentOptions,this.metrics,this.errorLogger,this.localeStrings)),this.initializePaymentParamPromise}getPaymentRequestLock(e){var t=this.paymentRequestLockMap.get(e);if(!t){var r=new Ui("PaymentRequestLockMap entry does not exist. This should never happen.");throw this.errorLogger.captureException(r),r}return t}}function Vf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vf(Object(r),!0).forEach((function(t){zf(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zf(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $f=new Map;function Yf(e,t){var r,n="".concat(e,"-").concat(null!=t?t:"");if($f.has(n))return $f.get(n);if(!(r=s.windowLocation).hostname.endsWith("localhost")&&"https:"!==r.protocol)throw new bi;if(!s.isSupported())throw new Oi;if(function(e){if(!function(e){return!(e.length<22||e.length>37)&&oo.test(e)&&!so.test(e)}(e))throw new Qn;var t=e.match(/^[\w-]{22}$/),r=e.startsWith("sq0idp-"),n=e.startsWith("sandbox-sq0idb"),i=e.startsWith("sq0ids-");if(!(t||r||n||i))throw new Qn;if(r&&!co())throw new Jn(En.production,Sn.env);if(n&&!ao(En.sandbox))throw new Jn(En.sandbox,Sn.env)}(e),null!=t&&"string"!=typeof t)throw new Zn;var i=new Ao({applicationId:e,applicationUrl:window.location.origin,source:"web-payments-sdk-public",useGlobalHandlers:!1}),o=s.windowLocation.hostname,a={applicationId:e,hostname:o,locationId:null!=t?t:"",sourceUrl:s.windowLocation.origin},c=new sa(i,{applicationId:e,hostname:o,locationId:null!=t?t:""});c.logEvent({event:"LOAD:OK",eventSource:Jo.App});var u=new qf(a,c,i);return $f.set(n,u),u}window.Square?(window.Square.errors=window.Square.errors?Gf(Gf({},$o),window.Square.errors):$o,window.Square._buildWebSDKV1Payments=Yf):window.Square={_buildWebSDKV1Payments:Yf,_utils:{},errors:$o,payments:Yf}})()})();
//# debugId=2ec69e17-d703-56e2-a94d-3b5aabf0ea0e
